Artefacts ^{
    ArtAntigrav ^{
        Name=Антигравитатор
        OnActCodeTypes=t_OnAnotherItem
        OnActCode ^{
            01=dword item = ScriptItemActObject1();
            02=if(ItemType(item) < t_FuelTanks || ItemType(item) > t_Weapon18) exit;
            03=int min_size = 0;
            04=str tstr;
            05=if(ItemType(item) == t_FuelTanks) tstr = CT('Items.FuelTanks.AverageSize');
            06=else if(ItemType(item) == t_Engine) tstr = CT('Items.Engine.AverageSize');
            07=else if(ItemType(item) == t_Radar) tstr = CT('Items.Radar.AverageSize');
            08=else if(ItemType(item) == t_Scaner) tstr = CT('Items.Scaner.AverageSize');
            09=else if(ItemType(item) == t_RepairRobot) tstr = CT('Items.RepairRobot.AverageSize');
            10=else if(ItemType(item) == t_CargoHook) tstr = CT('Items.CargoHook.AverageSize');
            11=else if(ItemType(item) == t_DefGenerator) tstr = CT('Items.DefGenerator.AverageSize');
            12=else if(ItemType(item) > t_DefGenerator) tstr = CT('Items.Weapon.Stats.' + (ItemType(item) - t_DefGenerator) + '.AverageSize');
            13=min_size = tstr;
            14=if(ItemSize(item) > min_size / 2)
            15 ^{
                01=tstr = Format('Уменьшить вес предмета (ITEM) на 10%? Артефакт будет уничтожен.', 'ITEM', DeleteTags(ItemFullName(item)));
                02=if(MessageBoxYesNo(tstr))
                03 ^{
                    01=ItemSize(item, ItemSize(item) - ItemSize(item) / 10);
                    02=Sound('Sound.Repair');
                    03=ScriptItemActParam(1);
                }
            }
        }
        Text=Создаёт собственное гравитационное поле, уменьшая фактическую массу корабля на <clr>25%<clrEnd>.
		Text=<clr><clrEnd>
        Text=При активации позволяет уменьшить размер выбранного оборудования на <clr>10%<clrEnd>, но не более минимально допустимого веса. Его  же собственная масса при этом становится нулевой, что приводит к самоаннигиляции.
    }
    ArtDef ^{
        Name=Поляризатор
        OnUseCode ^{
            01=if(ShipInNormalSpace(Player()))
            02 ^{
                01=if(ItemDurability(CurItem()) < 50) MessageBox('Запаса прочности поляризатора недостаточно для активации перегрузки.');
                02=else
                03 ^{
                    01=if(MessageBoxYesNo('Вы действительно хотите перегрузить поляризатор?'))
                    02 ^{
                        01=Sound('Sound.Zamknulo');
                        02=Sound('Sound.ab_shot11');
                        03=Sound('Sound.ab_shot13');
                        04=int scaner_val = ShipScanerPower(Player());
                        05=int i;
                        06=dword ship;
                        07=dword target;
                        08=int target_dmg;
                        09=for(i = 0; i < StarShips(ShipStar(Player())); i = i + 1)
                        10 ^{
                            01=if(ItemDurability(CurItem()) < 3) break;
                            02=ship = StarShips(ShipStar(Player()), i);
                            03=if(ship == Player()) continue;
                            04=if(Dist(Player(), ship) <= 500 && RelationToRanger(ship, Player()) < 10)
                            05 ^{
                                01=if(ShipEqInSlot(ship, t_DefGenerator) > 0)
                                02 ^{
                                    01=target=ShipEqInSlot(ship, t_DefGenerator);
                                    02=if(ItemDurability(target))
                                    03 ^{
                                        01=target_dmg = Rnd(15, 25);
                                        02=if(ShipProtectability(ship) <= scaner_val) target_dmg = target_dmg * 2;
										03=target_dmg = ItemDurability(target) - target_dmg;
                                        04=if(target_dmg < 0) target_dmg = 0;
                                        05=ItemDurability(target, target_dmg);
                                    }
                                }
                            }
                        }
                        11=ItemDurability(CurItem(), ItemDurability(CurItem()) - 50);
                    }
                }
            }
            03=if(!ShipInNormalSpace(Player())) MessageBox('Этот предмет может быть использован только в открытом космосе');
        }
        Text=Испускает электроны, усиливающие защитное поле корабля на <clr>5<clrEnd> процентов. С небольшой вероятностью отражает нанесенный урон обратно в противника.
        Text=При активации, перегружает свои электрические цепи, генерируя мощный электромагнитный импульс, наносящий серьёзные повреждения генераторам защитного поля всех противников на дистанции <clr>500<clrEnd> ед. Сам при этом сильно изнашивается.
    }
	ArtDefToArms1 ^{
		Name=Протон
        OnActCodeTypes=t_OnAnotherItem
		OnActCode ^{
			01=dword item = ScriptItemActObject1();
			02=if(ItemType(item) != t_Hull) exit;
			03=if(ItemExtraSpecials(item))
			04 ^{
				01=int i;
				02=int spNum;
				03=str spName;
				04=for(i = 0; i < ItemExtraSpecials(item); i = i + 1)
				05 ^{
					01=spNum = ItemExtraSpecials(item, i);
					02=spName = BonusNumInCfg(spNum);
					03=if(spName == 'ExpArtsPlus_AddSlotWeapon')
					04 ^{
						01=MessageBox('Этот корпус уже имеет дополнительную орудийную турель.');
						02=exit;
					}
				}
			}
			05=if(GetEquipmentStats(item, 1) >= 5) MessageBox('Все слоты оружия уже открыты.');
			06=else
			07 ^{
				01=if(MessageBoxYesNo('Вы уверены, что хотите встроить протон в корпус навсегда?'))
				02 ^{
					01=ItemExtraSpecialsAddByType(item, FindBonusByNameInCfg('ExpArtsPlus_AddSlotWeapon'), 1);
					02=ItemSize(item, ItemSize(item) - ItemSize(CurItem()));
					03=ItemCost(item, ItemCost(item) + ItemCost(CurItem()));
					04=if(HullHP(item) > ItemSize(item)) HullHP(item, ItemSize(item));
					05=ScriptItemActParam(1);
					06=Sound('Sound.Repair');
				}
			}
		}
        Text=Интегрируется в энергетический блок защитного поля. Использует <clr>10%<clrEnd> его мощности для активации дополнительной орудийной турели.
        Text=Может быть навсегда встроен в корпус, уменьшая при этом его вместимость.
	}
    ArtDroid ^{
        Broken=(испорчен)
        BrokenInBattle=Внимание! Младший дроид был повреждён в бою. Требуется ремонт.
        BrokenInUse=Младший дроид долго работал в невыносимых условиях и сломался. Требуется ремонт.
        Description=Младший дроид - облегчённый вариант основного дроида, при помощи специальной системы синхронизации подключаемый к общему кабелю. Работает вместе с основным дроидом, снижая его износ в два раза, а также увеличивая скорость ремонтных работ на корабле.
        Name=Дроид младший
        OnActCodeTypes=t_OnStep
        OnActStepTypes=11
        OnActCode ^{
            01=dword ship = ScriptItemActShip();
            02=if(!ship) exit;
            03=if(!ItemDurability(CurItem())) exit;
            04=dword droid = ShipEqInSlot(ship, t_RepairRobot);
            05=dword hull;
            06=if(!droid || ItemDurability(droid)<=0)
            07 ^{
                01=hull = ShipItems(ship, 0);
                02=if(HullHP(hull) < ItemSize(hull))
                03 ^{
                    01=if(ArtefactTypeBoosted(ship, t_ArtefactDroid)) HullHP(hull, HullHP(hull) + CT('Artefacts.NumericValues.kArtefactDroid') + CT('Artefacts.NumericValues.kArtefactDroidEx'));
                    02=else HullHP(hull, HullHP(hull) + CT('Artefacts.NumericValues.kArtefactDroid'));
                    03=if(HullHP(hull) > ItemSize(hull)) HullHP(hull, ItemSize(hull));
                    04=if(Rnd(1, 100) <= 15) ItemDurability(CurItem(), ItemDurability(CurItem()) - 1);
                }
            }
            08=else if(EqSpecial(droid) > -1)
            09 ^{
                01=if(BonusNumInCfg(EqSpecial(droid)) == 'RevAcrynBattleDroid')
                02 ^{
                    01=hull = ShipItems(ship, 0);
                    02=if(HullHP(hull) < ItemSize(hull))
                    03 ^{
                        01=if(ArtefactTypeBoosted(ship, t_ArtefactDroid)) HullHP(hull, HullHP(hull) + CT('Artefacts.NumericValues.kArtefactDroid') + CT('Artefacts.NumericValues.kArtefactDroidEx'));
                        02=else HullHP(hull, HullHP(hull) + CT('Artefacts.NumericValues.kArtefactDroid'));
                        03=if(HullHP(hull) > ItemSize(hull)) HullHP(hull, ItemSize(hull));
					}
                }
            }
        }
        Text=Этот маленький дроид может восстанавливать <clr>10<clrEnd> единиц повреждённого корпуса корабля и способен работать даже в гиперпространстве. Также снижает износ основного дроида в <clr>2<clrEnd> раза.
    }
	ArtEnergyDef ^{
        Name=Проглот
        OnUseCode ^{
			01=if(ItemDurability(CurItem()) && ShipInNormalSpace(Player()))
			02 ^{
				01=if(ItemDurability(CurItem()) < 90) MessageBox('Запаса прочности проглота недостаточен для активации перегрузки');
				02=else
				03 ^{
					01=if(MessageBoxYesNo('Перегрузить проглот для получения временнй неуязвимости?'))
					02 ^{
						01=Sound('Sound.HangarOpen');
						02=ShipAddCustomShipInfo(Player(), 'ArtEnergyDef_infos', 'NoShow');
						03=ItemDurability(CurItem(), ItemDurability(CurItem()) - 90);
					}
				}	
            }
			03=if(!ShipInNormalSpace(Player())) MessageBox('Этот предмет может быть использован только в открытом космосе');
        }
        Text=В <clr>30%<clrEnd> случаев поглощает тепловую составляющую луча энергетического оружия, превращая импульсы попаданий в безопасные электрические всплески.
        Text=При перегрузке многократно увеличивает мощность защитного поля корабля, давая ему <clr>полную неуязвимость<clrEnd> на один ход. Сам при этом практически полностью изнашивается.
    }
    ArtFastRacks ^{
        Description=Ралс - тестовая версия нового программного обеспечения механизма заряжания ракетного оружия, выполненная в виде отдельного субблока. Позволяет произвести два залпа вместо одного за счёт оптимизации алгоритмов перемещения подвижных частей.
        Name=Ралс
        OnUseCode ^{
            01=OnUseCodeMissileDef();
        }
        Text=Обеспечивает <clr>15%<clrEnd> шанс двойного залпа из ракетного оружия.
        Text=<br> <br>
        Text=При активации передаёт всем выпущенным ракетам команду на мгновенную детонацию, тем самым ликвидируя их ещё до подлёта к заданной цели.
    }
    ArtFuel ^{
        BrokenInBattle=Ужас! Вражеский выстрел попал прямо в чёрную жижу. Выработка топлива прекращена.
        BrokenInUse=Чёрная жижа исчерпала свои ресурсы. Необходимо заправить её. Но чем?
        Description=Чёрная жижа - смесь, полученная учёными древности. Способ приготовления чёрной жижи безвозвратно утерян, но несколько порций этого вещества сохранилось в Галактике по сей день. Помещённая в топливный бак, жижа действует как катализатор, постепенно увеличивая количество топлива.
        Name=Чёрная жижа
        OnActCodeTypes=t_OnStep
        OnActStepTypes=11
        OnActCode ^{
            01=dword ship = ScriptItemActShip();
            02=if(!ship) exit;
            03=if(!ItemDurability(CurItem())) exit;
            04=if(ScriptItemActionType(t_OnStep, 11))
            05 ^{
                01=if(EqModule(CurItem()) > -1)
                02 ^{
                    01=if(!OrderForsage(ship))
                    02 ^{
                        01=int compCheck = ArtefactTypeBoosted(ship, t_ArtMissileDef);
                        02=int rollChance = 50;
                        03=if(compCheck) rollChance = 75;
                        04=if(Rnd(1, 100) <= rollChance)
                        05 ^{
                            01=dword tdwd=ShipEqInSlot(ship, t_Engine);
                            02=if(tdwd != 0)
                            03 ^{
                                01=if(ItemDurability(tdwd) < 85) ItemDurability(tdwd, ItemDurability(tdwd) + 1);
                            }
                            04=tdwd = ShipEqInSlot(ship, t_FuelTanks);
                            05=if(tdwd != 0)
                            06 ^{
                                01=if(ItemDurability(tdwd) < 85) ItemDurability(tdwd, ItemDurability(tdwd) + 1);
                            }
                            07=if(!compCheck) rollChance=100;
                            08=if(Rnd(1,100) <= rollChance) ItemDurability(CurItem(), ItemDurability(CurItem()) - 1);
                        }
                    }
                }
            }
        }
        OnUseCode ^{
            01=if(EqModule(CurItem()) == -1)
            02 ^{
                01=EqModule(CurItem(), FindBonusByCustomTag('AkrinAmplifier'));
                02=EquipmentImageName(CurItem(), 'ArtFuel_AddOn');
                03=Sound('Sound.Mod_Switch');
            }
            03=else
            04 ^{
                01=EqModule(CurItem(), -1);
                02=EquipmentImageName(CurItem(), '');
                03=Sound('Sound.Mod_Switch');
            }
        }
        Text=Вырабатывает топливо, постепенно наполняя топливный бак.
        Text=<br> <br>
        Text=<color=255,0,0>Дополнительное свойство отключено:</color>
        Text=При соблюдении определённых условий имеет<br>шанс произвести особые наночастицы, которые,<br>смешиваясь с топливом, благоприятно воздействуют<br>на топливный бак и двигатель изнутри, постепенно<br>восстанавливая их структуру.
    }
    ArtFuel_AddOn ^{
        Text=Вырабатывает топливо, постепенно наполняя топливный бак.
        Text=<br> <br>
        Text=<color=0,255,0>Дополнительное свойство активно:</color>
        Text=При соблюдении определённых условий имеет<br>шанс произвести особые наночастицы, которые,<br>смешиваясь с топливом, благоприятно воздействуют<br>на топливный бак и двигатель изнутри, постепенно<br>восстанавливая их структуру.
    }
	ArtHook ^{
		Broken=(не функционирует)
		BrokenInBattle=В бою с эриметра был сбит поляризующий наконечник. Устройство вышло из строя и мешает функционированию захвата.
		BrokenInUse=Длительный срок эксплуатации эриметра подошёл к концу. Он срочно требует ремонта, так как стал мешать функционированию захвата.
		Description=Эриметр фокусирует луч захвата, благодаря чему его направленность резко сужается, а КПД увеличивается. В итоге луч захвата может притягивать предметы с массой больше расчётной.
		Name=Эриметр
		OnActCodeTypes=t_OnAnotherItem
		OnActCode ^{
			01=dword item=ScriptItemActObject1();
			02=if(ItemType(item) != t_CargoHook)exit;
			03=int i=0;
			04=str tStr='';
			05=if(ItemExtraSpecials(item))
			06 ^{
				01=i=0;
				02=int spNum=0;
				03=str spName;
				04=for(i=0;i<ItemExtraSpecials(item);i=i+1)
				05 ^{
					01=spNum=ItemExtraSpecials(item,i);
					02=spName=BonusNumInCfg(spNum);
					03=if(spName=='ExpArtsPlus_ArtBonusHookNormal3' || spName=='ExpArtsPlus_ArtBonusHookBoosted3')
					04 ^{
						01=MessageBox('Достигнуто предельное увеличение характеристик захвата.');
						02=exit;
					}
					05=if(spName=='ExpArtsPlus_ArtBonusHookNormal2' || spName=='ExpArtsPlus_ArtBonusHookBoosted2')
					06 ^{
						01=if(MessageBoxYesNo('Вы уверены, что хотите навсегда встроить эриметр в захват?'+tStr))
						02 ^{
							01=ItemExtraSpecialsDeleteByType(item,spNum);
							02=if(ItemOwner(item)!=6)
							03 ^{
								01=ItemExtraSpecialsAddByType(item,FindBonusByNameInCfg('ExpArtsPlus_ArtBonusHookNormal3'),1);
								02=SetEquipmentStats(item,GetEquipmentStats(item,0)+20,0);
								03=SetEquipmentStats(item,GetEquipmentStats(item,1)+20,1);
								04=SetEquipmentStats(item,GetEquipmentStats(item,2)+1.0,2);
								05=SetEquipmentStats(item,GetEquipmentStats(item,3)+1.0,3);
							}
							04=if(ItemOwner(item)==6)
							05 ^{
								01=ItemExtraSpecialsAddByType(item,FindBonusByNameInCfg('ExpArtsPlus_ArtBonusHookBoosted3'),1);
								02=SetEquipmentStats(item,GetEquipmentStats(item,0)+25,0);
								03=SetEquipmentStats(item,GetEquipmentStats(item,1)+25,1);
								04=SetEquipmentStats(item,GetEquipmentStats(item,2)+2.0,2);
								05=SetEquipmentStats(item,GetEquipmentStats(item,3)+2.0,3);
							}
							06=ItemSize(item,ItemSize(item)+ItemSize(CurItem()));
							07=ItemCost(item,ItemCost(item)+ItemCost(CurItem()));
							08=ScriptItemActParam(1);
							09=Sound('Sound.Repair');
							10=exit;
						}
					}
					07=if(spName=='ExpArtsPlus_ArtBonusHookNormal1' || spName=='ExpArtsPlus_ArtBonusHookBoosted1')
					08 ^{
						01=if(MessageBoxYesNo('Вы уверены, что хотите навсегда встроить эриметр в захват?'+tStr))
						02 ^{
							01=ItemExtraSpecialsDeleteByType(item,spNum);
							02=if(ItemOwner(item)!=6)
							03 ^{
								01=ItemExtraSpecialsAddByType(item,FindBonusByNameInCfg('ExpArtsPlus_ArtBonusHookNormal2'),1);
								02=SetEquipmentStats(item,GetEquipmentStats(item,0)+15,0);
								03=SetEquipmentStats(item,GetEquipmentStats(item,1)+15,1);
							}
							04=if(ItemOwner(item)==6)
							05 ^{
								01=ItemExtraSpecialsAddByType(item,FindBonusByNameInCfg('ExpArtsPlus_ArtBonusHookBoosted2'),1);
								02=SetEquipmentStats(item,GetEquipmentStats(item,0)+25,0);
								03=SetEquipmentStats(item,GetEquipmentStats(item,1)+25,1);
							}
							06=ItemSize(item,ItemSize(item)+ItemSize(CurItem()));
							07=ItemCost(item,ItemCost(item)+ItemCost(CurItem()));
							08=ScriptItemActParam(1);
							09=Sound('Sound.Repair');
							10=exit;
						}
					}
				}
			}
			07=if(!ItemImprovement(item))tStr=' Улучшить такой захват на научной базе будет невозможно.';
			08=if(MessageBoxYesNo('Вы уверены, что хотите навсегда встроить эриметр в захват?'+tStr))
			09 ^{
				01=if(ItemOwner(item)!=6)
				02 ^{
					01=ItemExtraSpecialsAddByType(item,FindBonusByNameInCfg('ExpArtsPlus_ArtBonusHookNormal1'),1);
					02=SetEquipmentStats(item,GetEquipmentStats(item,0)+15,0);
					03=SetEquipmentStats(item,GetEquipmentStats(item,1)+15,1);
				}
				03=if(ItemOwner(item)==6)
				04 ^{
					01=ItemExtraSpecialsAddByType(item,FindBonusByNameInCfg('ExpArtsPlus_ArtBonusHookBoosted1'),1);
					02=SetEquipmentStats(item,GetEquipmentStats(item,0)+25,0);
					03=SetEquipmentStats(item,GetEquipmentStats(item,1)+25,1);
				}
				05=ItemSize(item,ItemSize(item)+ItemSize(CurItem()));
				06=ItemCost(item,ItemCost(item)+ItemCost(CurItem()));
				07=ScriptItemActParam(1);
				08=Sound('Sound.Repair');
			}
		}
		Text=Позволяет лучу захвата притягивать предметы с массой больше расчётной на <clr>50<clrEnd> единиц. Повышает скорость притягивания вещей и радиус захвата.
		Text=<clr><clrEnd>
		Text=При совмещении с захватом навсегда увеличивает его дальность.
	}
    ArtHull ^{
		Name=Железные жупи
		OnActCodeTypes=t_OnAnotherItem
		OnActCode ^{
			01=dword item = ScriptItemActObject1();
			02=if(ItemType(item) != t_Hull) exit;
			03=int i;
			04=str tStr;
			05=if(ItemExtraSpecials(item))
			06 ^{
				01=int spNum;
				02=str spName;
				03=for(i=0;i<ItemExtraSpecials(item);i=i+1)
				04 ^{
					01=spNum=ItemExtraSpecials(item,i);
					02=spName=BonusNumInCfg(spNum);
					03=if(spName=='ExpArtsPlus_AddHullArmor3')
					04 ^{
						01=MessageBox('Колония жупий на этом корпусе уже достигла максимально возможного размера.');
						02=exit;
					}
					05=if(spName=='ExpArtsPlus_AddHullArmor2')
					06 ^{
						01=if(MessageBoxYesNo('Вы уверены, что хотите навсегда переселить колонию в этот корпус?'+tStr))
						02 ^{
							01=ItemExtraSpecialsDeleteByType(item,spNum);
							02=ItemExtraSpecialsAddByType(item,FindBonusByNameInCfg('ExpArtsPlus_AddHullArmor3'),1);
							03=SetEquipmentStats(item,GetEquipmentStats(item,0)+1,0);
							04=ItemSize(item,ItemSize(item)-ItemSize(CurItem()));
							05=ItemCost(item,ItemCost(item)+ItemCost(CurItem()));
							06=if(HullHP(item)>ItemSize(item))HullHP(item,ItemSize(item));
							07=ScriptItemActParam(1);
							08=Sound('Sound.Repair');
							09=exit;
						}
					}
					07=if(spName=='ExpArtsPlus_AddHullArmor1')
					08 ^{
						01=if(MessageBoxYesNo('Вы уверены, что хотите навсегда переселить колонию в этот корпус?'+tStr))
						02 ^{
							01=ItemExtraSpecialsDeleteByType(item,spNum);
							02=ItemExtraSpecialsAddByType(item,FindBonusByNameInCfg('ExpArtsPlus_AddHullArmor2'),1);
							03=SetEquipmentStats(item,GetEquipmentStats(item,0)+1,0);
							04=ItemSize(item,ItemSize(item)-ItemSize(CurItem()));
							05=ItemCost(item,ItemCost(item)+ItemCost(CurItem()));
							06=if(HullHP(item)>ItemSize(item))HullHP(item,ItemSize(item));
							07=ScriptItemActParam(1);
							08=Sound('Sound.Repair');
							09=exit;
						}
					}
				}
			}
			07=if(!ItemImprovement(item)) tStr=' Улучшить такой корпус на научной базе будет невозможно.';
			08=if(MessageBoxYesNo('Вы уверены, что хотите навсегда переселить колонию в этот корпус?'+tStr))
			09 ^{
				01=ItemExtraSpecialsAddByType(item,FindBonusByNameInCfg('ExpArtsPlus_AddHullArmor1'),1);
				02=SetEquipmentStats(item,GetEquipmentStats(item,0)+1,0);
				03=ItemSize(item,ItemSize(item)-ItemSize(CurItem()));
				04=ItemCost(item,ItemCost(item)+ItemCost(CurItem()));
				05=if(HullHP(item)>ItemSize(item))HullHP(item,ItemSize(item));
				06=ScriptItemActParam(1);
				07=Sound('Sound.Repair');
			}
		}
		Text=Колония железных жупи, во главе с маткой, увеличивает защиту корпуса на <clr>5<clrEnd> единиц.
		Text=При активации вся колония переселяется на корпус, броня которого увеличивается на <clr>1<clrEnd> ед. Жупи сильно привязываются к месту обитания и уже не возвращаются в контейнер, строят себе новое гнездо в корпусе, уменьшая там самым его вместимость.
    }
    ArtMiniExpl ^{
        Description=При попадании локализатор отводит энергию выстрела на внешнюю поверхность вражеского корабля, чтобы при возможном взрыве пострадало как можно меньше оборудования.
        Name=Локализатор взрывной волны
		OnActCodeTypes=t_OnWeaponShot,t_OnMissileHittingObject,t_OnTakingDamage
        OnActCode ^{
            01=if(!IsScriptActive('Mod_ExpTC')) exit;
            02=if(ItemIsInUse(CurItem()) && !ItemIsBroken(CurItem()))
            03 ^{
				01=dword asteroid = ScriptItemActObject1();
				02=if(ObjectType(asteroid) == 8)
				03 ^{
					01=dword cur_ship = ScriptItemActShip();
					02=int minerals = AsteroidMinerals(asteroid);
					03=dword nugget = CreateCustomCountableItem('NuggetAsteroid', minerals / 5, 1);
					04=dword planet;
					05=int i = 0;
					06=int cost = 0;
					07=while(!cost)
					08 ^{
						01=planet = StarPlanets(ShipStar(cur_ship), i);
						02=if(PlanetOwner(planet) != 6) cost = GoodsBuyPrice(planet, t_Minerals) * Rnd(2, 6);
						03=i = i + 1;
					}
					09=ItemCost(nugget, ItemSize(nugget) * cost);
					10=DropItemInSystem(ShipStar(cur_ship), nugget, CoordX(asteroid), CoordY(asteroid), 0.0 + CoordX(asteroid) + 100.0 * sin((pi * Rnd(0, 360)) / 180.0), CoordY(asteroid) - 100.0 * cos((pi * Rnd(0, 360)) / 180.0));
				}
            }
        }
        Text=Сохраняет много ценного оборудования врага при его ликвидации, а также ценную руду из астероидов.
    }
    ArtNano ^{
        Name=Нанитоиды
        OnActCodeTypes=t_OnStep
        OnActStepTypes=11
        OnActCode ^{
            01=dword ship = ScriptItemActShip();
            02=if(!ship) exit;
            03=dword cur_item = CurItem();
            04=if(!ItemDurability(cur_item)) exit;
            05=if(ScriptItemActionType(t_OnStep, 11))
            06 ^{
                01=if(EqModule(cur_item) > -1)
                02 ^{
                    01=if(!ArtefactTypeBoosted(ship, t_ArtefactNano))
                    02 ^{
                        01=for(int i = 1; i < 6; i = i + 1)
                        02 ^{
                            01=dword tdwd = ShipEqInSlot(ship, t_Weapon1, i);
                            02=if(ItemType(tdwd) >= t_Weapon13 && ItemType(tdwd) <= t_Weapon15)
                            03 ^{
                                01=if(GetNodesFromShip(ship) < 1) break;
                                02=if(ItemDurability(tdwd) < 61)
                                03 ^{
                                    01=if(!ItemDurability(tdwd)) Ether(2, '', Format(CT('Artefacts.ArtNano.RepairItem'), '<Name>', Name(tdwd)));
                                    02=ItemDurability(tdwd, ItemDurability(tdwd) + 2);
                                    03=GetNodesFromShip(ship, 1);
                                    04=if(Rnd(1, 100) <= 33) ItemDurability(cur_item, ItemDurability(cur_item) - 1);
                                }
                            }
                            04=else if(ItemType(tdwd) == t_CustomWeapon)
                            05 ^{
                                01=if(GetCustomWeaponData(CustomWeaponType(tdwd), 'Availability') == 'NotSoldAndNodeRepair')
                                02 ^{
                                    01=if(GetNodesFromShip(ship) < 1) break;
                                    02=if(ItemDurability(tdwd) < 61)
                                    03 ^{
                                        01=if(!ItemDurability(tdwd)) Ether(2, '', Format(CT('Artefacts.ArtNano.RepairItem'), '<Name>', Name(tdwd)));
                                        02=ItemDurability(tdwd, ItemDurability(tdwd) + 2);
                                        03=GetNodesFromShip(ship, 1);
                                        04=if(Rnd(1, 100) <= 33) ItemDurability(cur_item, ItemDurability(cur_item) - 1);
                                    }
                                }
                            }
                        }
                    }
                    03=else
                    04 ^{
                        01=for(int j = 1; j<ShipItems(ship); j = j + 1)
                        02 ^{
                            01=dword tdwd2 = ShipItems(ship, j);
                            02=if(ItemType(tdwd2) >= t_Weapon13 && ItemType(tdwd2) <= t_Weapon15)
                            03 ^{
                                01=if(GetNodesFromShip(ship) < 1) break;
                                02=if(ItemDurability(tdwd2) < 61)
                                03 ^{
                                    01=if(!ItemDurability(tdwd2)) Ether(2, '', Format(CT('Artefacts.ArtNano.RepairItem'), '<Name>', Name(tdwd2)));
                                    02=ItemDurability(tdwd2, ItemDurability(tdwd2) + 2);
                                    03=GetNodesFromShip(ship, 1);
                                    04=if(Rnd(1, 100) <= 33) ItemDurability(cur_item, ItemDurability(cur_item) - 1);
                                }
                            }
                            04=else if(ItemType(tdwd2) == t_CustomWeapon)
                            05 ^{
                                01=if(GetCustomWeaponData(CustomWeaponType(tdwd2), 'Availability') == 'NotSoldAndNodeRepair')
                                02 ^{
                                    01=if(GetNodesFromShip(ship) < 1) break;
                                    02=if(ItemDurability(tdwd2) < 61)
                                    03 ^{
                                        01=if(!ItemDurability(tdwd2)) Ether(2, '', Format(CT('Artefacts.ArtNano.RepairItem'), '<Name>', Name(tdwd2)));
                                        02=ItemDurability(tdwd2, ItemDurability(tdwd2) + 2);
                                        03=GetNodesFromShip(ship, 1);
                                        04=if(Rnd(1, 100) <= 33) ItemDurability(cur_item, ItemDurability(cur_item) - 1);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        OnUseCode ^{
            01=if(EqModule(CurItem()) == -1)
            02 ^{
                01=EqModule(CurItem(), FindBonusByCustomTag('AkrinAmplifier'));
                02=EquipmentImageName(CurItem(), 'ArtNano_AddOn');
                03=Sound('Sound.Mod_Switch');
            }
            03=else
            04 ^{
                01=EqModule(CurItem(), -1);
                02=EquipmentImageName(CurItem(), '');
                03=Sound('Sound.Mod_Switch');
            }
        }
        RepairItem=Хорошая новость - нанитоиды подлатали <Name>!
        Text=Миниатюрные роботы чинят в день до <clr>10%<clrEnd> от одного из случайно выбранных предметов на корабле, целостность которых не превышает <clr>60%<clrEnd>.
        Text=<br> <br>
        Text=<color=255,0,0>Дополнительное свойство отключено:</color>
        Text=Способны чинить даже уникальные виды <clr>доминаторского<clrEnd> вооружения, но при этом будут ежедневно расходовать по <clr>1<clrEnd> ед. нодов из трюма.
    }
    ArtNano_AddOn ^{
        Text=Миниатюрные роботы чинят в день до <clr>10%<clrEnd> от одного из случайно выбранных предметов на корабле, целостность которых не превышает <clr>60%<clrEnd>.
        Text=<br> <br>
        Text=<color=0,255,0>Дополнительное свойство активно:</color>
        Text=Способны чинить даже уникальные виды <clr>доминаторского<clrEnd> вооружения, но при этом будут ежедневно расходовать по <clr>1<clrEnd> ед. нодов из трюма.
    }
	ArtPDTurret ^{
		Name=а'Эгис
		OnUseCode ^{
			01=if(!ShipInNormalSpace(Player())) MessageBox('Этот предмет может быть использован только в открытом космосе');
			02=else
			03 ^{
				01=if(!ItemDurability(CurItem()))MessageBox('а\'Эгис сломан. Активация невозможна');
				02=else
				03 ^{
					01=if(MessageBoxYesNo('Вы действительно хотите активировать а\'Эгис?'))
					02 ^{
						01=int i;
						02=dword ship;
						03=dword tdw;
						04=dword mTarget;
						05=int dur_sub;
						06=int m_count = 0;
						07=int dist_ship=5000;
						08=for(i = 0; i < StarShips(ShipStar(Player())); i = i + 1)
						09 ^{
							01=tdw = StarShips(ShipStar(Player()), i);
							02=if(Dist(Player(), tdw) <= dist_ship && RelationToRanger(tdw,Player()) < 10)
							03 ^{
								01=ship = tdw;
								02=dist_ship = Dist(Player(), tdw);
							}
						}
						10=if(!ship)
						11 ^{
							01=MessageBox('В системе не обнаружено вражеских кораблей. а\'Эгису  некуда перенаправлять ракеты');
							02=m_count=-1;
						}
						12=else
						13 ^{
							01=for(i = 0; i < StarMissiles(ShipStar(Player())); i = i + 1)
							02 ^{
								01=tdw = StarMissiles(ShipStar(Player()), i);
								02=if(!ItemDurability(CurItem())) break;
								03=if(MissileOwner(tdw) == Player()) continue;
								04=if(Dist(Player(),tdw) > 1000) continue;
								05=dur_sub = 0;
								06=int redirect = 0;
								07=if(MissileType(tdw) == t_Weapon4) dur_sub = 2;
								08=if(MissileType(tdw) == t_Weapon15) dur_sub = 3;
								09=if(MissileType(tdw) == t_Weapon18) dur_sub = 1;
								10=else dur_sub = 2;
								11=mTarget = MissileTarget(tdw);
								12=if(mTarget == Player())redirect = 1;
								13=if(ShipIsPartner(mTarget) == Player()) redirect = 1;
								14=if(ShipTypeN(mTarget) == 5)
								15 ^{
									01=if(TranclucatorData(mTarget, 0) == Player()) redirect = 1;
								}
								16=if(redirect)
								17 ^{
									01=MissileTarget(tdw, ship);
									02=MissileOwner(tdw, Player());
									03=ItemDurability(CurItem(), ItemDurability(CurItem()) - dur_sub);
									04=if(ItemDurability(CurItem()) < 0) ItemDurability(CurItem(), 0);
									04=m_count = m_count + 1;
									05=if(!ItemDurability(CurItem()) && m_count) MessageBox('а\'Эгис вышел из строя успев перенаправить ' + m_count + ' ракет');
								}
							}
						}
						14=if(!m_count) MessageBox('В зоне действия не обнаружено вражеских ракет');
						15=if(ItemDurability(CurItem()) && m_count) MessageBox('а\'Эгис перенаправил ' + m_count + ' ракет');
					}
				}
			}
		}
		Text=Стреляет по выпущенным противниками ракетам и торпедам. Может уничтожить до пяти целей за ход, в зависимости от кучности и интенсивности стрельбы. Радиус действия артефакта составляет <clr>150<clrEnd> ед.
		Text=При активации на расстоянии <clr>1000<clrEnd> ед. взламывает защиту систем наведения вражеских ракет и <clr>перенаправляет<clrEnd> их в ближайшего к игроку противника. Сам при этом получает <clr>3<clrEnd>\<clr>2<clrEnd>\<clr>1<clrEnd>% износа за каждую перенаправленную <clr>торпеду<clrEnd>\<clr>ракету<clrEnd>\<clr>ЭМ-ракету<clrEnd>.
	}
	ArtWeaponToSpeed ^{
		Name=Сопланатор
		OnActCodeTypes=t_OnAnotherItem
		OnActCode ^{
			01=dword item=ScriptItemActObject1();
			02=if(ItemType(item)!=t_Engine)exit;
			03=int i=0;
			04=str tStr='';
			05=if(ItemExtraSpecials(item))
			06 ^{
				01=i=0;
				02=int spNum=0;
				03=str spName;
				04=for(i=0;i<ItemExtraSpecials(item);i=i+1)
				05 ^{
					01=spNum=ItemExtraSpecials(item,i);
					02=spName=BonusNumInCfg(spNum);
					03=if(spName=='ExpArtsPlus_ArtWeaponToSpeedNormal3' || spName=='ExpArtsPlus_ArtWeaponToSpeedBoosted3')
					04 ^{
						01=MessageBox('Достигнуто предельное увеличение скорости.');
						02=exit;
					}
					05=if(spName=='ExpArtsPlus_ArtWeaponToSpeedNormal2' || spName=='ExpArtsPlus_ArtWeaponToSpeedBoosted2')
					06 ^{
						01=if(MessageBoxYesNo('Вы уверены, что хотите навсегда встроить сопланатор в двигатель?'+tStr))
						02 ^{
							01=ItemExtraSpecialsDeleteByType(item,spNum);
							02=if(ItemOwner(item)!=6)
							03 ^{
								01=ItemExtraSpecialsAddByType(item,FindBonusByNameInCfg('ExpArtsPlus_ArtWeaponToSpeedNormal3'),1);
								02=SetEquipmentStats(item,GetEquipmentStats(item,0)+40,0);
							}
							04=if(ItemOwner(item)==6)
							05 ^{
								01=ItemExtraSpecialsAddByType(item,FindBonusByNameInCfg('ExpArtsPlus_ArtWeaponToSpeedBoosted3'),1);
								02=SetEquipmentStats(item,GetEquipmentStats(item,0)+60,0);
							}
							06=ItemSize(item,ItemSize(item)+ItemSize(CurItem()));
							07=ItemCost(item,ItemCost(item)+ItemCost(CurItem()));
							08=ScriptItemActParam(1);
							09=Sound('Sound.Repair');
							10=exit;
						}
					}
					07=if(spName=='ExpArtsPlus_ArtWeaponToSpeedNormal1' || spName=='ExpArtsPlus_ArtWeaponToSpeedBoosted1')
					08 ^{
						01=if(MessageBoxYesNo('Вы уверены, что хотите навсегда встроить сопланатор в двигатель?'+tStr))
						02 ^{
							01=ItemExtraSpecialsDeleteByType(item,spNum);
							02=if(ItemOwner(item)!=6)
							03 ^{
								01=ItemExtraSpecialsAddByType(item,FindBonusByNameInCfg('ExpArtsPlus_ArtWeaponToSpeedNormal2'),1);
								02=SetEquipmentStats(item,GetEquipmentStats(item,0)+40,0);
							}
							04=if(ItemOwner(item)==6)
							05 ^{
								01=ItemExtraSpecialsAddByType(item,FindBonusByNameInCfg('ExpArtsPlus_ArtWeaponToSpeedBoosted2'),1);
								02=SetEquipmentStats(item,GetEquipmentStats(item,0)+60,0);
							}
							06=ItemSize(item,ItemSize(item)+ItemSize(CurItem()));
							07=ItemCost(item,ItemCost(item)+ItemCost(CurItem()));
							08=ScriptItemActParam(1);
							09=Sound('Sound.Repair');
							10=exit;
						}
					}
				}
			}
			07=if(!ItemImprovement(item))tStr=' Улучшить такой двигатель на научной базе будет невозможно.';
			08=if(MessageBoxYesNo('Вы уверены, что хотите навсегда встроить сопланатор в двигатель?'+tStr))
			09 ^{
				01=if(ItemOwner(item)!=6)
				02 ^{
					01=ItemExtraSpecialsAddByType(item,FindBonusByNameInCfg('ExpArtsPlus_ArtWeaponToSpeedNormal1'),1);
					02=SetEquipmentStats(item,GetEquipmentStats(item,0)+40,0);
				}
				03=if(ItemOwner(item)==6)
				04 ^{
					01=ItemExtraSpecialsAddByType(item,FindBonusByNameInCfg('ExpArtsPlus_ArtWeaponToSpeedBoosted1'),1);
					02=SetEquipmentStats(item,GetEquipmentStats(item,0)+60,0);
				}
				05=ItemSize(item,ItemSize(item)+ItemSize(CurItem()));
				06=ItemCost(item,ItemCost(item)+ItemCost(CurItem()));
				07=ScriptItemActParam(1);
				08=Sound('Sound.Repair');
			}
		}
		Text=На <clr>100<clrEnd> единиц увеличивает скорость двигателя за счет установки дополнительных сопел на базе одного <clr>орудийного<clrEnd> отсека.
		Text=При совмещении с двигателем навсегда повышает его скорость (Эффект усиливается на неизвестном оборудовании). 
	}
    ArtMissileDef ^{
        BrokenInUse=Плазмоуритановая составляющая слоя ракетанга высохла из-за сильной звёздной активности. Наномеханизмы парализованы, требуется ремонт.
        Description=Ракетанг - система наномеханизмов, которые покрывают поверхность корпуса тонкой управляемой плазмоуритановой плёнкой. Уникальность этих наномеханизмов заключается в том, что они точно определяют место попадания ракеты и мгновенно укрепляют броню корабля на соответствующем участке. Кроме того, наномеханизмы способны собирать ракеты самостоятельно, используя в качестве подручного материала обломки реактивных снарядов, поглощаемых ими при отражении вражеских атак.
        Name=Ракетанг
        OnActCodeTypes=t_OnStep
        OnActStepTypes=0
        OnActCode ^{
            01=if(!ScriptItemActShip()) exit;
            02=dword cur_item = CurItem();
            03=if(ScriptItemActionType(t_OnStep, 0))
            04 ^{
                01=dword ship = ScriptItemActShip();
                02=dword TnewItem = CreateCustomArt('ArtMissileDef_Modified', ItemSize(cur_item), ItemCost(cur_item), ItemOwner(cur_item));
                03=ItemDurability(TnewItem, ItemDurability(cur_item));
                04=int Tcheck = 0;
                05=if(ItemIsInUse(cur_item)) Tcheck = ItemIsInUse(cur_item, ship);
                06=if(EqModule(cur_item) == -1)
                07 ^{
                    01=CustomArtTextData(TnewItem, 1, '<color=255,0,0>Дополнительное свойство отключено:</color>');
                    02=CustomArtData(TnewItem, 1, 0);
                }
                08=else
                09 ^{
                    01=CustomArtTextData(TnewItem, 1, '<color=0,255,0>Дополнительное свойство активно:</color>');
                    02=CustomArtData(TnewItem, 1, 1);
                }
                10=FreeItem(GetArtFromShip(ship, FindItemInShip(ship, cur_item)));
                11=AddItemToShip(ship, TnewItem);
                12=if(Tcheck) ItemIsInUse(TnewItem, ship, 1, Tcheck);
            }
        }
        OnUseCode ^{
            0=if(EqModule(CurItem()) == -1)
            01 ^{
                01=EqModule(CurItem(), FindBonusByCustomTag('AkrinAmplifier'));
                02=EquipmentImageName(CurItem(), 'ArtMissileDef_AddOn');
                03=Sound('Sound.Mod_Switch');
            }
            02=else
            03 ^{
                01=EqModule(CurItem(), -1);
                02=EquipmentImageName(CurItem(), '');
                03=Sound('Sound.Mod_Switch');
            }
        }
        Text=Плазмоуритановый защитный механизм, оснащённый усиленными детекторами и встроенным сборщиком ракет. Блокирует <clr>10-40%<clrEnd> ущерба от попадания ракетного оружия, попутно поглощая обломки, из которых в дальнейшем способен собирать полноценные боевые снаряды.
        Text=<br> <br>
        Text=<color=255,0,0>Дополнительное свойство отключено:</color>
        Text=При наличии материала, ежедневно восполняет <clr>1<clrEnd> заряд в одном из экипированных ракетных орудий, начиная с самого разряженного. Для заправки двигателей произведённых боеприпасов расходует по <clr>1<clrEnd> ед. топлива из основного бака.
        Text=Доступно зарядов для сборки: <clr>0<clrEnd> шт.
    }
    ArtMissileDef_AddOn ^{
        Text=Плазмоуритановый защитный механизм, оснащённый усиленными детекторами и встроенным сборщиком ракет. Блокирует <clr>10-40%<clrEnd> ущерба от попадания ракетного оружия, попутно поглощая обломки, из которых в дальнейшем способен собирать полноценные боевые снаряды.
        Text=<br> <br>
        Text=<color=0,255,0>Дополнительное свойство активно:</color>
        Text=При наличии материала, ежедневно восполняет <clr>1<clrEnd> заряд в одном из экипированных ракетных орудий, начиная с самого разряженного. Для заправки двигателей произведённых боеприпасов расходует по <clr>1<clrEnd> ед. топлива из основного бака.
        Text=Доступно зарядов для сборки: <clr>0<clrEnd> шт.
    }
    CustomArtefacts ^{
        ArtMissileDef_Modified ^{
            Broken=(сломан)
            BrokenInBattle=Внимание! Ракетанг неудачно определил вероятность попадания, и вражеский выстрел разделил общую массу наномеханизмов на две части. Для соединения требуется помощь специалиста.
            BrokenInUse=Плазмоуритановая составляющая слоя ракетанга высохла из-за сильной звёздной активности. Наномеханизмы парализованы, требуется ремонт.
            CountsAs=ArtMissileDef
            Name=Ракетанг
            OnActCodeTypes=t_OnGettingMissileHit,t_OnStep
            OnActStepTypes=11
            OnActCode ^{
                01=if(!ScriptItemActShip()) exit;
                02=if(!ItemDurability(CurItem())) exit;
                03=dword cur_item = CurItem();
                04=if(ScriptItemActionType(t_OnStep, 11))
                05 ^{
                    01=if(CustomArtData(cur_item, 1))
                    02 ^{
                        01=if(!ShipFuel(ScriptItemActShip()))
                        02 ^{
                            01=if(!ArtefactTypeBoosted(ScriptItemActShip(), t_ArtMissileDef)) exit;
                        }
                        03=int i;
                        04=int compCheck = ArtefactTypeBoosted(ScriptItemActShip(), t_ArtMissileDef);
                        05=int rounds = 1;
                        06=if(compCheck) rounds = 2;
                        07=for(i = rounds; i > 0; i = i - 1)
                        08 ^{
                            01=if(CustomArtData(cur_item, 2))
                            02 ^{
                                01=dword ship = ScriptItemActShip();
                                02=dword gun = 0;
                                03=int missiles = 0;
                                04=for(int j = 1; j <= ShipCntWeapon(ship); j = j + 1)
                                05 ^{
                                    01=dword tdwd = ShipWeapon(ship, j);
                                    02=dword tdwd2 = MissilesToRearm(tdwd);
                                    03=if(tdwd2)
                                    04 ^{
                                        01=if(tdwd2 > missiles)
                                        02 ^{
                                            01=gun = tdwd;
                                            02=missiles = tdwd2;
                                        }
                                    }
                                }
                                06=if(gun)
                                07 ^{
                                    01=MissilesToRearm(gun, 1);
                                    02=if(!compCheck) ShipFuel(ship, ShipFuel(ship) - 1);
                                    03=CustomArtData(cur_item, 2, CustomArtData(cur_item, 2) - 1);
                                    04=if(Rnd(1, 100) <= 50) ItemDurability(cur_item, ItemDurability(cur_item) - 1);
                                }
                            }
                        }
                    }
                }
                06=if(ScriptItemActionType(t_OnGettingMissileHit))
                07 ^{
                    01=if(ItemDurability(cur_item))
                    02 ^{
                        01=if(ScriptItemActObject2())
                        02 ^{
                            01=if(CustomArtData(cur_item, 2) < 100)
                            02 ^{
                                01=int nuclearCheck = 0;
                                02=int acrinCheck = EqSpecial(ScriptItemActObject2());
                                03=if(acrinCheck > -1)
                                04 ^{
                                    01=if(BonusCustomTag(acrinCheck) == 'NukeAcryn')
                                    02 ^{
                                        01=nuclearCheck = 1;
                                        02=CustomArtData(cur_item, 2, CustomArtData(cur_item, 2) + 5);
                                        03=if(CustomArtData(cur_item, 2) > 100) CustomArtData(cur_item, 2, 100);
                                    }
                                }
                                05=if(!nuclearCheck)
                                06 ^{
                                    01=str Tmissile = CustomMissileType(ScriptItemActObject2());
                                    02=int Tshots = 1;
                                    03=if(Tmissile == 'W04' || Tmissile == 'W15' || Tmissile == 'W18')
                                    04 ^{
                                        01=Tshots = GetCustomWeaponData(t_Weapon1 - 1 + Tmissile, 'ShotCount');
                                        02=if(!Tshots) Tshots = 1;
                                        03=CustomArtData(cur_item, 3, CustomArtData(cur_item, 3) + 120 / (Tshots * 2));
                                        04=if(CustomArtData(cur_item, 3) >= 120)
                                        05 ^{
                                            01=CustomArtData(cur_item, 3, CustomArtData(cur_item, 3) - 120);
                                            02=CustomArtData(cur_item, 2, CustomArtData(cur_item, 2) + 1);
                                        }
                                    }
                                    05=else
                                    06 ^{
                                        01=Tshots = GetCustomWeaponData(Tmissile, 'ShotCount');
                                        02=if(!Tshots) Tshots = 1;
                                        03=CustomArtData(cur_item, 3, CustomArtData(cur_item, 3) + 120 / (Tshots * 2));
                                        04=if(CustomArtData(cur_item, 3) >= 120)
                                        05 ^{
                                            01=CustomArtData(cur_item, 3, CustomArtData(cur_item, 3) - 120);
                                            02=CustomArtData(cur_item, 2, CustomArtData(cur_item, 2) + 1);
                                        }
                                    }
                                }
                            }
                            03=else CustomArtData(cur_item, 3, 0);
                        }
                    }
                }
            }
            OnUseCode ^{
                0=if(!CustomArtData(CurItem(), 1))
                01 ^{
                    01=CustomArtData(CurItem(), 1, 1);
                    02=CustomArtTextData(CurItem(), 1, '<color=0,255,0>Дополнительное свойство активно:</color>');
                    03=Sound('Sound.Mod_Switch');
                }
                02=else
                03 ^{
                    01=CustomArtData(CurItem(), 1, 0);
                    02=CustomArtTextData(CurItem(), 1, '<color=255,0,0>Дополнительное свойство отключено:</color>');
                    03=Sound('Sound.Mod_Switch');
                }
            }
            SharedEffect=1
            SharedUse=1
            Text=Плазмоуритановый защитный механизм, оснащённый усиленными детекторами и встроенным сборщиком ракет. Блокирует <clr>10-40%<clrEnd> ущерба от попадания ракетного оружия, попутно поглощая обломки, из которых в дальнейшем способен собирать полноценные боевые снаряды.
            Text=<br> <br>
            Text=<TextData1>
            Text=При наличии материала, ежедневно восполняет <clr>1<clrEnd> заряд в одном из экипированных ракетных орудий, начиная с самого разряженного. Для заправки двигателей произведённых боеприпасов расходует по <clr>1<clrEnd> ед. топлива из основного бака.
            Text=Доступно зарядов для сборки: <Data2> шт.
        }
    }
}
MicroModuls ^{
	ExpArtsPlus_AddSlotWeapon ^{
		Equipments=Hull
		LockedAcryn=3
		ExText=<color=248,252,248>Улучшение:</color> <clr>Дополнительная турель<clrEnd>
		ExText=<color=248,252,248>Встроенный в корпус протон дал возможность установить дополнительную орудийную турель.</color>
		bonSlotWeapon=1
		NonSearchable=1
		Priority=0
		Special=1
	}
	ExpArtsPlus_ArtBonusHookNormal1 ^{
		Equipments=Hook
		LockedAcryn=3
		ExText=<color=248,252,248>Улучшение:</color> <clr>Сфокусированный луч I<clrEnd>
		ExText=<color=248,252,248>Интегрированный эриметр незначительно увеличивает характеристики захвата.</color>
		ExText=<clr><clrEnd>
		ExText=Мощность захвата: <clr>+15<clrEnd> ед.
		ExText=Радиус захвата: <clr>+15<clrEnd> ед.
		NonSearchable=1
		Priority=0
		Special=1
	}
	ExpArtsPlus_ArtBonusHookBoosted1 ^{
		Equipments=Hook
		LockedAcryn=3
		Name=add_hook_boosted1
		ExText=<color=248,252,248>Улучшение:</color> <clr>Сфокусированный луч I<clrEnd>
		ExText=<color=248,252,248>Интегрированный эриметр незначительно увеличивает характеристики захвата. Модификация более эффективна за счет использования в оборудовании неизвестного производства.</color>
		ExText=<clr><clrEnd>
		ExText=Мощность захвата: <clr>+25<clrEnd> ед.
		ExText=Радиус захвата: <clr>+25<clrEnd> ед.
		NonSearchable=1
		Priority=0
		Special=1
	}
	ExpArtsPlus_ArtBonusHookNormal2 ^{
		Equipments=Hook
		LockedAcryn=3
		Name=add_hook_normal2
		ExText=<color=248,252,248>Улучшение:</color> <clr>Сфокусированный луч II<clrEnd>
		ExText=<color=248,252,248>Пара интегрированных эриметров увеличивает характеристики захвата.</color>
		ExText=<clr><clrEnd>
		ExText=Мощность захвата: <clr>+30<clrEnd> ед.
		ExText=Радиус захвата: <clr>+30<clrEnd> ед.
		NonSearchable=1
		Priority=0
		Special=1
	}
	ExpArtsPlus_ArtBonusHookBoosted2 ^{
		Equipments=Hook
		LockedAcryn=3
		Name=add_hook_boosted2
		ExText=<color=248,252,248>Улучшение:</color> <clr>Сфокусированный луч II<clrEnd>
		ExText=<color=248,252,248>Пара интегрированных эриметров увеличивает характеристики захвата. Модификация более эффективна за счет использования в оборудовании неизвестного производства.</color>
		ExText=<clr><clrEnd>
		ExText=Мощность захвата: <clr>+50<clrEnd> ед.
		ExText=Радиус захвата: <clr>+50<clrEnd> ед.
		NonSearchable=1
		Priority=0
		Special=1
	}
	ExpArtsPlus_ArtBonusHookNormal3 ^{
		Equipments=Hook
		LockedAcryn=3
		Name=add_hook_normal3
		ExText=<color=248,252,248>Улучшение:</color> <clr>Сфокусированный луч III<clrEnd>
		ExText=<color=248,252,248>Несколько интегрированных эриметров резко увеличивают характеристики захвата.</color>
		ExText=<clr><clrEnd>
		ExText=Мощность захвата: <clr>+50<clrEnd> ед.
		ExText=Радиус захвата: <clr>+50<clrEnd> ед.
		ExText=Скорость притягивания: <clr>+1<clrEnd> ед.
		NonSearchable=1
		Priority=0
		Special=1
	}
	ExpArtsPlus_ArtBonusHookBoosted3 ^{
		Equipments=Hook
		LockedAcryn=3
		Name=add_hook_boosted1
		ExText=<color=248,252,248>Улучшение:</color> <clr>Сфокусированный луч III<clrEnd>
		ExText=<color=248,252,248>Несколько интегрированных эриметров резко увеличивают характеристики захвата. Модификация более эффективна за счет использования в оборудовании неизвестного производства.</color>
		ExText=<clr><clrEnd>
		ExText=Мощность захвата: <clr>+75<clrEnd> ед.
		ExText=Радиус захвата: <clr>+75<clrEnd> ед.
		ExText=Скорость притягивания: <clr>+2<clrEnd> ед.
		NonSearchable=1
		Priority=0
		Special=1
	}
	ExpArtsPlus_AddHullArmor1 ^{
		Equipments=Hull
		LockedAcryn=3
		Name=add_hull_armor1
		ExText=<color=248,252,248>Улучшение:</color> <clr>Небольшая колония жупий<clrEnd>
		ExText=<color=248,252,248>Поверхность этого корпуса облюбовала немногочисленная колония жупий. Броня корпуса незначительно увеличена.</color>
		ExText=<clr><clrEnd>
		ExText=Броня корпуса: <clr>+1<clrEnd> ед.
		NonSearchable=1
		Priority=0
		Special=1
    }
	ExpArtsPlus_AddHullArmor2 ^{
		Equipments=Hull
		LockedAcryn=3
		Name=add_hull_armor2
		ExText=<color=248,252,248>Улучшение:</color> <clr>Колония жупий<clrEnd>
		ExText=<color=248,252,248>Поверхность этого корпуса облюбовала колония жупий. Броня корпуса увеличена.</color>
		ExText=<clr><clrEnd>
		ExText=Броня корпуса: <clr>+2<clrEnd> ед.
		NonSearchable=1
		Priority=0
		Special=1
	}
	ExpArtsPlus_AddHullArmor3 ^{
		Equipments=Hull
		LockedAcryn=3
		Name=add_hull_armor3
		ExText=<color=248,252,248>Улучшение:</color> <clr>Большая колония жупий<clrEnd>
		ExText=<color=248,252,248>Поверхность этого корпуса облюбовала крупная колония жупий. Броня корпуса значительно увеличена.</color>
		ExText=<clr><clrEnd>
		ExText=Броня корпуса: <clr>+3<clrEnd> ед.
		NonSearchable=1
		Priority=0
		Special=1
	}
	ExpArtsPlus_ArtWeaponToSpeedNormal1 ^{
		Equipments=Engine
		LockedAcryn=3
		Name=add_speed_normal1
		ExText=<color=248,252,248>Улучшение:</color> <clr>Дополнительные ускорители I<clrEnd>
		ExText=<color=248,252,248>Интегрированный сопланатор увеличивает скорость двигателя.</color>
		ExText=<clr><clrEnd>
		ExText=Скорость двигателя: <clr>+40<clrEnd> ед.
		NonSearchable=1
		Priority=0
		Special=1
	}
	ExpArtsPlus_ArtWeaponToSpeedBoosted1 ^{
		Equipments=Engine
		LockedAcryn=3
		Name=add_speed_boosted1
		ExText=<color=248,252,248>Улучшение:</color> <clr>Дополнительные ускорители I<clrEnd>
		ExText=<color=248,252,248>Интегрированный сопланатор увеличивает скорость двигателя. Модификация более эффективна за счет использования в оборудовании неизвестного производства.</color>
		ExText=<clr><clrEnd>
		ExText=Скорость двигателя: <clr>+60<clrEnd> ед.
		NonSearchable=1
		Priority=0
		Special=1
	}
	ExpArtsPlus_ArtWeaponToSpeedNormal2 ^{
		Equipments=Engine
		LockedAcryn=3
		Name=add_speed_normal2
		ExText=<color=248,252,248>Улучшение:</color> <clr>Дополнительные ускорители II<clrEnd>
		ExText=<color=248,252,248>Несколько интегрированных сопланаторов увеличивает скорость двигателя. увеличивает скорость двигателя.</color>
		ExText=<clr><clrEnd>
		ExText=Скорость двигателя: <clr>+80<clrEnd> ед.
		NonSearchable=1
		Priority=0
		Special=1
	}
	ExpArtsPlus_ArtWeaponToSpeedBoosted2 ^{
		Equipments=Engine
		LockedAcryn=3
		Name=add_speed_boosted2
		ExText=<color=248,252,248>Улучшение:</color> <clr>Дополнительные ускорители II<clrEnd>
		ExText=<color=248,252,248>Несколько интегрированных сопланаторов увеличивает скорость двигателя. Модификация более эффективна за счет использования в оборудовании неизвестного производства.</color>
		ExText=<clr><clrEnd>
		ExText=Скорость двигателя: <clr>+120<clrEnd> ед.
		NonSearchable=1
		Priority=0
		Special=1
	}
	ExpArtsPlus_ArtWeaponToSpeedNormal3 ^{
		Equipments=Engine
		LockedAcryn=3
		Name=add_speed_normal3
		ExText=<color=248,252,248>Улучшение:</color> <clr>Дополнительные ускорители III<clrEnd>
		ExText=<color=248,252,248>Ряд интегрированных сопланаторов увеличивают скорость двигателя.</color>
		ExText=<clr><clrEnd>
		ExText=Скорость двигателя: <clr>+120<clrEnd> ед.
		NonSearchable=1
		Priority=0
		Special=1
	}
	ExpArtsPlus_ArtWeaponToSpeedBoosted3 ^{
		Equipments=Engine
		LockedAcryn=3
		Name=add_speed_boosted3
		ExText=<color=248,252,248>Улучшение:</color> <clr>Дополнительные ускорители III<clrEnd>
		ExText=<color=248,252,248>Ряд интегрированных сопланаторов увеличивают скорость двигателя. Модификация более эффективна за счет использования в оборудовании неизвестного производства.</color>
		ExText=<clr><clrEnd>
		ExText=Скорость двигателя: <clr>+180<clrEnd> ед.
		NonSearchable=1
		Priority=0
		Special=1
	}
}
ShipInfo ^{
    AddInfo ^{
        CustomInfos ^{
            ArtEnergyDef_infos ^{
                Description=
                Icon=0
                Name=
                OnActCodeTypes=t_OnStep,t_OnTakingDamage,t_OnTakingDamageEn,t_OnTakingDamageSp,t_OnTakingDamageMi
                OnActStepTypes=11
                OnActCode ^{
                    01=if(ScriptItemActionType(t_OnStep, 11)) ShipDeleteCustomShipInfo(ScriptItemActShip(), 'ArtEnergyDef_infos');
                    02=else ScriptItemActParam(0);
                }
            }
        }
    }
}