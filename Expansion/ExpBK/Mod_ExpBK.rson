{
  "FileID":  573785173,
  "FileVersion":  8,
  "ViewPos.x":  -438,
  "ViewPos.y":  -31,
  "ScriptName":  "Mod_ExpBK",
  "ScriptFileOut":  "H:\\Mod_ExpBK.scr",
  "ScriptTextOut":  "H:\\Mod_ExpBK.txt",
  "GraphPoint.Count":  204,
  "GraphLink.Count":  151,
  "GraphRectText.Count":  5,
  "Variables.Count":  52,
  "Stars.Count":  1,
  "Planets.Count":  1,
  "Ships.Count":  1,
  "States.Count":  1,
  "Groups.Count":  1,
  "Places.Count":  0,
  "Items.Count":  0,
  "Ethers.Count":  0,
  "Dialogs.Count":  12,
  "DialogMessages.Count":  25,
  "DialogAnswers.Count":  33,
  "Operations.Count":  36,
  "Statements.Count":  41,
  "Loops.Count":  0,
  "Visual.Objects":  
  [
    {
      "DialogAnswers":      
      [
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  470,
          "Pos.y":  60,
          "Parent":  -1,
          "#":  10,
          "Msg":  "ДА!",
          "AMsg.Num":  "0"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "exit",
          "Pos.x":  560,
          "Pos.y":  80,
          "Parent":  -1,
          "#":  13,
          "Msg":  "",
          "AMsg.Num":  "1"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  340,
          "Pos.y":  190,
          "Parent":  -1,
          "#":  15,
          "Msg":  "Отказываюсь",
          "AMsg.Num":  "2"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  240,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  17,
          "Msg":  "Уговорили",
          "AMsg.Num":  "3"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "exit",
          "Pos.x":  270,
          "Pos.y":  130,
          "Parent":  -1,
          "#":  20,
          "Msg":  "",
          "AMsg.Num":  "4"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  40,
          "Parent":  90,
          "#":  31,
          "Msg":  "Снять",
          "AMsg.Num":  "5"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  40,
          "Parent":  30,
          "#":  32,
          "Msg":  "Пополнить",
          "AMsg.Num":  "6"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "restart",
          "Pos.x":  0,
          "Pos.y":  40,
          "Parent":  162,
          "#":  35,
          "Msg":  "Назад",
          "AMsg.Num":  "7"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  53,
          "#":  54,
          "Msg":  "Подтвердить",
          "AMsg.Num":  "8"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  183,
          "#":  57,
          "Msg":  "Выбрать другой тип товара",
          "AMsg.Num":  "9"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "block",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  59,
          "#":  60,
          "Msg":  "<tstr3>",
          "AMsg.Num":  "10"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  58,
          "#":  61,
          "Msg":  "<tstr2>",
          "AMsg.Num":  "11"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  240,
          "Pos.y":  60,
          "Parent":  -1,
          "#":  83,
          "Msg":  "И что даёт торговая лицензия?",
          "AMsg.Num":  "12"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "restart",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  171,
          "#":  84,
          "Msg":  "<tstr6>",
          "AMsg.Num":  "13"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "block",
          "Pos.x":  0,
          "Pos.y":  40,
          "Parent":  88,
          "#":  89,
          "Msg":  "Пополнить",
          "AMsg.Num":  "14"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "block",
          "Pos.x":  0,
          "Pos.y":  40,
          "Parent":  91,
          "#":  92,
          "Msg":  "Снять",
          "AMsg.Num":  "15"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  96,
          "#":  97,
          "Msg":  "Погасить кредит",
          "AMsg.Num":  "16"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "block",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  100,
          "#":  98,
          "Msg":  "Погасить кредит",
          "AMsg.Num":  "17"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "restart",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  160,
          "#":  102,
          "Msg":  "Назад",
          "AMsg.Num":  "18"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  540,
          "Pos.y":  100,
          "Parent":  -1,
          "#":  108,
          "Msg":  "Извините, но у меня, кажется, не хватает кредитов",
          "AMsg.Num":  "19"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "block",
          "Pos.x":  240,
          "Pos.y":  210,
          "Parent":  -1,
          "#":  111,
          "Msg":  "Уговорили",
          "AMsg.Num":  "20"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  310,
          "Pos.y":  80,
          "Parent":  -1,
          "#":  116,
          "Msg":  "Не интересует",
          "AMsg.Num":  "21"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "block",
          "Pos.x":  470,
          "Pos.y":  190,
          "Parent":  -1,
          "#":  121,
          "Msg":  "Приобрести вновь",
          "AMsg.Num":  "22"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  470,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  122,
          "Msg":  "Приобрести вновь",
          "AMsg.Num":  "23"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  420,
          "Pos.y":  190,
          "Parent":  -1,
          "#":  125,
          "Msg":  "Как-нибудь в другой раз",
          "AMsg.Num":  "24"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "exit",
          "Pos.x":  520,
          "Pos.y":  210,
          "Parent":  -1,
          "#":  128,
          "Msg":  "",
          "AMsg.Num":  "25"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "exit",
          "Pos.x":  370,
          "Pos.y":  210,
          "Parent":  -1,
          "#":  130,
          "Msg":  "",
          "AMsg.Num":  "26"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  -20,
          "Pos.y":  0,
          "Parent":  46,
          "#":  131,
          "Msg":  "<tstr1>",
          "AMsg.Num":  "27"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  470,
          "Pos.y":  80,
          "Parent":  -1,
          "#":  135,
          "Msg":  "В секту \"Святого дуралея\" я вступать не собираюсь, но лицензию всё же возьму",
          "AMsg.Num":  "28"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "exit",
          "Pos.x":  540,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  138,
          "Msg":  "",
          "AMsg.Num":  "29"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "restart",
          "Pos.x":  250,
          "Pos.y":  620,
          "Parent":  -1,
          "#":  147,
          "Msg":  "Назад",
          "AMsg.Num":  "30"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  178,
          "#":  180,
          "Msg":  "<tstr4>",
          "AMsg.Num":  "31"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "block",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  179,
          "#":  181,
          "Msg":  "<tstr5>",
          "AMsg.Num":  "32"        
        }      
      ],
      "DialogMessages":      
      [
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  400,
          "Pos.y":  60,
          "Parent":  -1,
          "#":  8,
          "Msg":  "Торговая лицензия упрощает передачу данных по совершённым вами сделкам в центры рейнджеров. При этом, повышение в рейтинге происходит более точно, в зависимости от вашего торгового опыта.\r\nВсего за <temp_int_2> cr, сроком на пять лет.",
          "DMsg.Num":  "0"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  560,
          "Pos.y":  60,
          "Parent":  -1,
          "#":  12,
          "Msg":  "Отлично! Вы настоящий бизнесмен! Заполните вот эти бланки в трёх экземплярах.\r\nИ не забудьте продлить лицензию, за месяц до окончания срока.",
          "DMsg.Num":  "1"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  320,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  14,
          "Msg":  "Цена продления составляет <temp_int_2> cr. Продлеваем ещё на 5 лет?",
          "DMsg.Num":  "2"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  240,
          "Pos.y":  130,
          "Parent":  -1,
          "#":  19,
          "Msg":  "Отлично! И не забудьте продлить лицензию, за месяц до окончания срока.",
          "DMsg.Num":  "3"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  93,
          "#":  29,
          "Msg":  "Состояние счёта: <temp_int_5> cr.\r\nГодовой процент: <temp_str_4>\r\n\r\nВы можете пополнять или снимать средства с вашего счёта со стандартной комиссией в <clr>5%<clrEnd>.\r\n\r\nБаланс счёта не может составлять менее <clr>1000<clrEnd> cr. Минимальная сумма пополнения или снятия средств со счёта составляет <clr>100<clrEnd> cr.\r\n<temp_str_3><temp_str_5>",
          "DMsg.Num":  "4"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  39,
          "#":  40,
          "Msg":  "<tstr1>",
          "DMsg.Num":  "5"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  42,
          "#":  43,
          "Msg":  "<tstr2>",
          "DMsg.Num":  "6"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  186,
          "#":  45,
          "Msg":  "<tstr1>",
          "DMsg.Num":  "7"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  76,
          "#":  48,
          "Msg":  "<tstr1>",
          "DMsg.Num":  "8"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  75,
          "#":  52,
          "Msg":  "<tstr2>",
          "DMsg.Num":  "9"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  55,
          "#":  56,
          "Msg":  "<tstr1>",
          "DMsg.Num":  "10"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  240,
          "Pos.y":  100,
          "Parent":  -1,
          "#":  82,
          "Msg":  "Если вы желаете более эффективно торговать, то мы предлагаем приобрести торговую лицензию.",
          "DMsg.Num":  "11"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  112,
          "#":  86,
          "Msg":  "<tstr1>",
          "DMsg.Num":  "12"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  156,
          "#":  95,
          "Msg":  "Ваша задолженность: <PlayerDebt()> cr.\r\nДата погашения: <GameDateTxtByTurn(PlayerDebtDate())> <clr>г.<clrEnd>\r\nОсталось дней: <PlayerDebtDate()-CurTurn()>\r\nКоличество просрочек: <PlayerDebtCnt()>\r\n\r\nЗдесь вы можете погасить кредитную задолженность на любую оставшуюся сумму с комиссией всего в <clr>5%<clrEnd>.\r\n\r\nМинимальная сумма погашения составляет <clr>100<clrEnd> cr.",
          "DMsg.Num":  "13"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  420,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  120,
          "Msg":  "Решили вновь приобрести у нас торговую лицензию? На этот раз её цена составит полновесные <temp_int_2> cr.",
          "DMsg.Num":  "14"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  520,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  126,
          "Msg":  "Отлично! Я знал, что вы ещё вернётесь к нам за лицензией. Все возвращаются.",
          "DMsg.Num":  "15"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  370,
          "Pos.y":  190,
          "Parent":  -1,
          "#":  129,
          "Msg":  "Вам же хуже.",
          "DMsg.Num":  "16"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  540,
          "Pos.y":  80,
          "Parent":  -1,
          "#":  136,
          "Msg":  "Ну что вы, право, будьте ж людьми.",
          "DMsg.Num":  "17"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  540,
          "Pos.y":  150,
          "Parent":  -1,
          "#":  137,
          "Msg":  "Ну как же так можно то, стыдно!",
          "DMsg.Num":  "18"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  560,
          "Pos.y":  150,
          "Parent":  -1,
          "#":  142,
          "Msg":  "Ну как же так можно то, стыдно вдвойне!",
          "DMsg.Num":  "19"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  420,
          "Pos.y":  210,
          "Parent":  -1,
          "#":  143,
          "Msg":  "А я-то думал, что как бывший лицензированный торговец вы должны прекрасно понимать все преимущества этого документа. Видимо, я в вас ошибся...\r\nЧто ж, желаю и дальше оставаться бывшим, рейнджер <Player>.",
          "DMsg.Num":  "20"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  340,
          "Pos.y":  210,
          "Parent":  -1,
          "#":  144,
          "Msg":  "Крайне неразумно с вашей стороны. Срок действия лицензии закончится, и вы всё равно вернётесь к нам за переоформлением, только в тот раз это будет стоить дороже.\r\nПриятной вам потери денег, рейнджер <Player>.",
          "DMsg.Num":  "21"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  250,
          "Pos.y":  580,
          "Parent":  -1,
          "#":  148,
          "Msg":  "Наша сеть старается поддерживать своих клиентов в курсе всех крупных событий делового мира, поэтому мы с радостью предоставим вам удобный гаджет для отслеживания свежих торговых новостей.",
          "DMsg.Num":  "22"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  570,
          "Pos.y":  240,
          "Parent":  -1,
          "#":  167,
          "Msg":  "",
          "DMsg.Num":  "23"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  197,
          "#":  198,
          "Msg":  "<tstr1>",
          "DMsg.Num":  "24"        
        }      
      ],
      "Dialogs":      
      [
        {
          "Type":  "TDialog",
          "Name":  "ChooseStoreDialog",
          "Pos.x":  -30,
          "Pos.y":  160,
          "Parent":  85,
          "#":  44        
        },
        {
          "Type":  "TDialog",
          "Name":  "BuyGoodsDialog",
          "Pos.x":  -60,
          "Pos.y":  30,
          "Parent":  182,
          "#":  50        
        },
        {
          "Type":  "TDialog",
          "Name":  "PurchaseTerminalDialog",
          "Pos.x":  -110,
          "Pos.y":  190,
          "Parent":  -1,
          "#":  85        
        },
        {
          "Type":  "TDialog",
          "Name":  "TradeNews_ON",
          "Pos.x":  250,
          "Pos.y":  550,
          "Parent":  -1,
          "#":  103        
        },
        {
          "Type":  "TDialog",
          "Name":  "TradeNews_OFF",
          "Pos.x":  250,
          "Pos.y":  520,
          "Parent":  -1,
          "#":  105        
        },
        {
          "Type":  "TDialog",
          "Name":  "TradeLicense",
          "Pos.x":  440,
          "Pos.y":  150,
          "Parent":  -1,
          "#":  106        
        },
        {
          "Type":  "TDialog",
          "Name":  "TradeNewsBK",
          "Pos.x":  250,
          "Pos.y":  490,
          "Parent":  -1,
          "#":  107        
        },
        {
          "Type":  "TDialog",
          "Name":  "Deposit",
          "Pos.x":  420,
          "Pos.y":  350,
          "Parent":  -1,
          "#":  155        
        },
        {
          "Type":  "TDialog",
          "Name":  "Loan",
          "Pos.x":  420,
          "Pos.y":  240,
          "Parent":  -1,
          "#":  156        
        },
        {
          "Type":  "TDialog",
          "Name":  "ChooseGoodsDialog",
          "Pos.x":  160,
          "Pos.y":  40,
          "Parent":  85,
          "#":  182        
        },
        {
          "Type":  "TDialog",
          "Name":  "OpenEquipShopDialog",
          "Pos.x":  -190,
          "Pos.y":  40,
          "Parent":  85,
          "#":  187        
        },
        {
          "Type":  "TDialog",
          "Name":  "CloseEquipShopDialog",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  188,
          "#":  196        
        }      
      ],
      "Groups":      
      [
        {
          "Type":  "TGroup",
          "Name":  "PlayerGroup",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  2,
          "#":  3,
          "Owner":  62,
          "Group.Type":  126,
          "CntShipMin":  1,
          "CntShipMax":  1,
          "SpeedMin":  100,
          "SpeedMax":  10000,
          "Weapon":  0,
          "CargoHook":  0,
          "EmptySpace":  0,
          "AddPlayer":  true,
          "StatusTraderMin":  0,
          "StatusTraderMax":  100,
          "StatusWarriorMin":  0,
          "StatusWarriorMax":  100,
          "StatusPirateMin":  0,
          "StatusPirateMax":  100,
          "DistSearch":  10000,
          "Dialog":  -1,
          "StrengthMin":  "0",
          "StrengthMax":  "0",
          "Ruins":  ""        
        }      
      ],
      "Operations":      
      [
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  620,
          "Pos.y":  260,
          "Parent":  -1,
          "#":  5,
          "Total.Lines":  1,
          "Code.Type":  "Global",
          "Code":          
          [
              "GRun();"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  87,
          "#":  6,
          "Total.Lines":  124,
          "Code.Type":  "Turn",
          "Code":          
          [
              "//Значения переменной BKexist",
              "//BKexist == 0 - в галактике не осталось БЦ",
              "//BKexist == 1 - в галактике есть БЦ",
              "//BKexist == 2 - ---",
              "//BKexist == 3 - в галактике есть БЦ, а игрок допустил уже две просрочки по текущему кредиту",
              "",
              "//Проверяем галасобытия и ищем среди них уничтожения и постройки БЦ",
              "for(i = GalaxyEvents() - 1; i >= 0; i = i - 1)",
              "{",
              "    if(GalaxyEventDate(i) < CurTurn()) break;",
              "    if(GalaxyEventType(i) == 'RuinsCreated')",
              "    {",
              "        if(GalaxyEventData(i, 0) == t_BK)",
              "        {",
              "            if(GalaxyEventsTextData(i, 1) == '')",
              "            {",
              "                //Проверяем появление нового БЦ в Галактике",
              "                temp_dword = GalaxyStar(GalaxyEventData(i, 2) - 1);",
              "                if(StarRuins(temp_dword, 'BK'))",
              "                {",
              "                    //Если ранее все БЦ были уничтожены, то обновляем маркер",
              "                    if(!BKexist) BKexist = 1;",
              "                    TotalBKCount = TotalBKCount + 1;",
              "                }",
              "            }",
              "        }",
              "    }",
              "    else if(GalaxyEventType(i) == 'RuinsDestroyed')",
              "    {",
              "        if(GalaxyEventData(i, 0) ==  t_BK)",
              "        {",
              "            if(GalaxyEventsTextData(i, 1) == '')",
              "            {",
              "                TotalBKCount = TotalBKCount - 1;",
              "                if(!TotalBKCount)",
              "                {",
              "                    BKexist = 0;",
              "                    //Удаляем торговую лицензию игрока, если она у него была",
              "                    if(~ShipFindCustomShipInfoByType(Player(), 'Trade_license'))",
              "                    {",
              "                        ShipSpecialBonuses(Player(), bonSkill4, ShipSpecialBonuses(Player(), bonSkill4) - 1);",
              "                        ShipDeleteCustomShipInfo(Player(), 'Trade_license');",
              "                        NewsAdd(\"Все бизнес-центры уничтожены. Ваша <color=255,240,100>торговая лицензия</color> более недействительна.\");",
              "                    }",
              "                }",
              "            }",
              "        }",
              "    }",
              "}",
              "",
              "//Вывод торговых новостей в уведомление",
              "if(IsExpPilotBridgeOn)",
              "{",
              "    if(BKexist == 1)",
              "    {",
              "        if(news_ok)",
              "        {",
              "            //Если игрок удалил уведомление из трея, то все новости, которые уже были в нём отображены, повторно выводиться не будут",
              "            if(EtherState('ExpBK_TradeNewsEther') == -1) last_trade_news_upd = CurTurn();",
              "        ",
              "            temp_str = \"<color=255,240,100>Свежие экономические новости:</color>\" + \"<br>\" + ' ' + \"<br>\";",
              "            temp_int = 0;",
              "            cnt = PlanetNews() - 7;",
              "            for(i = PlanetNews() - 1; i > cnt; i = i - 1)",
              "            {",
              "                if(PlanetNewsDate(i) < last_trade_news_upd) continue;",
              "                if(PlanetNewsType(i) < 6 || PlanetNewsType(i) > 17) continue;",
              "",
              "                temp_int = temp_int + 1;",
              "                temp_str = temp_str + '<clr>' + GameDateTxtByTurn(PlanetNewsDate(i)) + '<clrEnd>' + \"<br>\" + '<clrEnd>' + PlanetNewsText(i) + '<clr>' + \"<br>\" + ' ' + \"<br>\";",
              "            }",
              "",
              "            if(temp_int) CustomEther('News', 7, 'ExpBK_TradeNewsEther', temp_str);",
              "        }",
              "    }",
              "}",
              "else if(CurrentMods('Expansion\\ExpPilotBridge')) IsExpPilotBridgeOn = 1;",
              "",
              "//Вывод новости о необходимости продления лицензии",
              "if(~ShipFindCustomShipInfoByType(Player(), 'Trade_license'))",
              "{",
              "    temp_int = ShipCustomShipInfoData(Player(), 'Trade_license', 1);",
              "    //За три месяца",
              "    if((temp_int - CurTurn()) == 90) NewsAdd(\"Сообщение из бизнес-центра.<br>Уважаемый <Player>! Срок действия вашей <color=255,240,100>торговой лицензии</color> истекает ровно через три месяца. Если вы не хотите потерять все связанные с ней торговые преимущества, рекомендуем как можно скорее посетить один из наших центров для своевременного <color=255,240,100>продления</color>.<br>Кстати, продление обойдётся вам дешевле оформления новой лицензии, ведь мы искренне заботимся о финансовом благополучии своих клиентов.<br>С уважением, Администрация.\");",
              "    //За месяц",
              "    //else if((temp_int - CurTurn()) == 30) NewsAdd(\"Сообщение из бизнес-центра.<br>Уважаемый <Player>! Срок действия вашей <color=255,240,100>торговой лицензии</color> истекает ровно через месяц. Если вы не хотите потерять все связанные с ней торговые преимущества, рекомендуем как можно скорее посетить один из наших центров для своевременного продления.<br>Кстати, продление обойдётся вам дешевле оформления новой лицензии, ведь мы искренне заботимся о финансовом благополучии своих клиентов.<br>С уважением, Администрация.\");",
              "}",
              "",
              "//Взведение таймера потери лицензии при наборе свыше 2-х просрочек по кредиту",
              "if(BKexist != 3)",
              "{",
              "    if(PlayerDebtCnt() > 2)",
              "    {",
              "        BKexist = 3;",
              "        if(~ShipFindCustomShipInfoByType(Player(), 'Trade_license')) TrLCount = -8;",
              "    }",
              "}",
              "//Обнуление таймера потери лицензии при погашении кредита",
              "else",
              "{",
              "    if(!PlayerDebtCnt())",
              "    {",
              "        BKexist = 2;",
              "        TrLCount = 1;",
              "    }",
              "}",
              "",
              "//Таймер потери лицензии при наборе свыше 2-х просрочек по кредиту",
              "if(BKexist == 3 && TrLCount < 0)",
              "{",
              "    TrLCount = TrLCount + 1;",
              "    temp_int = ShipFindCustomShipInfoByType(Player(), 'Trade_license');",
              "    if(!TrLCount && ~temp_int)",
              "    {",
              "        ShipSpecialBonuses(Player(), bonSkill4, ShipSpecialBonuses(Player(), bonSkill4) - 1);",
              "        ShipDeleteCustomShipInfo(Player(), 'Trade_license');",
              "        NewsAdd(\"Ваша <color=255,240,100>торговая лицензия</color> была аннулирована за злостную просрочку по кредиту.\");",
              "        TrLCount = 1;",
              "    }",
              "    if(TrLCount != 1 && temp_int == -1)",
              "    {",
              "        TrLCount = 1;",
              "    }",
              "}"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  20,
          "Pos.y":  0,
          "Parent":  28,
          "#":  7,
          "Total.Lines":  106,
          "Code.Type":  "DialogBegin",
          "Code":          
          [
              "cur_ruin = GetShipRuins(Player());",
              "if(cur_ruin)",
              "{",
              "    if(int(is_equip_purchase) == -1) AddDialogOverride('CloseEquipShopDialog', 1000);",
              "",
              "    temp_str = ShipType(cur_ruin);",
              "    if(temp_str == 'BK')",
              "    {",
              "        //temp_int_3  == -1 - у игрока есть действующая, ещё не истекающая торговая лицензия",
              "        //temp_int_3  ==  1 - торговая лицензия истечёт через три месяца",
              "        //temp_int_3  ==  0 - у игрока нет торговой лицензии",
              "        temp_int_3 = -1;",
              "        //Проверка на истечение лицензии",
              "        temp_int = ShipFindCustomShipInfoByType(Player(), 'Trade_license');",
              "        if(~temp_int)",
              "        {",
              "            temp_int = ShipCustomShipInfoData(Player(), temp_int, 1);",
              "            if(temp_int - CurTurn() <= 89) temp_int_3 = 1;",
              "        }",
              "        //Проверка на наличие действующей лицензии",
              "        else temp_int_3 = 0;",
              "",
              "        //Подключение диалогов на БЦ в зависимости от соблюдения различных условий",
              "        if(!temp_int_3 && ShipStatus(Player(), 0) >= 30 && !LTradeLicenseCheck && BKexist != 3)",
              "        {",
              "            AddDialogInject('TradeLicense', \"Также, исходя из вашей репутации опытного торговца, мы хотели бы предложить вам приобрести нашу специальную торговую лицензию, которая не только укрепит ваш статус в деловой среде, но и откроет ряд новых полезных возможностей.\", \"А что это за торговая лицензия?\", 0);",
              "        }",
              "",
              "        if(!temp_int_3 && ShipStatus(Player(), 0) >= 30 && LTradeLicenseCheck == 1 && BKexist != 3)",
              "        {",
              "            AddDialogInject('TradeLicense', \"Также мы хотели бы напомнить вам, что вы можете вновь приобрести нашу торговую лицензию, которая ощутимо облегчит вашу деловую жизнь.\", \"Приобрести торговую лицензию\", 0);",
              "        }",
              "",
              "        if(temp_int_3 == 1 && BKexist != 3)",
              "        {",
              "            temp_str = \"</color>всего через <clr><temp_int - CurTurn() + 2><clrEnd> дн.\";",
              "            if((temp_int - CurTurn() + 2) == 1) temp_str = \"</color>уже <clr>завтра<clrEnd>.\";",
              "            AddDialogInject('TradeLicense', \"Также мы хотели бы обратить ваше внимание на то, что ваша торговая лицензия истекает <temp_str> Настоятельно рекомендуем её продлить, тем более, что продление обойдётся вам значительно дешевле покупки новой лицензии.\", \"Продлить торговую лицензию\", 0);",
              "        }",
              "",
              "        //Если у игрока есть торговая лицензия",
              "        if(~ShipFindCustomShipInfoByType(Player(), 'Trade_license'))",
              "        {",
              "            AddDialogInject('PurchaseTerminalDialog', '', \"Терминал для удалённых закупок\", 0);",
              "        }",
              "",
              "        //Если мод ExpPilotBridge отключён (иначе вывод новостей можно будет включить на мостике)",
              "        //if(!CurrentMods('Expansion\\ExpPilotBridge'))",
              "        //{",
              "        //    AddDialogInject('TradeNewsBK', '', \"Торговые новости\", 0);",
              "        //}",
              "    }",
              "    else if(PlayerBridge())",
              "    {",
              "        if(BKexist)",
              "        {",
              "            if(CurrentMods('Expansion\\ExpPilotBridge'))",
              "            {",
              "                if(PlayerBridge() == 14)",
              "                {",
              "                    AddDialogInject('', \"Здесь вы можете получить доступ к вашему депозитному счёту, погасить кредитную задолженность или, при наличии действующей торговой лицензии, воспользоваться онлайн-терминалом для удалённой закупки товаров.\", 'BlockThisAnswer', 100);",
              "                    AddDialogBlock('BlockThisAnswer', 2);",
              "",
              "                    AddDialogInject('Deposit', '', \"Мой депозитный счёт\", 15);",
              "",
              "                    if(!PlayerDeposit()) AddDialogBlock(\"Мой депозитный счёт\", 1);",
              "                    AddDialogInject('Loan', '', \"Мой кредитный долг\", 10);",
              "",
              "                    if(!PlayerDebt()) AddDialogBlock(\"Мой кредитный долг\", 1);",
              "                    AddDialogInject('PurchaseTerminalDialog', '', \"Терминал для удалённых закупок\", 5);",
              "",
              "                    //Если у игрока нет торговой лицензии",
              "                    if(ShipFindCustomShipInfoByType(Player(),'Trade_license') == -1) AddDialogBlock(\"Терминал для удалённых закупок\", 1);",
              "",
              "                    //Запоминание номера мостика с Галанетом для возможности автоматического возврата на него в случае закрытия всех доп. диалогов БЦ",
              "                    LBridgeCheck = 14;",
              "                }",
              "            }",
              "            //Просто нахуй эту всю ебатню",
              "            /*",
              "            else",
              "            {",
              "                if(PlayerBridge() == 1 || PlayerBridge() == 2)",
              "                {",
              "                    AddDialogInject('Deposit', '', \"Мой депозитный счёт\", 0);",
              "",
              "                    if(!PlayerDeposit()) AddDialogBlock(\"Мой депозитный счёт\", 1);",
              "                    AddDialogInject('Loan', '', \"Мой кредитный долг\", 0);",
              "",
              "                    if(!PlayerDebt()) AddDialogBlock(\"Мой кредитный долг\", 1);",
              "                    AddDialogInject('PurchaseTerminalDialog', '', \"Терминал для удалённых закупок\", 0);",
              "",
              "                    //Если у игрока нет торговой лицензии",
              "                    if(ShipFindCustomShipInfoByType(Player(), 'Trade_license') == -1) AddDialogBlock(\"Терминал для удалённых закупок\", 1);",
              "",
              "                    //Запоминание номер мостика для возможности автоматического возврата на него в случае закрытия всех доп. диалогов БЦ",
              "                    if(PlayerBridge() == 1) LBridgeCheck = 1;",
              "                    else LBridgeCheck = 2;",
              "                }",
              "            }",
              "            */",
              "        }",
              "",
              "        DefSplt = '';",
              "    }",
              "}"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  500,
          "Pos.y":  60,
          "Parent":  -1,
          "#":  11,
          "Total.Lines":  7,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipAddCustomShipInfo(Player(), 'Trade_license', \"Увеличивает торговый опыт в зависимости от торгового рейтинга. Действительна до <GameDateTxtByTurn(CurTurn() + 365 * 5)>.\", CurTurn() + 365 * 5, -1, 0);",
              "ShipSpecialBonuses(Player(), bonSkill4, ShipSpecialBonuses(Player(), bonSkill4) + 1);",
              "//Списываем на 15% больше, если игрок попался в лохоловку",
              "if(ShipMoney(Player()) >= (temp_int_2 + ((temp_int_2 * 15) / 100))) ShipMoney(Player(), ShipMoney(Player()) - (temp_int_2 + ((temp_int_2 * 15) / 100)));",
              "else ShipMoney(Player(), ShipMoney(Player()) - ShipMoney(Player()));",
              "LTradeLicenseCheck = 1;",
              "Sound('Sound.Sell');"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  240,
          "Pos.y":  150,
          "Parent":  -1,
          "#":  18,
          "Total.Lines":  6,
          "Code.Type":  "Turn",
          "Code":          
          [
              "temp_int = ShipFindCustomShipInfoByType(Player(), 'Trade_license');",
              "ShipCustomShipInfoData(Player(), temp_int, 1, ShipCustomShipInfoData(Player(), temp_int, 1) + 365 * 5);",
              "temp_int_1 = ShipCustomShipInfoData(Player(), temp_int, 1);",
              "ShipCustomShipInfoDescription(Player(), temp_int, \"Увеличивает торговый опыт в зависимости от торгового рейтинга. Действительна до <GameDateTxtByTurn(temp_int_1)>.\");",
              "ShipMoney(Player(), ShipMoney(Player()) - temp_int_2);",
              "Sound('Sound.Sell');"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  20,
          "Pos.y":  0,
          "Parent":  5,
          "#":  28,
          "Total.Lines":  300,
          "Code.Type":  "Init",
          "Code":          
          [
              "if(CurrentMods('Expansion\\ExpPilotBridge')) IsExpPilotBridgeOn = 1;",
              "",
              "for(i = 1; i < 9; i = i + 1) type_name[i] = CT('Items.Goods.Name.' + i);",
              "news_ok = 0;",
              "",
              "//Стартовый перебор числа БЦ в Галактике",
              "for(i = 0; i < GalaxyStars(); i = i + 1)",
              "{",
              "    temp_dword = GalaxyStar(i);",
              "    if(!StarRuins(temp_dword, 'BK')) continue;",
              "    TotalBKCount = TotalBKCount + 1;",
              "}",
              "if(TotalBKCount) BKexist = 1;",
              "",
              "//Функция расчёта накопленных процентов для текущего состояния депозитного счёта",
              "function DepositPercentCalc()",
              "{",
              "    float tflt = 0.0;",
              "    tflt = 1.0 + 0.0001 * PlayerDepositPercent() / 12; //Считаем X",
              "    tflt = exp((1.0 * PlayerDepositDay() / 365 * 12) * ln(tflt)); //Считаем Y и возводим X в степень Y",
              "    int deposit_summ = round(min(tflt * PlayerDeposit(), 100000000)); //Применяем получившийся процент к сумме на счету и округляем результат",
              "",
              "    result = deposit_summ;",
              "}",
              "",
              "function PlayerActCode() //t_OnEnteringForm, t_OnLeavingForm, t_OnPlayerBuyEq, t_OnPlayerChangeHull",
              "{",
              "    if(ScriptItemActionType(t_OnEnteringForm))",
              "    {",
              "        //if(is_equip_purchase)",
              "        //{",
              "",
              "        //На случай, если игрок не завершил полный цикл работы с терминалом закупок и свалил",
              "        if(is_equip_purchase == 1) is_equip_purchase = 0;",
              "",
              "        //Игрок заходит в магазин оборудования",
              "        if(CurrentForm() == 'EquipmentShop')",
              "        {",
              "            if(!in_menu)",
              "            {",
              "                InterfaceState('EquipmentShop', 'PM_FreeSpace', 0);",
              "                if(ShipFreeSpace(Player()) >= 0)",
              "                {",
              "                    InterfaceState('EquipmentShop', 'PM_FreeSpace_Mod', 1);",
              "                    InterfaceText('EquipmentShop', 'PM_FreeSpace_Mod', '' + ShipFreeSpace(Player()));",
              "                }",
              "                else",
              "                {",
              "                     InterfaceState('EquipmentShop', 'PM_FreeSpaceRed_Mod', 1);",
              "                     InterfaceText('EquipmentShop', 'PM_FreeSpaceRed_Mod', '' + ShipFreeSpace(Player()));",
              "                     InterfaceState('EquipmentShop', 'PM_WarningSpace', 0);",
              "                     InterfaceState('EquipmentShop', 'PM_WarningSpace_Mod', 1);",
              "                }",
              "                tint1 = ItemSize(ShipEqInSlot(Player(), t_Hull), 999999);",
              "                ShipCalcParam(Player());",
              "                hull_size_changed = 1;",
              "",
              "                if(is_equip_purchase)",
              "                {",
              "                    cur_ruin = GetShipRuins(Player());",
              "                    //Чтобы игроку не предлагали заменить свой корпус на новый из магазина, но с доплатой",
              "                    tint2 = NoDropItem(ShipEqInSlot(Player(), t_Hull), 1);",
              "",
              "                    //Сперва чистим магазин на мостике",
              "                    if(PlayerBridge())",
              "                    {",
              "                        for(int i = ShopItems(cur_ruin) - 1; i >= 0; i = i - 1)",
              "                        {",
              "                            FreeItem(GetItemFromShop(cur_ruin, i));",
              "                        }",
              "                    }",
              "                    //Либо временно прячем предметы из магазина на БЦ",
              "                    else",
              "                    {",
              "                        tint3 = ShopItems(cur_ruin);",
              "                        for(i = tint3 - 1; i >= 0; i = i - 1)",
              "                        {",
              "                            PutItemInVault('EquipmentShopVault_' + Id(cur_ruin) + '_' + i, GetItemFromShop(cur_ruin, i));",
              "                        }",
              "",
              "                        InterfaceState('EquipmentShop', 'PM_EndTurn', 0);",
              "                        InterfaceState('EquipmentShop', 'RT_EndTurn_Lock', 1);",
              "",
              "                        InterfaceState('EquipmentShop', 'PR_Gov', 0);",
              "                        InterfaceState('EquipmentShop', 'PR_Goods', 0);",
              "                        InterfaceState('EquipmentShop', 'PR_Shop', 0);",
              "                        InterfaceState('EquipmentShop', 'PR_Info', 0);",
              "                        InterfaceState('EquipmentShop', 'PR_Hangar', 0);",
              "                        InterfaceState('EquipmentShop', 'PanelRuins', 0);",
              "                    }",
              "",
              "                    //Переносим ассортимент из выбранного магазина в магазин мостика",
              "                    if(!(is_equip_purchase % 2)) cur_store = IdToPlanet(is_equip_purchase / 2); //Магазин на планете",
              "                    else cur_store = IdToShip((is_equip_purchase - 1) / 2); //Магазин на станции",
              "",
              "                    unknown tarr = newarray(1);",
              "                    ArrayDelete(tarr, 0);",
              "                    int bon = FindBonusByNameInCfg('ItemPrevCost');",
              "                    for(i = ShopItems(cur_store) - 1; i >= 0; i = i - 1)",
              "                    {",
              "                        dword item = ShopItems(cur_store, i);",
              "                        ItemExtraSpecialsAddByType(item, bon, ItemCost(item));",
              "                        ItemCost(item, max(round(cur_commission * ItemCost(item)), 100));",
              "                        ArrayAdd(tarr, GetItemFromShop(cur_store, item));",
              "                    }",
              "                    for(i = ArrayDim(tarr) - 1; i >= 0; i = i - 1)",
              "                    {",
              "                        item = tarr[i];",
              "                        AddItemToShop(cur_ruin, item);",
              "                    }",
              "                }",
              "            }",
              "            else",
              "            {",
              "                if(is_equip_purchase)",
              "                {",
              "                    InterfaceState('EquipmentShop', 'PM_EndTurn', 0);",
              "                    InterfaceState('EquipmentShop', 'PanelRuins', 0);",
              "                }",
              "",
              "                in_menu = 0; //Игрок закрыл игровое меню",
              "            }",
              "        }",
              "        else if(CurrentForm() == 'Ship')",
              "        {",
              "            if(hull_size_changed)",
              "            {",
              "                ItemSize(ShipEqInSlot(Player(), t_Hull), tint1);",
              "                ShipCalcParam(Player());",
              "",
              "                InterfaceState('EquipmentShop', 'PM_FreeSpace', -1);",
              "                InterfaceState('EquipmentShop', 'PM_FreeSpace_Mod', -1);",
              "                InterfaceState('EquipmentShop', 'PM_FreeSpaceRed_Mod', -1);",
              "                InterfaceState('EquipmentShop', 'PM_WarningSpace', -1);",
              "                InterfaceState('EquipmentShop', 'PM_WarningSpace_Mod', -1);",
              "            }",
              "        }",
              "",
              "        //}",
              "    }",
              "    else if(ScriptItemActionType(t_OnLeavingForm))",
              "    {",
              "        //if(is_equip_purchase)",
              "        //{",
              "",
              "        //Игрок покидает магазин оборудования",
              "        if(CurrentForm() == 'EquipmentShop')",
              "        {",
              "            if(FormChange() != 'GameMenu')",
              "            {",
              "                ItemSize(ShipEqInSlot(Player(), t_Hull), tint1);",
              "                ShipCalcParam(Player());",
              "",
              "                InterfaceState('EquipmentShop', 'PM_FreeSpace', -1);",
              "                InterfaceState('EquipmentShop', 'PM_FreeSpace_Mod', -1);",
              "                InterfaceState('EquipmentShop', 'PM_FreeSpaceRed_Mod', -1);",
              "                InterfaceState('EquipmentShop', 'PM_WarningSpace', -1);",
              "                InterfaceState('EquipmentShop', 'PM_WarningSpace_Mod', -1);",
              "",
              "                hull_size_changed = 0;",
              "                Chameleon(Player());",
              "",
              "                if(is_equip_purchase)",
              "                {",
              "                    cur_ruin = GetShipRuins(Player());",
              "                    NoDropItem(ShipEqInSlot(Player(), t_Hull), tint2);",
              "",
              "                    //Переносим невыкупленный ассортимент из магазин мостика обратно в выбранный магазин",
              "                    if(!(is_equip_purchase % 2)) cur_store = IdToPlanet(is_equip_purchase / 2); //Магазин на планете",
              "                    else cur_store = IdToShip((is_equip_purchase - 1) / 2); //Магазин на станции",
              "",
              "                    tarr = newarray(1);",
              "                    ArrayDelete(tarr, 0);",
              "                    bon = FindBonusByNameInCfg('ItemPrevCost');",
              "                    for(i = ShopItems(cur_ruin) - 1; i >= 0; i = i - 1)",
              "                    {",
              "                        item = ShopItems(cur_ruin, i);",
              "                        ItemCost(item, ItemExtraSpecialsCountByType(item, bon));",
              "                        ItemExtraSpecialsDeleteByType(item, bon, ItemExtraSpecialsCountByType(item, bon));",
              "                        ArrayAdd(tarr, GetItemFromShop(cur_ruin, item));",
              "                    }",
              "                    for(i = ArrayDim(tarr) - 1; i >= 0; i = i - 1)",
              "                    {",
              "                        item = tarr[i];",
              "                        AddItemToShop(cur_store, item);",
              "                    }",
              "",
              "                    //Возвращаем раннее извлечённые предметы в магазин БЦ, если игрок покупал оборудование через него",
              "                    if(!PlayerBridge())",
              "                    {",
              "                        for(i = tint3 - 1; i >= 0; i = i - 1)",
              "                        {",
              "                            AddItemToShop(cur_ruin, GetItemFromVault('EquipmentShopVault_' + Id(cur_ruin) + '_' + i));",
              "                        }",
              "",
              "                        InterfaceState('EquipmentShop', 'PM_EndTurn', -1);",
              "                        InterfaceState('EquipmentShop', 'RT_EndTurn_Lock', 0);",
              "",
              "                        InterfaceState('EquipmentShop', 'PR_Gov', -1);",
              "                        InterfaceState('EquipmentShop', 'PR_Goods', -1);",
              "                        InterfaceState('EquipmentShop', 'PR_Shop', -1);",
              "                        InterfaceState('EquipmentShop', 'PR_Info', -1);",
              "                        InterfaceState('EquipmentShop', 'PR_Hangar', -1);",
              "                        InterfaceState('EquipmentShop', 'PanelRuins', -1);",
              "                    }",
              "",
              "                    is_equip_purchase = -1;",
              "                }",
              "            }",
              "            else in_menu = 1; //Игрок открыл игровое меню",
              "        }",
              "        else if(CurrentForm() == 'Ship')",
              "        {",
              "            if(hull_size_changed)",
              "            {",
              "                InterfaceState('EquipmentShop', 'PM_FreeSpace', 0);",
              "                if(ShipFreeSpace(Player()) >= 0)",
              "                {",
              "                    InterfaceState('EquipmentShop', 'PM_FreeSpace_Mod', 1);",
              "                    InterfaceText('EquipmentShop', 'PM_FreeSpace_Mod', '' + ShipFreeSpace(Player()));",
              "                }",
              "                else",
              "                {",
              "                     InterfaceState('EquipmentShop', 'PM_FreeSpaceRed_Mod', 1);",
              "                     InterfaceText('EquipmentShop', 'PM_FreeSpaceRed_Mod', '' + ShipFreeSpace(Player()));",
              "                     InterfaceState('EquipmentShop', 'PM_WarningSpace', 0);",
              "                     InterfaceState('EquipmentShop', 'PM_WarningSpace_Mod', 1);",
              "                }",
              "                tint1 = ItemSize(ShipEqInSlot(Player(), t_Hull), 999999);",
              "                ShipCalcParam(Player());",
              "            }",
              "        }",
              "",
              "        //}",
              "    }",
              "    //Игрок приобрёл что-то в магазине оборудования",
              "    else if(ScriptItemActionType(t_OnPlayerBuyEq))",
              "    {",
              "        //Игрок покупает вещь в магазине оборудования, обновляем счётчик занятого в трюме места",
              "        if(!is_equip_purchase)",
              "        {",
              "            ItemSize(ShipEqInSlot(Player(), t_Hull), tint1);",
              "            ShipCalcParam(Player());",
              "            if(ShipFreeSpace(Player()) >= 0)",
              "            {",
              "                InterfaceState('EquipmentShop', 'PM_FreeSpace_Mod', 1);",
              "                InterfaceText('EquipmentShop', 'PM_FreeSpace_Mod', '' + ShipFreeSpace(Player()));",
              "            }",
              "            else",
              "            {",
              "                 InterfaceState('EquipmentShop', 'PM_FreeSpaceRed_Mod', 1);",
              "                 InterfaceText('EquipmentShop', 'PM_FreeSpaceRed_Mod', '' + ShipFreeSpace(Player()));",
              "                 InterfaceState('EquipmentShop', 'PM_WarningSpace', 0);",
              "                 InterfaceState('EquipmentShop', 'PM_WarningSpace_Mod', 1);",
              "            }",
              "            ItemSize(ShipEqInSlot(Player(), t_Hull), 999999);",
              "            ShipCalcParam(Player());",
              "        }",
              "        //Игрок покупает вещь в магазине оборудования удалённо, переносим вещь в соответствующий магазин",
              "        else",
              "        {",
              "            cur_ruin = GetShipRuins(Player());",
              "            if(!(is_equip_purchase % 2)) cur_store = IdToPlanet(is_equip_purchase / 2); //Магазин на планете",
              "            else cur_store = IdToShip((is_equip_purchase - 1) / 2); //Магазин на станции",
              "",
              "            dword purchased_item = ScriptItemActObject1();",
              "            if(IsPlayer(ScriptItemActParam())) AddItemToStorage(cur_store, GetItemFromShip(Player(), purchased_item)); //Игрок купил предмет",
              "            else AddItemToStorage(cur_store, GetItemFromStorage(FindItemInStorage(purchased_item))); //Игрок купил корпус",
              "            ScriptItemActParam(cur_store);",
              "",
              "            buy_count = buy_count + 1;",
              "        }",
              "    }",
              "    else //if(ScriptItemActionType(t_OnPlayerChangeHull))",
              "    {",
              "        if(CurrentForm() == 'EquipmentShop')",
              "        {",
              "            //Возвращаем оригинальный размер старому корпусу, а размер нового обновим уже на t_OnPlayerBuyEq",
              "            ItemSize(ScriptItemActObject2(), tint1);",
              "            tint1 = ItemSize(ScriptItemActObject1());",
              "",
              "            ItemSize(ShipEqInSlot(Player(), t_Hull), tint1);",
              "            ShipCalcParam(Player());",
              "            if(ShipFreeSpace(Player()) >= 0)",
              "            {",
              "                InterfaceState('EquipmentShop', 'PM_FreeSpace_Mod', 1);",
              "                InterfaceText('EquipmentShop', 'PM_FreeSpace_Mod', '' + ShipFreeSpace(Player()));",
              "            }",
              "            else",
              "            {",
              "                 InterfaceState('EquipmentShop', 'PM_FreeSpaceRed_Mod', 1);",
              "                 InterfaceText('EquipmentShop', 'PM_FreeSpaceRed_Mod', '' + ShipFreeSpace(Player()));",
              "                 InterfaceState('EquipmentShop', 'PM_WarningSpace', 0);",
              "                 InterfaceState('EquipmentShop', 'PM_WarningSpace_Mod', 1);",
              "            }",
              "            ItemSize(ShipEqInSlot(Player(), t_Hull), 999999);",
              "            ShipCalcParam(Player());",
              "        }",
              "    }",
              "}"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  32,
          "#":  33,
          "Total.Lines":  19,
          "Code.Type":  "Turn",
          "Code":          
          [
              "//temp_int_5 - сумма депозита с учётом накопленных процентов",
              "int cur_deposit = temp_int_5;",
              "",
              "//Процент комиссии составляет 5%, так что мы заранее закладываем в лимит списания сумму в 105%",
              "//После этого, при начислении суммы мы получаем 1% от 105% и затем перемножаем его на 100% уже с учётом вычета 5% комиссии",
              "//Так что не пугайтесь тому громадному значению после запятой",
              "int to_add_limit = 100000000 - cur_deposit;",
              "to_add_limit = min(ShipMoney(Player()), round(1.05 * to_add_limit));",
              "int to_deposit = NumberBox('Bm.ItemsUseless.2Usl_Elus_s', \"На сколько пополнить?\", 100, to_add_limit, to_add_limit, 'Bm.FormCount2.2KindCredits');",
              "if(to_deposit)",
              "{",
              "    ShipMoney(Player(), ShipMoney(Player()) - to_deposit);",
              "    PlayerDeposit(cur_deposit + round(0.00952380952380952380952380952381 * to_deposit * 100));",
              "    PlayerDepositDay(0);",
              "    cur_deposit = DepositPercentCalc();",
              "    Sound('Sound.Sell');",
              "}",
              "",
              "temp_int_5 = cur_deposit;"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  110,
          "Pos.y":  0,
          "Parent":  31,
          "#":  34,
          "Total.Lines":  52,
          "Code.Type":  "Turn",
          "Code":          
          [
              "//temp_int_5 - сумма депозита с учётом накопленных процентов",
              "int cur_deposit = temp_int_5;",
              "",
              "//Процент комиссии составляет 5%, так что мы заранее закладываем в лимит списания сумму в 105%",
              "//После этого, при начислении суммы мы получаем 1% от 105% и затем перемножаем его на 100% уже с учётом вычета 5% комиссии",
              "//Так что не пугайтесь тому громадному значению после запятой",
              "int to_withdraw_limit = 100000000 - ShipMoney(Player());",
              "to_withdraw_limit = min(cur_deposit, round(1.05 * to_withdraw_limit));",
              "int to_withdraw = NumberBox('Bm.ItemsUseless.2Usl_Elus_s', \"Сколько снять?\", 100, to_withdraw_limit, to_withdraw_limit, 'Bm.FormCount2.2KindCredits');",
              "",
              "//Если остаток на счёте после снятия указанной игроком суммы будет ниже минимального порога в 1000 cr.",
              "if(cur_deposit - to_withdraw < 1000 && (cur_deposit - to_withdraw))",
              "{",
              "    if(MessageBoxYesNo(\"При снятии данной суммы, остаток средств на счёте составит менее 1000 cr. Все счета с остатком менее 1000 cr. автоматически аннулируются, а оставшиеся средства переводятся владельцу со стандартной комиссией в 5%. Вы уверены, что хотите продолжить?\"))",
              "    {",
              "        to_withdraw = to_withdraw_limit;",
              "        ShipMoney(Player(), ShipMoney(Player()) + round(0.00952380952380952380952380952381 * to_withdraw * 100));",
              "        PlayerDeposit(0);",
              "        PlayerDepositDate(0);",
              "        PlayerDepositDay(0);",
              "        PlayerDepositPercent(0);",
              "        cur_deposit = 0;",
              "        Sound('Sound.Buy');",
              "        MessageBox(\"Ваш депозитный счёт успешно аннулирован.\");",
              "    }",
              "}",
              "//Если игрок решил снять со счёта всё",
              "else if(!(cur_deposit - to_withdraw))",
              "{",
              "    if(MessageBoxYesNo(\"Вы собираетесь снять со счёта все доступные средства. При этом ваш депозитный счёт будет аннулирован и открыть его снова вы сможете лишь на ближайшем бизнес-центре. Вы уверены, что хотите продолжить?\"))",
              "    {",
              "        ShipMoney(Player(), ShipMoney(Player()) + round(0.00952380952380952380952380952381 * to_withdraw * 100));",
              "        PlayerDeposit(0);",
              "        PlayerDepositDate(0);",
              "        PlayerDepositDay(0);",
              "        PlayerDepositPercent(0);",
              "        cur_deposit = 0;",
              "        Sound('Sound.Buy');",
              "        MessageBox(\"Ваш депозитный счёт успешно аннулирован.\");",
              "    }",
              "}",
              "//Если игрок решил снять со хоть сколько-то и при этом остаток после снятия будет выше или равен минимальному порогу в 1000 cr.",
              "else if(cur_deposit - to_withdraw >= 1000 && (cur_deposit - to_withdraw) && to_withdraw)",
              "{",
              "    ShipMoney(Player(), ShipMoney(Player()) + round(0.00952380952380952380952380952381 * to_withdraw * 100));",
              "    PlayerDeposit(cur_deposit - to_withdraw);",
              "    PlayerDepositDay(0);",
              "    cur_deposit = DepositPercentCalc();",
              "    Sound('Sound.Buy');",
              "}",
              "",
              "temp_int_5 = cur_deposit;"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  300,
          "Pos.y":  580,
          "Parent":  -1,
          "#":  36,
          "Total.Lines":  3,
          "Code.Type":  "Turn",
          "Code":          
          [
              "news_ok = 0;",
              "if(PlayerBridge()) DAnswer('main');",
              "Sound('Sound.ButtonInfoEnter');"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  300,
          "Pos.y":  600,
          "Parent":  -1,
          "#":  37,
          "Total.Lines":  3,
          "Code.Type":  "Turn",
          "Code":          
          [
              "news_ok = 1;",
              "if(PlayerBridge()) DAnswer('main');",
              "Sound('Sound.ButtonInfoEnter');"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  61,
          "#":  38,
          "Total.Lines":  23,
          "Code.Type":  "Turn",
          "Code":          
          [
              "//Заносим в список все сектора, в которых имеются свободные системы",
              "ArrayClear(tarr1);",
              "for(i = 0; i < GalaxySectors(); i = i + 1)",
              "{",
              "    dword sector = GalaxySectors(i);",
              "    if(!SectorVisible(sector)) continue;",
              "",
              "    temp_int = 0;",
              "    for(j = 0; j < ConStars(sector); j = j + 1)",
              "    {",
              "        temp_dword_2 = ConStar(sector, j);",
              "        if(StarOwner(temp_dword_2) == 1) continue;",
              "        if(StarCustomFaction(temp_dword_2) == 'Klissan') continue;",
              "        if(StarToCon(temp_dword_2) == StarToCon(PlanetToStar(PlanetPirateClan())));",
              "        temp_int = 1;",
              "        break;",
              "    }",
              "",
              "    if(temp_int == 1) ArrayAdd(tarr1, i);",
              "}",
              "",
              "tstr1 = '</color>' + CT('Script.Mod_ExpBK.PurchaseTerminalDialog.SectorChoosing');",
              "tstr2 = '</color>' + CT('Script.Mod_ExpBK.PurchaseTerminalDialog.NoStoresAvailable');"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  40,
          "#":  41,
          "Total.Lines":  12,
          "Code.Type":  "Turn",
          "Code":          
          [
              "//Получение в строку слова \"Сектор \"",
              "//tstr2 = CT('FormInfo.M09Const');",
              "//tstr2 = substr(tstr2, 0, count(tstr2) - 1) + ' ';",
              "for(i = 1; i < ArrayDim(tarr1); i = i + 1)",
              "{",
              "    dword sector = GalaxySectors(tarr1[i]);",
              "    if(StarToCon(ShipStar(Player())) != sector) tstr1 = Name(sector);",
              "    else tstr1 = '<color=0,50,200>' + Name(sector) + '</color>';",
              "    InjectAnswer('ChooseStoreDialog', tstr1, sector);",
              "}",
              "",
              "InjectAnswer('PurchaseTerminalDialog', CT('Script.Mod_ExpBK.PurchaseTerminalDialog.SwitchBack'), 0);"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  -20,
          "Pos.y":  0,
          "Parent":  45,
          "#":  46,
          "Total.Lines":  61,
          "Code.Type":  "Turn",
          "Code":          
          [
              "//Предлагаем игроку на выбора все планеты и станции в секторе (если подключён EvoFairTrade), магазины которых доступны для игрока",
              "dword sector = GAnswerData;",
              "for(i = 0; i < ConStars(sector); i = i + 1)",
              "{",
              "    dword star = ConStar(sector, i);",
              "    if(StarOwner(star) == 1) continue;",
              "    if(StarCustomFaction(star) == 'Klissan') continue;",
              "    if(StarToCon(star) == StarToCon(PlanetToStar(PlanetPirateClan())));",
              "",
              "    for(j = 0; j < StarPlanets(star); j = j + 1)",
              "    {",
              "        dword planet = StarPlanets(star, j);",
              "        if(PlanetOwner(planet) == None) continue;",
              "        if(PlayerBridge())",
              "        {",
              "            if(planet == GetShipPlanet(GetShipRuins(Player()))) continue;",
              "        }",
              "        if(planet == PlanetPirateClan()) continue;",
              "",
              "        if(star != ShipStar(Player())) tstr1 = CT('Planet.Name') + ' <color=0,50,200>' + Name(planet) + '</color> (' + Name(star) + ')';",
              "        else tstr1 = CT('Planet.Name') + ' <color=0,50,200>' + Name(planet) + '</color> (<color=0,50,200>' + Name(star) + '</color>)';",
              "",
              "        if(is_equip_purchase && !ShopItems(planet))",
              "        {",
              "            tstr1 = DeleteTags(tstr1);",
              "            AddDialogBlock(tstr1, 1);",
              "        }",
              "        else AddDialogBlock(tstr1, 0);",
              "",
              "        if(!is_equip_purchase) InjectAnswer('ChooseGoodsDialog', tstr1, planet);",
              "        else InjectAnswer('OpenEquipShopDialog', tstr1, planet);",
              "    }",
              "",
              "    if(CurrentMods('Evolution\\EvoFairTrade') || is_equip_purchase)",
              "    {",
              "        for(j = 0; j < StarRuins(star); j = j + 1)",
              "        {",
              "            dword station = StarRuins(star, j);",
              "            if(NoShopUpdate(station)) continue;",
              "            if(station == cur_ruin) continue;",
              "            if(ShipOwner(station) > Gaal && ShipOwner(station) < PirateClan) continue;",
              "            if(CT('AssistantExclusions.' + ShipType(station)) == 'NoSearch') continue;",
              "            if(ShipType(station) == 'CB' && ShipOwner(Player()) != PirateClan) continue;",
              "",
              "            if(star != ShipStar(Player())) tstr1 = CT('ShipType.TypeName.' + ShipType(station)) + ' <color=0,50,200>' + ShipName(station) + '</color> (' + Name(star) + ')';",
              "            else tstr1 = CT('ShipType.TypeName.' + ShipType(station)) + ' <color=0,50,200>' + ShipName(station) + '</color> (<color=0,50,200>' + Name(star) + '</color>)';",
              "",
              "            if(is_equip_purchase && !ShopItems(station))",
              "            {",
              "                tstr1 = DeleteTags(tstr1);",
              "                AddDialogBlock(tstr1, 1);",
              "            }",
              "            else AddDialogBlock(tstr1, 0);",
              "",
              "            if(!is_equip_purchase) InjectAnswer('ChooseGoodsDialog', tstr1, station);",
              "            else InjectAnswer('OpenEquipShopDialog', tstr1, station);",
              "        }",
              "    }",
              "}",
              "",
              "tstr1 = '</color>' + CT('Script.Mod_ExpBK.PurchaseTerminalDialog.BackToSectorSelection');"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  57,
          "#":  47,
          "Total.Lines":  68,
          "Code.Type":  "Turn",
          "Code":          
          [
              "//Составление строчки товара с учётом размера шрифта",
              "tstr1 = CT('Script.Mod_ExpBK.PurchaseTerminalDialog.Quantity');",
              "tstr2 = CT('Script.Mod_ExpBK.PurchaseTerminalDialog.Cost');",
              "if(GetGameOptions('FontDialog') == '0') tstr1 = Format('<td=156'+'>') + tstr1 + Format('<td=253'+'>') + tstr2 + Format('<br>');",
              "else if(GetGameOptions('FontDialog') == '1') tstr1 = Format('<td=156'+'>') + tstr1 + Format('<td=264'+'>') + tstr2 + Format('<br>');",
              "else if(GetGameOptions('FontDialog') == '2') tstr1 = Format('<td=156'+'>') + tstr1 + Format('<td=267'+'>') + tstr2 + Format('<br>');",
              "else /*if(GetGameOptions('FontDialog') == '3')*/ tstr1 = Format('<td=156'+'>') + tstr1 + Format('<td=269'+'>') + tstr2 + Format('<br>');",
              "",
              "for(i = 0; i <= t_Narcotics; i = i + 1)",
              "{",
              "    temp_int = GoodsAdd(cur_store, i, 0);",
              "    if(!temp_int) temp_str_6 = '<color=255,0,0>' + temp_int + '</color>';",
              "    else temp_str_6 = temp_int;",
              "    if(temp_int < 10) temp_str_2 = '       ' + temp_str_6;",
              "    if(temp_int > 9 && temp_int < 100) temp_str_2 = '     ' + temp_str_6;",
              "    if(temp_int > 99 && temp_int < 1000) temp_str_2 = '   ' + temp_str_6;",
              "    if(temp_int > 999 && temp_int < 10000) temp_str_2 = ' ' + temp_str_6;",
              "    if(temp_int > 9999 && temp_int < 100000) temp_str_2 = temp_str_6;",
              "    temp_int = GoodsBuyPrice(cur_store, i);",
              "    if(temp_int < 10) temp_str_3 = '/      ' + temp_int;",
              "    if(temp_int > 9 && temp_int < 100) temp_str_3 = '/    ' + temp_int;",
              "    if(temp_int > 99 && temp_int < 1000) temp_str_3 = '/  ' + temp_int;",
              "    if(temp_int > 999 && temp_int < 10000) temp_str_3 = '/' + temp_int;",
              "    if(temp_int > 9999 && temp_int < 100000) temp_str_3 = temp_int;",
              "",
              "    if(ShipType(cur_ruin) == 'BK')",
              "    {",
              "        temp_int = GoodsBuyPrice(cur_store, i);",
              "        temp_int_5 = round(cur_commission * temp_int);",
              "        if(temp_int_5 == temp_int) temp_int = temp_int_5 + 1;",
              "        else temp_int = temp_int_5;",
              "        if(temp_int < 10) temp_str_4 = '    (' + temp_int + ')';",
              "        if(temp_int > 9 && temp_int < 100) temp_str_4 = '   (' + temp_int + ')';",
              "        if(temp_int > 99 && temp_int < 1000) temp_str_4 = ' (' + temp_int + ')';",
              "    }",
              "    else",
              "    {",
              "        temp_int = GoodsBuyPrice(cur_store, i);",
              "        temp_int_5 = round(cur_commission * temp_int);",
              "        if(temp_int_5 == temp_int) temp_int = temp_int_5 + 1;",
              "        else temp_int = temp_int_5;",
              "        if(temp_int < 10) temp_str_4 = '    (' + temp_int + ')';",
              "        if(temp_int > 9 && temp_int < 100) temp_str_4 = '   (' + temp_int + ')';",
              "        if(temp_int > 99 && temp_int < 1000) temp_str_4 = ' (' + temp_int + ')';",
              "    }",
              "",
              "    if(ObjectType(cur_store) == 3)",
              "    {",
              "        if(!ShipGoodsIllegalOnPlanet(Player(), i, cur_store))",
              "        {",
              "            tstr1 = tstr1 + '<color=0,50,200>' + type_name[i + 1] + ':</color>' + Format('<td=155'+'>') + temp_str_2 + Format('<td=225'+'>') + temp_str_3 + '<color=120,120,120>' + temp_str_4 + '</color>' + Format('<br>');",
              "        }",
              "        else",
              "        {",
              "            tstr1 = tstr1 + '<color=255,0,0>' + type_name[i + 1] + ':</color>' + Format('<td=155'+'>') + temp_str_2 + Format('<td=225'+'>') + temp_str_3 + '<color=120,120,120>' + temp_str_4 + '</color>' + Format('<br>');",
              "        }",
              "    }",
              "    //Выбираем товар на станции",
              "    else tstr1 = tstr1 + '<color=0,50,200>' + type_name[i + 1] + ':</color>' + Format('<td=155'+'>') + temp_str_2 + Format('<td=225'+'>') + temp_str_3 + '<color=120,120,120>' + temp_str_4 + '</color>' + Format('<br>');",
              "}",
              "",
              "if(ObjectType(cur_store) == 3) tstr5 = lowercase(CT('FormInfo.MM09')) + ' <color=0,50,200>' + Name(cur_store) + '</color>';",
              "else tstr5 = '<color=0,50,200>' + Name(cur_store) + '</color>';",
              "tstr1 = '</color>' + Format(CT('Script.Mod_ExpBK.PurchaseTerminalDialog.GoodsAtStore'),",
              "                               '<Store'+'>', tstr5,",
              "                               '<GoodsList'+'>', tstr1,",
              "                               '<Commission'+'>', '<color=0,50,200>' + round((cur_commission - 1.0) * 100.0) + '%</color>',",
              "                               '');"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  -20,
          "Pos.y":  0,
          "Parent":  48,
          "#":  49,
          "Total.Lines":  19,
          "Code.Type":  "Turn",
          "Code":          
          [
              "for(i = 0; i < 8; i = i + 1)",
              "{",
              "    buy_count = GoodsAdd(cur_store, i, 0);",
              "",
              "    if(ObjectType(cur_store) == 3)",
              "    {",
              "        if(!buy_count || ShipGoodsIllegalOnPlanet(Player(), i, cur_store)) AddDialogBlock(type_name[i + 1], 1);",
              "        InjectAnswer('BuyGoodsDialog', type_name[i + 1], i + 1);",
              "    }",
              "    else",
              "    {",
              "        if(!buy_count) AddDialogBlock(type_name[i + 1], 1);",
              "        InjectAnswer('BuyGoodsDialog', type_name[i + 1], i + 1);",
              "    }",
              "}",
              "",
              "if(ObjectType(cur_store) == 3) dword sector = StarToCon(PlanetToStar(cur_store));",
              "else sector = StarToCon(ShipStar(cur_store));",
              "InjectAnswer('ChooseStoreDialog', CT('Script.Mod_ExpBK.PurchaseTerminalDialog.BackToStoreSelection'), sector);"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  50,
          "#":  51,
          "Total.Lines":  75,
          "Code.Type":  "Turn",
          "Code":          
          [
              "type = GAnswerData;",
              "",
              "buy_count = GoodsAdd(cur_store, type - 1, 0) + 1;",
              "buy_count = min(GoodsAdd(cur_store, type - 1, 0), buy_count);",
              "temp_int = GoodsBuyPrice(cur_store, type - 1);",
              "if(ShipType(cur_ruin) == 'BK')",
              "{",
              "    temp_str_6 = temp_int;",
              "    temp_int_5 = round(cur_commission * temp_int);",
              "    if(temp_int_5 == temp_int) temp_int = temp_int_5 + 1;",
              "    else temp_int = temp_int_5;",
              "}",
              "else",
              "{",
              "    temp_str_6 = temp_int;",
              "    temp_int_5 = round(cur_commission * temp_int);",
              "    if(temp_int_5 == temp_int) temp_int = temp_int_5 + 1;",
              "    else temp_int = temp_int_5;",
              "}",
              "",
              "tstr2 = '</color>' + CT('Script.Mod_ExpBK.PurchaseTerminalDialog.SetGoodsQuantity');",
              "if(type - 1 == t_Food)",
              "{",
              "    temp_int_1 = int(ShipMoney(Player()) / temp_int);",
              "    buy_count = CountBox('Bm.Items.2Food', tstr2, 1, buy_count, temp_int, 1, temp_int_1, buy_count, ShipMoney(Player()));",
              "}",
              "else if(type - 1 == t_Medicine)",
              "{",
              "    temp_int_1 = int(ShipMoney(Player())/temp_int);",
              "    buy_count = CountBox('Bm.Items.2Medicine', tstr2, 1, buy_count,temp_int,1,temp_int_1, buy_count, ShipMoney(Player()));",
              "}",
              "else if(type - 1 == t_Technics)",
              "{",
              "    temp_int_1 = int(ShipMoney(Player()) / temp_int);",
              "    buy_count = CountBox('Bm.Items.2Technics', tstr2, 1, buy_count, temp_int, 1, temp_int_1, buy_count, ShipMoney(Player()));",
              "}",
              "else if(type - 1 == t_Luxury)",
              "{",
              "    temp_int_1 = int(ShipMoney(Player())/temp_int);",
              "    buy_count = CountBox('Bm.Items.2Luxury', tstr2, 1, buy_count, temp_int, 1, temp_int_1, buy_count, ShipMoney(Player()));",
              "}",
              "else if(type - 1 == t_Minerals)",
              "{",
              "    temp_int_1 = int(ShipMoney(Player()) / temp_int);",
              "    buy_count = CountBox('Bm.Items.2Minerals', tstr2, 1, buy_count, temp_int, 1, temp_int_1, buy_count, ShipMoney(Player()));",
              "}",
              "else if(type - 1 == t_Alcohol)",
              "{",
              "    temp_int_1 = int(ShipMoney(Player()) / temp_int);",
              "    buy_count = CountBox('Bm.Items.2Alcohol', tstr2, 1, buy_count, temp_int, 1, temp_int_1, buy_count, ShipMoney(Player()));",
              "}",
              "else if(type - 1 == t_Arms)",
              "{",
              "    temp_int_1 = int(ShipMoney(Player()) / temp_int);",
              "    buy_count = CountBox('Bm.Items.2Arms', tstr2, 1, buy_count,temp_int, 1, temp_int_1, buy_count, ShipMoney(Player()));",
              "}",
              "else if(type - 1 == t_Narcotics)",
              "{",
              "    temp_int_1 = int(ShipMoney(Player()) / temp_int);",
              "    buy_count = CountBox('Bm.Items.2Narcotics', tstr2, 1, buy_count, temp_int, 1, temp_int_1, buy_count, ShipMoney(Player()));",
              "}",
              "",
              "if(buy_count > 0)",
              "{",
              "    buy_cost = buy_count * temp_int;",
              "    tstr2 = '</color>' + Format(CT('Script.Mod_ExpBK.PurchaseTerminalDialog.GoodsConfirmationRequired'),",
              "                                   '<SplitLine'+'>', DefSplt,",
              "                                   '<Goods'+'>', '<color=0,50,200>' + type_name[type] + '</color>',",
              "                                   '<Quantity'+'>', '<color=0,50,200>' + buy_count + '</color>',",
              "                                   '<CostPerTon'+'>', '<color=0,50,200>' + temp_str_6 + '</color>',",
              "                                   '<CommissionPerTon'+'>', '<color=0,50,200>' + (temp_int - temp_str_6) + '</color>',",
              "                                   '<Cost'+'>', '<color=0,50,200>' + buy_cost + '</color>',",
              "                                   '');",
              "}",
              "else buy_cost = 0;"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  40,
          "Parent":  54,
          "#":  55,
          "Total.Lines":  17,
          "Code.Type":  "Turn",
          "Code":          
          [
              "if(ShipType(cur_ruin) == 'BK') buy_day_goods = CurTurn() + 3;",
              "else buy_day_goods = CurTurn() + 5;",
              "",
              "ShipMoney(Player(), ShipMoney(Player()) - buy_cost);",
              "goods = CreateGoods(type - 1, buy_count);",
              "//Выставляем купленным товарам цену с учётом комиссии",
              "ItemCost(goods, buy_count * (GoodsBuyPrice(cur_store, type - 1) + (temp_int - temp_str_6)));",
              "AddItemToStorage(cur_store, goods);",
              "PlanetSetGoods(cur_store, type - 1, (GoodsAdd(cur_store, type - 1, 0) - buy_count));",
              "Sound('Sound.Sell');",
              "",
              "if(ObjectType(cur_store) == 3) tstr5 = lowercase(CT('FormInfo.MM09')) + ' <color=0,50,200>' + Name(cur_store) + '</color>';",
              "else tstr5 = '<color=0,50,200>' + Name(cur_store) + '</color>';",
              "tstr1 = '</color>' + Format(CT('Script.Mod_ExpBK.PurchaseTerminalDialog.GoodsOrderConfirmed'),",
              "                               '<SplitLine'+'>', DefSplt,",
              "                               '<Store'+'>', tstr5,",
              "                               '');"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  320,
          "Pos.y":  130,
          "Parent":  -1,
          "#":  80,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "temp_int_2 = round(1.6 * GalaxyMoney(2)) * GalaxyDiffLevels(1) / 50;"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  310,
          "Pos.y":  60,
          "Parent":  -1,
          "#":  81,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "temp_int_2 = round(1.6 * GalaxyMoney(3)) * GalaxyDiffLevels(1) / 50;"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  155,
          "#":  93,
          "Total.Lines":  27,
          "Code.Type":  "Turn",
          "Code":          
          [
              "temp_str_3 = '';",
              "temp_str_4 = '';",
              "temp_str_5 = '';",
              "",
              "if((CurTurn() - PlayerDepositDate()) < 31)",
              "{",
              "    temp_str_3 = \"</color><br>Снятие со счёта станет вам доступно по истечении <31 - (CurTurn() - PlayerDepositDate())> дн.\";",
              "}",
              "",
              "if(PlayerDebt() > 0)",
              "{",
              "    temp_str_4 = \"<color=0,50,200>заморожен</color>\";",
              "}",
              "",
              "if(PlayerDebt() <= 0)",
              "{",
              "    if(PlayerDepositPercent() < 10) temp_str_4 = '0.' + PlayerDepositPercent() + '%';",
              "    else temp_str_4 = substr(PlayerDepositPercent(), 0, 1) + '.' + substr(PlayerDepositPercent(), 1, 1) + '%';",
              "}",
              "",
              "if(PlayerDebtCnt() >= 3)",
              "{",
              "    temp_str_5 = \"</color><br>Ваш депозитный счёт <color=0,50,200>заморожен</color> до полного погашения задолженности по кредиту.\";",
              "    temp_str_3 = '';",
              "}",
              "",
              "temp_int_5 = DepositPercentCalc();"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  100,
          "Pos.y":  0,
          "Parent":  97,
          "#":  99,
          "Total.Lines":  50,
          "Code.Type":  "Turn",
          "Code":          
          [
              "temp_int = NumberBox('Bm.ItemsUseless.2Usl_Elus_s', \"Какую сумму вы желаете погасить?\", 100, PlayerDebt(), ShipMoney(Player()), 'Bm.FormCount2.2KindCredits');",
              "if(ShipMoney(Player()) - (temp_int + (temp_int * 5) / 100) < 0)",
              "{",
              "    MessageBox(\"Извините, на вашем счету недостаточно средств для оплаты комиссии данного перевода.\");",
              "}",
              "else",
              "{",
              "    if((PlayerDebt() - temp_int) < 100 && (PlayerDebt() - temp_int))",
              "    {",
              "        if(MessageBoxYesNo(\"При погашении данной суммы, остаток долга составит менее 100 cr. Оставшаяся сумма автоматически спишется с вашего счёта в долг уплаты кредита, а сам кредит будет полностью погашен. Вы уверены, что хотите продолжить?\") == 1)",
              "        {",
              "            if(ShipMoney(Player()) < (temp_int + (PlayerDebt() - temp_int)))",
              "            {",
              "                MessageBox(\"Извините, на вашем счету недостаточно средств для полного погашения кредита.\");",
              "            }",
              "            else",
              "            {",
              "                if(ShipMoney(Player()) - ((temp_int + (PlayerDebt() - temp_int)) + ((temp_int + (PlayerDebt() - temp_int)) * 5) / 100) < 0)",
              "                {",
              "                    MessageBox(\"Извините, на вашем счету недостаточно средств для оплаты комиссии данного перевода.\");",
              "                }",
              "                else",
              "                {",
              "                    temp_int = temp_int + (PlayerDebt() - temp_int);",
              "                    ShipMoney(Player(), ShipMoney(Player()) - (temp_int + (temp_int * 5) / 100));",
              "                    PlayerDebtCnt(0);",
              "                    PlayerDebtDate(0);",
              "                    PlayerDebt(0);",
              "                    Sound('Sound.Sell');",
              "                    MessageBox(\"Благодарим вас за своевременное погашение кредита. Надеемся на дальнейшее сотрудничество.\");",
              "                }",
              "            }",
              "        }",
              "    }",
              "    if((PlayerDebt() - temp_int) == 0)",
              "    {",
              "        ShipMoney(Player(), ShipMoney(Player()) - (temp_int + (temp_int * 5) / 100));",
              "        PlayerDebtCnt(0);",
              "        PlayerDebtDate(0);",
              "        PlayerDebt(0);",
              "        Sound('Sound.Sell');",
              "        MessageBox(\"Благодарим вас за своевременное погашение кредита. Надеемся на дальнейшее сотрудничество.\");",
              "    }",
              "    if((PlayerDebt() - temp_int) >= 100 && (PlayerDebt() - temp_int) && temp_int)",
              "    {",
              "        ShipMoney(Player(), ShipMoney(Player()) - (temp_int + (temp_int * 5) / 100));",
              "        PlayerDebt(PlayerDebt() - temp_int);",
              "        Sound('Sound.Sell');",
              "    }",
              "}"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  330,
          "Pos.y":  580,
          "Parent":  -1,
          "#":  104,
          "Total.Lines":  18,
          "Code.Type":  "DialogBegin",
          "Code":          
          [
              "if(CurrentMods('Expansion\\ExpPilotBridge'))",
              "{",
              "    if(PlayerBridge() == 12)",
              "    {",
              "        if(!news_ok)",
              "        {",
              "            temp_str = \"Выключен\";",
              "            if(GetGameOptions('FontDialog') < 3) AddDialogInject('TradeNews_ON', \"Новости торговли: <temp_str>\", \"<color=0,50,200>Включить</color> вывод торговых новостей\", 10);",
              "            else AddDialogInject('TradeNews_ON',\"Новости торговли: <temp_str>\", \"<color=0,50,200>Включить</color> вывод торг. новостей\", 10);",
              "        }",
              "        else",
              "        {",
              "            temp_str = \"Включён\";",
              "            if(GetGameOptions('FontDialog') < 3) AddDialogInject('TradeNews_OFF', \"Новости торговли: <temp_str>\", \"<color=0,50,200>Выключить</color> вывод торговых новостей\", 10);",
              "            else AddDialogInject('TradeNews_OFF',\"Новости торговли: <temp_str>\", \"<color=0,50,200>Выключить</color> вывод торг. новостей\", 10);",
              "        }",
              "    }",
              "}"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  85,
          "#":  112,
          "Total.Lines":  17,
          "Code.Type":  "Turn",
          "Code":          
          [
              "//Если закупка происходит на мостике",
              "if(PlayerBridge()) cur_commission = 1.07;",
              "//Если закупка происходит на БЦ",
              "else cur_commission = 1.03;",
              "is_equip_purchase = 0;",
              "",
              "if(GetGameOptions('FontDialog') == '0') DefSplt = '</color>-------------------------------------------------------------';",
              "else if(GetGameOptions('FontDialog') == '1') DefSplt = '</color>------------------------------------------';",
              "else if(GetGameOptions('FontDialog') == '2') DefSplt = '</color>-----------------------------------------';",
              "else /*if(GetGameOptions('FontDialog') == '3')*/ DefSplt = '</color>-------------------------------------';",
              "",
              "tstr1 = '</color>' + Format(CT('Script.Mod_ExpBK.PurchaseTerminalDialog.Intro'), '<Commission'+'>', '' + round((cur_commission - 1.0) * 100.0) + '%');",
              "tstr2 = '</color>' + CT('Script.Mod_ExpBK.PurchaseTerminalDialog.GoodsPurchase');",
              "tstr3 = '</color>' + CT('Script.Mod_ExpBK.PurchaseTerminalDialog.GoodsPurchaseBlocked');",
              "tstr4 = '</color>' + CT('Script.Mod_ExpBK.PurchaseTerminalDialog.EquipmentPurchase');",
              "tstr5 = '</color>' + CT('Script.Mod_ExpBK.PurchaseTerminalDialog.EquipmentPurchaseBlocked');",
              "tstr6 = '</color>' + CT('Script.Mod_ExpBK.PurchaseTerminalDialog.LeaveTerminal');"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  -200,
          "Parent":  34,
          "#":  114,
          "Total.Lines":  2,
          "Code.Type":  "Turn",
          "Code":          
          [
              "PlayerBridge(LBridgeCheck);",
              "//Последующий перевод на реплику нужен только чтобы игра не ломалась"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  370,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  119,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "temp_int_2 = round(1.6 * GalaxyMoney(3)) * GalaxyDiffLevels(1) / 50;"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  490,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  127,
          "Total.Lines":  4,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipAddCustomShipInfo(Player(), 'Trade_license', \"Увеличивает торговый опыт в зависимости от торгового рейтинга. Действительна до <GameDateTxtByTurn(CurTurn()+365*5)>.\", CurTurn() + 365 * 5, -1, 0);",
              "ShipSpecialBonuses(Player(), bonSkill4, ShipSpecialBonuses(Player(), bonSkill4) + 1);",
              "ShipMoney(Player(), ShipMoney(Player()) - temp_int_2);",
              "Sound('Sound.Sell');"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  500,
          "Pos.y":  80,
          "Parent":  -1,
          "#":  139,
          "Total.Lines":  5,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipAddCustomShipInfo(Player(), 'Trade_license', \"Увеличивает торговый опыт в зависимости от торгового рейтинга. Действительна до <GameDateTxtByTurn(CurTurn() + 365 * 5)>.\", CurTurn() + 365 * 5, -1, 0);",
              "ShipSpecialBonuses(Player(), bonSkill4, ShipSpecialBonuses(Player(), bonSkill4) + 1);",
              "ShipMoney(Player(), ShipMoney(Player()) - temp_int_2);",
              "LTradeLicenseCheck = 1;",
              "Sound('Sound.Sell');"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  230,
          "Pos.y":  580,
          "Parent":  -1,
          "#":  149,
          "Total.Lines":  12,
          "Code.Type":  "Turn",
          "Code":          
          [
              "if(!news_ok)",
              "{",
              "    temp_str = \"Выключен\";",
              "    if(GetGameOptions('FontDialog') < 3)InjectAnswer('TradeNews_ON', \"<color=0,50,200>Включить</color> вывод торговых новостей\", 10);",
              "    else InjectAnswer('TradeNews_ON', \"<color=0,50,200>Включить</color> вывод торг. новостей\", 10);",
              "}",
              "else",
              "{",
              "    temp_str = \"Включён\";",
              "    if(GetGameOptions('FontDialog') < 3) InjectAnswer('TradeNews_OFF', \"<color=0,50,200>Выключить</color> вывод торговых новостей\", 10);",
              "    else InjectAnswer('TradeNews_OFF', \"<color=0,50,200>Выключить</color> вывод торг. новостей\", 10);",
              "}"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  150,
          "Parent":  182,
          "#":  159,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "cur_store = GAnswerData;"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  20,
          "Pos.y":  0,
          "Parent":  43,
          "#":  185,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "InjectAnswer('PurchaseTerminalDialog', CT('Script.Mod_ExpBK.PurchaseTerminalDialog.SwitchBack'), 0);"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  44,
          "#":  186,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "tstr1 = '</color>' + CT('Script.Mod_ExpBK.PurchaseTerminalDialog.StoreChoosing');"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  187,
          "#":  188,
          "Total.Lines":  26,
          "Code.Type":  "Turn",
          "Code":          
          [
              "if(ObjectType(GAnswerData) == 3) is_equip_purchase = Id(GAnswerData) * 2;",
              "else is_equip_purchase = Id(GAnswerData) * 2 + 1;",
              "buy_count = 0;",
              "in_menu = 0; //Маркер временного выхода игрока из магазина в 'GameMenu' и глубже, чтобы не вызывались левые срабатывания акткода при смене форм",
              "FormChange('EquipmentShop');",
              "",
              "if(PlayerBridge())",
              "{",
              "    //При переходе на форму магазина оборудки мостик выключается и подключается другая станция",
              "    //Меняем тип этой станции, чтоб на неё подгружался нужный нам фон (единственный способ сменить фон на станции)",
              "    //Приписка Alpha в названии фона (а, следовательно, и типа станции) в кэше обязательна для рескейла изображения с сохранением альфа-канала",
              "    dword temp_station = GetShipRuins(Player());",
              "    if(GetMainData('Data.SE.' + Chameleon(Player(), 'GraphName') + '.BridgeOtherFormBG') != '') str ruin_type = GetMainData('Data.SE.' + Chameleon(Player(), 'GraphName') + '.BridgeOtherFormBG');",
              "    else ruin_type = 'OtherFormBridge';",
              "",
              "    if(GetShipPlanet(temp_station))",
              "    {",
              "        if(PlanetOwner(GetShipPlanet(temp_station)) == None) ruin_type = ruin_type + 'PlanetNoneAlpha';",
              "        else ruin_type = ruin_type + 'HangarAlpha';",
              "    }",
              "    else if(GetShipRuins(temp_station)) ruin_type = ruin_type + 'HangarAlpha';",
              "    else ruin_type = ruin_type + 'SpaceAlpha';",
              "",
              "    ShipType(temp_station, ruin_type);",
              "    SetName(temp_station, ruin_type); //Выставление имени необходимо для непосредственной проверки из акткода, поскольку запросить текущий ShipType() станции-мостика невозможно, вернётся 'PlayerBridge'",
              "}"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  180,
          "#":  191,
          "Total.Lines":  2,
          "Code.Type":  "Turn",
          "Code":          
          [
              "//Просто маркер, чтобы ниже выбиралась корректная ветка диалога, а также заработал акткод на игроке",
              "is_equip_purchase = 1;"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  196,
          "#":  197,
          "Total.Lines":  17,
          "Code.Type":  "Turn",
          "Code":          
          [
              "if(buy_count)",
              "{",
              "    if(ShipType(cur_ruin) == 'BK') buy_day_equip = CurTurn() + 3;",
              "    else buy_day_equip = CurTurn() + 5;",
              "",
              "    if(ObjectType(cur_store) == 3) tstr5 = lowercase(CT('FormInfo.MM09')) + ' <color=0,50,200>' + Name(cur_store) + '</color>';",
              "    else tstr5 = '<color=0,50,200>' + Name(cur_store) + '</color>';",
              "    tstr1 = '</color>' + Format(CT('Script.Mod_ExpBK.PurchaseTerminalDialog.EquipmentOrderConfirmed'),",
              "                                   '<SplitLine'+'>', DefSplt,",
              "                                   '<Store'+'>', tstr5,",
              "                                   '');",
              "}",
              "//Игрок ничего не купил",
              "else",
              "{",
              "    tstr1 = '</color>' + CT('Script.Mod_ExpBK.PurchaseTerminalDialog.EquipmentOrderCanceled');",
              "}"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  -10,
          "Pos.y":  420,
          "Parent":  -1,
          "#":  199,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "InjectAnswer('PurchaseTerminalDialog', CT('Script.Mod_ExpBK.PurchaseTerminalDialog.BackToTerminal'), 0);"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  198,
          "#":  200,
          "Total.Lines":  12,
          "Code.Type":  "Turn",
          "Code":          
          [
              "is_equip_purchase = 0;",
              "",
              "if(!buy_count)",
              "{",
              "    if(ObjectType(cur_store) == 3) dword sector = StarToCon(PlanetToStar(cur_store)); //Магазин на планете",
              "    else sector = StarToCon(ShipStar(cur_store)); //Магазин на станции",
              "",
              "    //Если игрок вернётся к выбору магазинов, то маркер покупки оборудования будет выставлен автоматически",
              "    InjectAnswer('ChooseStoreDialog', CT('Script.Mod_ExpBK.PurchaseTerminalDialog.BackToStoreSelection'), sector, 'is_equip_purchase = 1;');",
              "}",
              "",
              "InjectAnswer('PurchaseTerminalDialog', CT('Script.Mod_ExpBK.PurchaseTerminalDialog.BackToTerminal'), 0);"          
          ]        
        }      
      ],
      "Planets":      
      [
        {
          "Type":  "TPlanet",
          "Name":  "InitPlanet",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  1,
          "#":  2,
          "Race":  62,
          "Owner":  62,
          "Economy":  14,
          "Goverment":  62,
          "RangeMin":  0,
          "RangeMax":  100,
          "Dialog":  -1        
        }      
      ],
      "Ships":      
      [
        {
          "Type":  "TStarShip",
          "Name":  "",
          "Pos.x":  610,
          "Pos.y":  330,
          "Parent":  -1,
          "#":  0,
          "Count":  1,
          "Owner":  62,
          "Ship.Type":  126,
          "Player":  true,
          "SpeedMin":  0,
          "SpeedMax":  10000,
          "Weapon":  0,
          "CargoHook":  0,
          "EmptySpace":  0,
          "StatusTraderMin":  0,
          "StatusTraderMax":  100,
          "StatusWarriorMin":  0,
          "StatusWarriorMax":  100,
          "StatusPirateMin":  0,
          "StatusPirateMax":  100,
          "StrengthMin":  "0",
          "StrengthMax":  "0",
          "Ruins":  ""        
        }      
      ],
      "Stars":      
      [
        {
          "Type":  "TStar",
          "Name":  "InitStar",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  0,
          "#":  1,
          "Constellation":  0,
          "Priority":  0,
          "NoKling":  false,
          "NoComeKling":  false        
        }      
      ],
      "Statements":      
      [
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  440,
          "Pos.y":  60,
          "Parent":  -1,
          "#":  9,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) >= temp_int_2"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  290,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  16,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) >= temp_int_2"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  30,
          "Parent":  29,
          "#":  30,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) >= 100 && PlayerDebtCnt() < 3 && temp_int_5 <= 99999900"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  38,
          "#":  39,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ArrayDim(tarr1) > 1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  20,
          "Pos.y":  20,
          "Parent":  38,
          "#":  42,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ArrayDim(tarr1) <= 1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  52,
          "#":  53,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) >= buy_cost"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  -50,
          "Pos.y":  20,
          "Parent":  86,
          "#":  58,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "buy_day_goods < CurTurn()"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  -30,
          "Pos.y":  20,
          "Parent":  86,
          "#":  59,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "buy_day_goods >= CurTurn()"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  20,
          "Pos.y":  20,
          "Parent":  51,
          "#":  75,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "buy_count > 0"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  51,
          "#":  76,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "buy_count <= 0"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  370,
          "Pos.y":  130,
          "Parent":  -1,
          "#":  78,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "temp_int_3 == 1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  440,
          "Pos.y":  100,
          "Parent":  -1,
          "#":  79,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "!temp_int_3 && !LTradeLicenseCheck"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  20,
          "Pos.y":  -20,
          "Parent":  7,
          "#":  87,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "!ShipIsTakeoff(Player())"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  20,
          "Pos.y":  30,
          "Parent":  29,
          "#":  88,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) < 100 || PlayerDebtCnt() >= 3 || temp_int_5 > 99999900"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  40,
          "Pos.y":  30,
          "Parent":  29,
          "#":  90,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "CurTurn() - PlayerDepositDate() > 30 && PlayerDebtCnt() < 3 && ShipMoney(Player()) <= 99999900"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  60,
          "Pos.y":  30,
          "Parent":  29,
          "#":  91,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "CurTurn() - PlayerDepositDate() < 31 || PlayerDebtCnt() >= 3 || ShipMoney(Player()) > 99999900"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  -70,
          "Parent":  34,
          "#":  94,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "!temp_int_5"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  30,
          "Parent":  95,
          "#":  96,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) >= 100"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  20,
          "Pos.y":  30,
          "Parent":  95,
          "#":  100,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) < 100"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  -50,
          "Parent":  99,
          "#":  101,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "!PlayerDebt()"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  470,
          "Pos.y":  100,
          "Parent":  -1,
          "#":  109,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) < temp_int_2"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  320,
          "Pos.y":  210,
          "Parent":  -1,
          "#":  110,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) < temp_int_2"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  370,
          "Pos.y":  150,
          "Parent":  -1,
          "#":  118,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "!temp_int_3 && LTradeLicenseCheck == 1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  450,
          "Pos.y":  190,
          "Parent":  -1,
          "#":  123,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) < temp_int_2"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  450,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  124,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) >= temp_int_2"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  560,
          "Pos.y":  120,
          "Parent":  -1,
          "#":  140,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "PlayerDebt() > 0"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  540,
          "Pos.y":  120,
          "Parent":  -1,
          "#":  141,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "PlayerDebt() <= 0"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  270,
          "Pos.y":  600,
          "Parent":  -1,
          "#":  150,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "!PlayerBridge()"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  330,
          "Pos.y":  600,
          "Parent":  -1,
          "#":  151,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "PlayerBridge()"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  40,
          "Pos.y":  30,
          "Parent":  95,
          "#":  160,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  -20,
          "Pos.y":  -50,
          "Parent":  99,
          "#":  161,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "PlayerDebt()"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  80,
          "Pos.y":  30,
          "Parent":  29,
          "#":  162,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  -90,
          "Parent":  165,
          "#":  163,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  -20,
          "Pos.y":  -70,
          "Parent":  34,
          "#":  164,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "temp_int_5"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  110,
          "Pos.y":  0,
          "Parent":  33,
          "#":  165,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  30,
          "Pos.y":  20,
          "Parent":  86,
          "#":  171,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  -10,
          "Pos.y":  20,
          "Parent":  86,
          "#":  178,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "buy_day_equip < CurTurn()"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  10,
          "Pos.y":  20,
          "Parent":  86,
          "#":  179,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "buy_day_equip >= CurTurn()"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  20,
          "Pos.y":  20,
          "Parent":  52,
          "#":  183,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  -40,
          "Pos.y":  0,
          "Parent":  47,
          "#":  184,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  -100,
          "Parent":  131,
          "#":  190,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        }      
      ],
      "States":      
      [
        {
          "Type":  "TState",
          "Name":  "PlayerState",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  3,
          "#":  4,
          "Move":  0,
          "MoveObj":  -1,
          "Attack.Count":  0,
          "TakeItem":  -1,
          "TakeAllItem":  false,
          "OnTalk":  "",
          "OnActCode":  "[t_OnEnteringForm,t_OnLeavingForm,t_OnPlayerBuyEq,t_OnPlayerChangeHull|]\r\nPlayerActCode();",
          "EType":  1,
          "EUnique":  "",
          "EMsg":  ""        
        }      
      ],
      "Variables":      
      [
        {
          "Type":  "TVar",
          "Name":  "temp_int_3",
          "Pos.x":  840,
          "Pos.y":  390,
          "Parent":  -1,
          "#":  21,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "temp_int",
          "Pos.x":  840,
          "Pos.y":  330,
          "Parent":  -1,
          "#":  22,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "temp_int_1",
          "Pos.x":  840,
          "Pos.y":  350,
          "Parent":  -1,
          "#":  23,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "temp_int_2",
          "Pos.x":  840,
          "Pos.y":  370,
          "Parent":  -1,
          "#":  24,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "temp_dword",
          "Pos.x":  610,
          "Pos.y":  130,
          "Parent":  -1,
          "#":  25,
          "Var.Type":  "Dword",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "news_ok",
          "Pos.x":  840,
          "Pos.y":  310,
          "Parent":  -1,
          "#":  26,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "temp_str",
          "Pos.x":  730,
          "Pos.y":  130,
          "Parent":  -1,
          "#":  27,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "buy_count",
          "Pos.x":  0,
          "Pos.y":  -20,
          "Parent":  182,
          "#":  62,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "type",
          "Pos.x":  840,
          "Pos.y":  130,
          "Parent":  -1,
          "#":  63,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "cur_store",
          "Pos.x":  20,
          "Pos.y":  20,
          "Parent":  85,
          "#":  64,
          "Var.Type":  "Dword",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "buy_day_goods",
          "Pos.x":  0,
          "Pos.y":  -20,
          "Parent":  62,
          "#":  65,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "buy_cost",
          "Pos.x":  840,
          "Pos.y":  250,
          "Parent":  -1,
          "#":  66,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "type_name",
          "Pos.x":  730,
          "Pos.y":  410,
          "Parent":  -1,
          "#":  67,
          "Var.Type":  "Array",
          "Init":  "9",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "temp_dword_2",
          "Pos.x":  610,
          "Pos.y":  150,
          "Parent":  -1,
          "#":  68,
          "Var.Type":  "Dword",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "temp_int_4",
          "Pos.x":  840,
          "Pos.y":  410,
          "Parent":  -1,
          "#":  69,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "temp_dword_3",
          "Pos.x":  610,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  70,
          "Var.Type":  "Dword",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "temp_str_2",
          "Pos.x":  730,
          "Pos.y":  150,
          "Parent":  -1,
          "#":  71,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "temp_str_3",
          "Pos.x":  730,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  72,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "temp_str_4",
          "Pos.x":  730,
          "Pos.y":  190,
          "Parent":  -1,
          "#":  73,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "goods",
          "Pos.x":  840,
          "Pos.y":  150,
          "Parent":  -1,
          "#":  74,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "BKexist",
          "Pos.x":  840,
          "Pos.y":  90,
          "Parent":  -1,
          "#":  77,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "temp_str_5",
          "Pos.x":  730,
          "Pos.y":  210,
          "Parent":  -1,
          "#":  113,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "LBridgeCheck",
          "Pos.x":  840,
          "Pos.y":  210,
          "Parent":  -1,
          "#":  115,
          "Var.Type":  "Int",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "LTradeLicenseCheck",
          "Pos.x":  840,
          "Pos.y":  190,
          "Parent":  -1,
          "#":  117,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "sell_day",
          "Pos.x":  840,
          "Pos.y":  230,
          "Parent":  -1,
          "#":  132,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "temp_str_6",
          "Pos.x":  730,
          "Pos.y":  230,
          "Parent":  -1,
          "#":  133,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "temp_int_5",
          "Pos.x":  840,
          "Pos.y":  430,
          "Parent":  -1,
          "#":  134,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "TrLCount",
          "Pos.x":  840,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  145,
          "Var.Type":  "Int",
          "Init":  "1",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "DefSplt",
          "Pos.x":  730,
          "Pos.y":  250,
          "Parent":  -1,
          "#":  146,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "cur_commission",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  64,
          "#":  152,
          "Var.Type":  "Float",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "temp_float",
          "Pos.x":  730,
          "Pos.y":  310,
          "Parent":  -1,
          "#":  153,
          "Var.Type":  "Float",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "i",
          "Pos.x":  900,
          "Pos.y":  130,
          "Parent":  -1,
          "#":  154,
          "Var.Type":  "Int",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "TotalBKCount",
          "Pos.x":  840,
          "Pos.y":  110,
          "Parent":  -1,
          "#":  157,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "cur_ruin",
          "Pos.x":  610,
          "Pos.y":  240,
          "Parent":  -1,
          "#":  158,
          "Var.Type":  "Dword",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "j",
          "Pos.x":  930,
          "Pos.y":  130,
          "Parent":  -1,
          "#":  166,
          "Var.Type":  "Int",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "IsExpPilotBridgeOn",
          "Pos.x":  610,
          "Pos.y":  280,
          "Parent":  -1,
          "#":  168,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "last_trade_news_upd",
          "Pos.x":  610,
          "Pos.y":  300,
          "Parent":  -1,
          "#":  169,
          "Var.Type":  "Dword",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "cnt",
          "Pos.x":  900,
          "Pos.y":  150,
          "Parent":  -1,
          "#":  170,
          "Var.Type":  "Int",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "tstr1",
          "Pos.x":  730,
          "Pos.y":  450,
          "Parent":  -1,
          "#":  172,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "tstr2",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  172,
          "#":  173,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "tstr3",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  173,
          "#":  174,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "tstr4",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  174,
          "#":  175,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "tstr5",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  175,
          "#":  176,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "tstr6",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  176,
          "#":  177,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "buy_day_equip",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  192,
          "#":  189,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "is_equip_purchase",
          "Pos.x":  0,
          "Pos.y":  120,
          "Parent":  187,
          "#":  192,
          "Var.Type":  "Dword",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "tarr1",
          "Pos.x":  730,
          "Pos.y":  90,
          "Parent":  -1,
          "#":  193,
          "Var.Type":  "Array",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "tint1",
          "Pos.x":  800,
          "Pos.y":  450,
          "Parent":  -1,
          "#":  194,
          "Var.Type":  "Int",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "tint2",
          "Pos.x":  800,
          "Pos.y":  470,
          "Parent":  -1,
          "#":  195,
          "Var.Type":  "Int",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "tint3",
          "Pos.x":  800,
          "Pos.y":  490,
          "Parent":  -1,
          "#":  201,
          "Var.Type":  "Int",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "in_menu",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  189,
          "#":  202,
          "Var.Type":  "Int",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "hull_size_changed",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  202,
          "#":  203,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        }      
      ]    
    }  
  ],
  "Visual.Links":  
  [
    {
      "Type":  "TGraphLink",
      "Begin":  3,
      "End":  4,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  3,
      "End":  2,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  2,
      "End":  1,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  0,
      "End":  1,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  8,
      "End":  9,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  10,
      "End":  11,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  11,
      "End":  12,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  12,
      "End":  13,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  14,
      "End":  15,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  14,
      "End":  16,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  16,
      "End":  17,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  17,
      "End":  18,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  18,
      "End":  19,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  19,
      "End":  20,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  29,
      "End":  30,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  30,
      "End":  32,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  32,
      "End":  33,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  31,
      "End":  34,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  38,
      "End":  39,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  38,
      "End":  42,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  39,
      "End":  40,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  40,
      "End":  41,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  42,
      "End":  43,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  45,
      "End":  46,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  48,
      "End":  49,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  52,
      "End":  53,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  53,
      "End":  54,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  54,
      "End":  55,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  57,
      "End":  47,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  59,
      "End":  60,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  58,
      "End":  61,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  61,
      "End":  38,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  51,
      "End":  75,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  75,
      "End":  52,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  51,
      "End":  76,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  76,
      "End":  48,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  80,
      "End":  14,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  81,
      "End":  8,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  79,
      "End":  82,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  82,
      "End":  83,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  83,
      "End":  81,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  86,
      "End":  59,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  86,
      "End":  58,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  87,
      "End":  6,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  29,
      "End":  88,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  88,
      "End":  89,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  29,
      "End":  90,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  90,
      "End":  31,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  29,
      "End":  91,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  91,
      "End":  92,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  34,
      "End":  94,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  95,
      "End":  96,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  96,
      "End":  97,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  100,
      "End":  98,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  95,
      "End":  100,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  97,
      "End":  99,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  99,
      "End":  101,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  105,
      "End":  36,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  103,
      "End":  37,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  106,
      "End":  78,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  106,
      "End":  79,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  8,
      "End":  109,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  109,
      "End":  108,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  78,
      "End":  80,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  110,
      "End":  111,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  14,
      "End":  110,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  85,
      "End":  112,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  112,
      "End":  86,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  82,
      "End":  116,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  8,
      "End":  116,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  106,
      "End":  118,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  118,
      "End":  119,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  119,
      "End":  120,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  120,
      "End":  123,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  123,
      "End":  121,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  120,
      "End":  124,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  124,
      "End":  122,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  120,
      "End":  125,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  122,
      "End":  127,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  127,
      "End":  126,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  126,
      "End":  128,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  116,
      "End":  129,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  129,
      "End":  130,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  9,
      "End":  135,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  136,
      "End":  13,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  137,
      "End":  138,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  135,
      "End":  139,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  139,
      "End":  136,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  9,
      "End":  10,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  108,
      "End":  140,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  108,
      "End":  141,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  141,
      "End":  137,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  140,
      "End":  142,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  142,
      "End":  138,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  125,
      "End":  143,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  143,
      "End":  130,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  15,
      "End":  144,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  144,
      "End":  130,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  107,
      "End":  148,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  148,
      "End":  147,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  148,
      "End":  149,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  37,
      "End":  150,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  36,
      "End":  150,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  150,
      "End":  148,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  37,
      "End":  151,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  36,
      "End":  151,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  151,
      "End":  104,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  156,
      "End":  95,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  155,
      "End":  93,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  93,
      "End":  29,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  101,
      "End":  114,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  94,
      "End":  114,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  50,
      "End":  51,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  95,
      "End":  160,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  160,
      "End":  102,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  99,
      "End":  161,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  161,
      "End":  95,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  29,
      "End":  162,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  162,
      "End":  35,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  163,
      "End":  29,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  34,
      "End":  164,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  164,
      "End":  29,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  165,
      "End":  163,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  33,
      "End":  165,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  114,
      "End":  167,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  86,
      "End":  171,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  171,
      "End":  84,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  178,
      "End":  180,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  179,
      "End":  181,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  86,
      "End":  178,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  86,
      "End":  179,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  182,
      "End":  159,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  52,
      "End":  183,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  183,
      "End":  57,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  47,
      "End":  184,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  184,
      "End":  48,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  55,
      "End":  56,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  46,
      "End":  131,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  159,
      "End":  47,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  43,
      "End":  185,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  44,
      "End":  186,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  186,
      "End":  45,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  187,
      "End":  188,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  131,
      "End":  190,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  190,
      "End":  38,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  180,
      "End":  191,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  191,
      "End":  38,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  56,
      "End":  199,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  196,
      "End":  197,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  197,
      "End":  198,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  198,
      "End":  200,
      "Nom":  0,
      "Arrow":  true    
    }  
  ],
  "Rect.Text":  
  [
    {
      "Type":  "TGraphRectText",
      "Rect.Left":  221,
      "Rect.Top":  27,
      "Rect.Right":  595,
      "Rect.Bottom":  227,
      "FStyle":  1,
      "FColor":  10710818,
      "BStyle":  0,
      "BColor":  0,
      "BSize":  1,
      "BCoef":  "0.300000011920929",
      "AlignX":  -1,
      "AlignY":  -1,
      "AlignRect":  false,
      "Text":  " Торговая лицензия",
      "Color":  0,
      "Font":  "Arial",
      "FontSize":  10,
      "fsBold":  false,
      "fsItalic":  false,
      "fsUnderline":  false    
    },
    {
      "Type":  "TGraphRectText",
      "Rect.Left":  406,
      "Rect.Top":  326,
      "Rect.Right":  595,
      "Rect.Bottom":  496,
      "FStyle":  1,
      "FColor":  10710818,
      "BStyle":  0,
      "BColor":  0,
      "BSize":  1,
      "BCoef":  "0.300000011920929",
      "AlignX":  0,
      "AlignY":  1,
      "AlignRect":  false,
      "Text":  "Депозит+",
      "Color":  0,
      "Font":  "Arial",
      "FontSize":  10,
      "fsBold":  false,
      "fsItalic":  false,
      "fsUnderline":  false    
    },
    {
      "Type":  "TGraphRectText",
      "Rect.Left":  -328,
      "Rect.Top":  167,
      "Rect.Right":  180,
      "Rect.Bottom":  439,
      "FStyle":  1,
      "FColor":  10710818,
      "BStyle":  0,
      "BColor":  0,
      "BSize":  1,
      "BCoef":  "0.300000011920929",
      "AlignX":  -1,
      "AlignY":  1,
      "AlignRect":  false,
      "Text":  "     Терминал удалённых закупок",
      "Color":  0,
      "Font":  "Arial",
      "FontSize":  10,
      "fsBold":  false,
      "fsItalic":  false,
      "fsUnderline":  false    
    },
    {
      "Type":  "TGraphRectText",
      "Rect.Left":  209,
      "Rect.Top":  468,
      "Rect.Right":  408,
      "Rect.Bottom":  657,
      "FStyle":  1,
      "FColor":  10710818,
      "BStyle":  0,
      "BColor":  0,
      "BSize":  1,
      "BCoef":  "0.300000011920929",
      "AlignX":  0,
      "AlignY":  1,
      "AlignRect":  false,
      "Text":  "Вывод торговых новостей",
      "Color":  0,
      "Font":  "Arial",
      "FontSize":  10,
      "fsBold":  false,
      "fsItalic":  false,
      "fsUnderline":  false    
    },
    {
      "Type":  "TGraphRectText",
      "Rect.Left":  406,
      "Rect.Top":  225,
      "Rect.Right":  595,
      "Rect.Bottom":  328,
      "FStyle":  1,
      "FColor":  10710818,
      "BStyle":  0,
      "BColor":  0,
      "BSize":  1,
      "BCoef":  "0.300000011920929",
      "AlignX":  1,
      "AlignY":  1,
      "AlignRect":  false,
      "Text":  "Кредит+  ",
      "Color":  0,
      "Font":  "Arial",
      "FontSize":  10,
      "fsBold":  false,
      "fsItalic":  false,
      "fsUnderline":  false    
    }  
  ],
  "BlockPar.EC.Total.Strings":  71,
  "BlockPar.EC":  
  [
    {
      "#":  "107",
      "String":  "Также, исходя из вашей репутации опытного торговца, мы хотели бы предложить вам приобрести нашу специальную торговую лицензию, которая не только укрепит ваш статус в деловой среде, но и откроет ряд новых полезных возможностей."    
    },
    {
      "#":  "110",
      "String":  "Все бизнес-центры уничтожены. Ваша <color=255,240,100>торговая лицензия</color> более недействительна."    
    },
    {
      "#":  "112",
      "String":  "<0>"    
    },
    {
      "#":  "115",
      "String":  "И что даёт торговая лицензия?"    
    },
    {
      "#":  "116",
      "String":  "Не интересует"    
    },
    {
      "#":  "117",
      "String":  "Продлить торговую лицензию"    
    },
    {
      "#":  "118",
      "String":  "Решили вновь приобрести у нас торговую лицензию? На этот раз её цена составит полновесные <0> cr."    
    },
    {
      "#":  "119",
      "String":  "Отлично! Я знал, что вы ещё вернётесь к нам за лицензией. Все возвращаются."    
    },
    {
      "#":  "120",
      "String":  "Приобрести вновь"    
    },
    {
      "#":  "121",
      "String":  "Вам же хуже."    
    },
    {
      "#":  "123",
      "String":  "А что это за торговая лицензия?"    
    },
    {
      "#":  "124",
      "String":  "Также мы хотели бы напомнить вам, что вы можете вновь приобрести нашу торговую лицензию, которая ощутимо облегчит вашу деловую жизнь."    
    },
    {
      "#":  "125",
      "String":  "Приобрести торговую лицензию"    
    },
    {
      "#":  "126",
      "String":  "Уговорили"    
    },
    {
      "#":  "127",
      "String":  "Также мы хотели бы обратить ваше внимание на то, что ваша торговая лицензия истекает <0> Настоятельно рекомендуем её продлить, тем более, что продление обойдётся вам значительно дешевле покупки новой лицензии."    
    },
    {
      "#":  "128",
      "String":  "</color>уже <clr>завтра<clrEnd>."    
    },
    {
      "#":  "129",
      "String":  "</color>всего через <clr><0><clrEnd> дн."    
    },
    {
      "#":  "143",
      "String":  "<color=0,50,200>заморожен</color>"    
    },
    {
      "#":  "149",
      "String":  "Ваша <color=255,240,100>торговая лицензия</color> была аннулирована за злостную просрочку по кредиту."    
    },
    {
      "#":  "150",
      "String":  "Отлично! Вы настоящий бизнесмен! Заполните вот эти бланки в трёх экземплярах.<br>И не забудьте продлить лицензию, за месяц до окончания срока."    
    },
    {
      "#":  "151",
      "String":  "Ну что вы, право, будьте ж людьми."    
    },
    {
      "#":  "152",
      "String":  "Ну как же так можно то, стыдно!"    
    },
    {
      "#":  "153",
      "String":  "ДА!"    
    },
    {
      "#":  "154",
      "String":  "Извините, но у меня, кажется, не хватает кредитов"    
    },
    {
      "#":  "155",
      "String":  "В секту \"Святого дуралея\" я вступать не собираюсь, но лицензию всё же возьму"    
    },
    {
      "#":  "156",
      "String":  "Ну как же так можно то, стыдно вдвойне!"    
    },
    {
      "#":  "157",
      "String":  "Как-нибудь в другой раз"    
    },
    {
      "#":  "158",
      "String":  "А я-то думал, что как бывший лицензированный торговец вы должны прекрасно понимать все преимущества этого документа. Видимо, я в вас ошибся...<br>Что ж, желаю и дальше оставаться бывшим, рейнджер <Player>."    
    },
    {
      "#":  "159",
      "String":  "Крайне неразумно с вашей стороны. Срок действия лицензии закончится, и вы всё равно вернётесь к нам за переоформлением, только в тот раз это будет стоить дороже.<br>Приятной вам потери денег, рейнджер <Player>."    
    },
    {
      "#":  "160",
      "String":  "</color><br>Ваш депозитный счёт <color=0,50,200>заморожен</color> до полного погашения задолженности по кредиту."    
    },
    {
      "#":  "161",
      "String":  "Состояние счёта: <0> cr.<br>Годовой процент: <1><br><br>Вы можете пополнять или снимать средства с вашего счёта со стандартной комиссией в <clr>5%<clrEnd>.<br><br>Баланс счёта не может составлять менее <clr>1000<clrEnd> cr. Минимальная сумма пополнения или снятия средств со счёта составляет <clr>100<clrEnd> cr.<br><2><3>"    
    },
    {
      "#":  "165",
      "String":  "<color=0,50,200>Выключить</color> вывод торг. новостей"    
    },
    {
      "#":  "166",
      "String":  "<color=0,50,200>Выключить</color> вывод торговых новостей"    
    },
    {
      "#":  "167",
      "String":  "Включён"    
    },
    {
      "#":  "168",
      "String":  "<color=0,50,200>Включить</color> вывод торг. новостей"    
    },
    {
      "#":  "169",
      "String":  "<color=0,50,200>Включить</color> вывод торговых новостей"    
    },
    {
      "#":  "170",
      "String":  "Выключен"    
    },
    {
      "#":  "178",
      "String":  "Наша сеть старается поддерживать своих клиентов в курсе всех крупных событий делового мира, поэтому мы с радостью предоставим вам удобный гаджет для отслеживания свежих торговых новостей."    
    },
    {
      "#":  "181",
      "String":  "Ваша задолженность: <0> cr.<br>Дата погашения: <1> <clr>г.<clrEnd><br>Осталось дней: <2><br>Количество просрочек: <3><br><br>Здесь вы можете погасить кредитную задолженность на любую оставшуюся сумму с комиссией всего в <clr>5%<clrEnd>.<br><br>Минимальная сумма погашения составляет <clr>100<clrEnd> cr."    
    },
    {
      "#":  "190",
      "String":  "<color=255,240,100>Свежие экономические новости:</color>"    
    },
    {
      "#":  "191",
      "String":  "Здесь вы можете получить доступ к вашему депозитному счёту, погасить кредитную задолженность или, при наличии действующей торговой лицензии, воспользоваться онлайн-терминалом для удалённой закупки товаров."    
    },
    {
      "#":  "192",
      "String":  "Терминал для удалённых закупок"    
    },
    {
      "#":  "194",
      "String":  "Мой депозитный счёт"    
    },
    {
      "#":  "195",
      "String":  "Мой кредитный долг"    
    },
    {
      "#":  "196",
      "String":  ""    
    },
    {
      "#":  "197",
      "String":  "Сообщение из бизнес-центра.<br>Уважаемый <Player>! Срок действия вашей <color=255,240,100>торговой лицензии</color> истекает ровно через три месяца. Если вы не хотите потерять все связанные с ней торговые преимущества, рекомендуем как можно скорее посетить один из наших центров для своевременного <color=255,240,100>продления</color>.<br>Кстати, продление обойдётся вам дешевле оформления новой лицензии, ведь мы искренне заботимся о финансовом благополучии своих клиентов.<br>С уважением, Администрация."    
    },
    {
      "#":  "22",
      "String":  "Увеличивает торговый опыт в зависимости от торгового рейтинга. Действительна до <0>."    
    },
    {
      "#":  "23",
      "String":  "Отказываюсь"    
    },
    {
      "#":  "32",
      "String":  "<br>"    
    },
    {
      "#":  "44",
      "String":  "Снять"    
    },
    {
      "#":  "45",
      "String":  "Сколько снять?"    
    },
    {
      "#":  "46",
      "String":  "Пополнить"    
    },
    {
      "#":  "47",
      "String":  "На сколько пополнить?"    
    },
    {
      "#":  "48",
      "String":  "Назад"    
    },
    {
      "#":  "53",
      "String":  "Подтвердить"    
    },
    {
      "#":  "57",
      "String":  "Выбрать другой тип товара"    
    },
    {
      "#":  "60",
      "String":  "Отлично! И не забудьте продлить лицензию, за месяц до окончания срока."    
    },
    {
      "#":  "64",
      "String":  "Торговая лицензия упрощает передачу данных по совершённым вами сделкам в центры рейнджеров. При этом, повышение в рейтинге происходит более точно, в зависимости от вашего торгового опыта.<br>Всего за <0> cr, сроком на пять лет."    
    },
    {
      "#":  "65",
      "String":  "Цена продления составляет <0> cr. Продлеваем ещё на 5 лет?"    
    },
    {
      "#":  "68",
      "String":  "Если вы желаете более эффективно торговать, то мы предлагаем приобрести торговую лицензию."    
    },
    {
      "#":  "81",
      "String":  "Ваш депозитный счёт успешно аннулирован."    
    },
    {
      "#":  "82",
      "String":  "Вы собираетесь снять со счёта все доступные средства. При этом ваш депозитный счёт будет аннулирован и открыть его снова вы сможете лишь на ближайшем бизнес-центре. Вы уверены, что хотите продолжить?"    
    },
    {
      "#":  "83",
      "String":  "При снятии данной суммы, остаток средств на счёте составит менее 1000 cr. Все счета с остатком менее 1000 cr. автоматически аннулируются, а оставшиеся средства переводятся владельцу со стандартной комиссией в 5%. Вы уверены, что хотите продолжить?"    
    },
    {
      "#":  "84",
      "String":  "</color><br>Снятие со счёта станет вам доступно по истечении <0> дн."    
    },
    {
      "#":  "88",
      "String":  "Погасить кредит"    
    },
    {
      "#":  "89",
      "String":  "Извините, на вашем счету недостаточно средств для оплаты комиссии данного перевода."    
    },
    {
      "#":  "90",
      "String":  "Благодарим вас за своевременное погашение кредита. Надеемся на дальнейшее сотрудничество."    
    },
    {
      "#":  "91",
      "String":  "Извините, на вашем счету недостаточно средств для полного погашения кредита."    
    },
    {
      "#":  "92",
      "String":  "При погашении данной суммы, остаток долга составит менее 100 cr. Оставшаяся сумма автоматически спишется с вашего счёта в долг уплаты кредита, а сам кредит будет полностью погашен. Вы уверены, что хотите продолжить?"    
    },
    {
      "#":  "93",
      "String":  "Какую сумму вы желаете погасить?"    
    },
    {
      "#":  "95",
      "String":  "Новости торговли: <0>"    
    }  
  ]
}