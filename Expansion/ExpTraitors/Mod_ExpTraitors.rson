{
  "FileID":  573785173,
  "FileVersion":  8,
  "ViewPos.x":  -320,
  "ViewPos.y":  -167,
  "ScriptName":  "Mod_ExpTraitors",
  "ScriptFileOut":  "H:\\Mod_ExpTraitors.scr",
  "ScriptTextOut":  "H:\\Mod_ExpTraitors.txt",
  "GraphPoint.Count":  131,
  "GraphLink.Count":  103,
  "GraphRectText.Count":  0,
  "Variables.Count":  24,
  "Stars.Count":  1,
  "Planets.Count":  1,
  "Ships.Count":  1,
  "States.Count":  2,
  "Groups.Count":  2,
  "Places.Count":  0,
  "Items.Count":  0,
  "Ethers.Count":  0,
  "Dialogs.Count":  7,
  "DialogMessages.Count":  24,
  "DialogAnswers.Count":  25,
  "Operations.Count":  22,
  "Statements.Count":  22,
  "Loops.Count":  0,
  "Visual.Objects":  
  [
    {
      "DialogAnswers":      
      [
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  550,
          "Pos.y":  150,
          "Parent":  -1,
          "#":  33,
          "Msg":  "Пора растопить лёд в наших отношениях. Скажите прямо, чего вы хотите!",
          "AMsg.Num":  "0"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  40,
          "Parent":  39,
          "#":  37,
          "Msg":  "Вернуть кредит <PlayerDebt()> cr.",
          "AMsg.Num":  "1"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "block",
          "Pos.x":  0,
          "Pos.y":  40,
          "Parent":  40,
          "#":  38,
          "Msg":  "Вернуть кредит <PlayerDebt()> cr.",
          "AMsg.Num":  "2"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "hangar",
          "Pos.x":  0,
          "Pos.y":  40,
          "Parent":  42,
          "#":  41,
          "Msg":  "Покинуть бизнес-центр",
          "AMsg.Num":  "3"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  550,
          "Pos.y":  210,
          "Parent":  -1,
          "#":  45,
          "Msg":  "Хорошо, в таком случае я надеюсь, что эти <RuinBribe> cr. послужат процветанию рейнджерского движения!",
          "AMsg.Num":  "4"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  570,
          "Pos.y":  210,
          "Parent":  -1,
          "#":  47,
          "Msg":  "Боюсь, что такой взнос для меня великоват",
          "AMsg.Num":  "5"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "exit",
          "Pos.x":  550,
          "Pos.y":  270,
          "Parent":  -1,
          "#":  50,
          "Msg":  "",
          "AMsg.Num":  "6"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  125,
          "#":  55,
          "Msg":  "Пора растопить лёд в наших отношениях. Скажите прямо, чего вы хотите!",
          "AMsg.Num":  "7"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  59,
          "#":  58,
          "Msg":  "Хорошо, в таком случае я надеюсь, что эти <RuinBribe> cr. достойно послужат делу мира и процветания твоей продажной задницы! Счетовод ты грёбаный!",
          "AMsg.Num":  "8"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  60,
          "#":  63,
          "Msg":  "Боюсь, что такой взнос для меня великоват",
          "AMsg.Num":  "9"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "exit",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  61,
          "#":  65,
          "Msg":  "",
          "AMsg.Num":  "10"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  126,
          "#":  66,
          "Msg":  "Пора растопить лёд в наших отношениях. Скажите прямо, чего вы хотите!",
          "AMsg.Num":  "11"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  68,
          "#":  70,
          "Msg":  "Хорошо, в таком случае я надеюсь, что эти <RuinBribe> cr. поспособствуют скорейшему возобновлению наших дружеских отношений!",
          "AMsg.Num":  "12"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  69,
          "#":  71,
          "Msg":  "Боюсь, что такой взнос для меня великоват",
          "AMsg.Num":  "13"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "exit",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  73,
          "#":  74,
          "Msg":  "",
          "AMsg.Num":  "14"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  600,
          "Pos.y":  150,
          "Parent":  -1,
          "#":  76,
          "Msg":  "Пора растопить лёд в наших отношениях. Скажите прямо, чего вы хотите!",
          "AMsg.Num":  "15"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  620,
          "Pos.y":  210,
          "Parent":  -1,
          "#":  80,
          "Msg":  "Боюсь, что такой взнос для меня великоват",
          "AMsg.Num":  "16"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  600,
          "Pos.y":  210,
          "Parent":  -1,
          "#":  81,
          "Msg":  "Да, вполне устроит. Перевожу <RuinBribe> cr. на ваш счёт прямо сейчас.",
          "AMsg.Num":  "17"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "exit",
          "Pos.x":  600,
          "Pos.y":  270,
          "Parent":  -1,
          "#":  85,
          "Msg":  "",
          "AMsg.Num":  "18"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  490,
          "Pos.y":  150,
          "Parent":  -1,
          "#":  86,
          "Msg":  "Слушай, ну может уж как-нибудь договоримся по-братски, а?",
          "AMsg.Num":  "19"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "hangar",
          "Pos.x":  520,
          "Pos.y":  150,
          "Parent":  -1,
          "#":  88,
          "Msg":  "Уже ухожу",
          "AMsg.Num":  "20"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  490,
          "Pos.y":  210,
          "Parent":  -1,
          "#":  91,
          "Msg":  "Каюсь - тварь я дрожащая! Вот ваши <RuinBribe> cr., а братанов больше обижать не буду",
          "AMsg.Num":  "21"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "",
          "Pos.x":  520,
          "Pos.y":  210,
          "Parent":  -1,
          "#":  92,
          "Msg":  "Боюсь, что такой взнос для меня великоват",
          "AMsg.Num":  "22"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "hangar",
          "Pos.x":  460,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  102,
          "Msg":  "Ладно, уже свалил",
          "AMsg.Num":  "23"        
        },
        {
          "Type":  "TDialogAnswer",
          "Name":  "exit",
          "Pos.x":  490,
          "Pos.y":  270,
          "Parent":  -1,
          "#":  128,
          "Msg":  "",
          "AMsg.Num":  "24"        
        }      
      ],
      "DialogMessages":      
      [
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  410,
          "Pos.y":  110,
          "Parent":  -1,
          "#":  14,
          "Msg":  "<Player>, а ты ничего не попутал часом? Топал бы лучше отседа, пока братки не прочухали! У нас тут несчастные случаи, знаешь, случаются с теми, кто авторитет клана признавать отказывается.",
          "DMsg.Num":  "0"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  460,
          "Pos.y":  110,
          "Parent":  -1,
          "#":  17,
          "Msg":  "Вах, да вы только поглядите! Это какого же интересного рейнджера к нам тут звёздным ветром занесло!\r\nЧто, <Player>, попал ты в чёрный список? Да вижу, что попал - не отнекивайся. Ну и что, так прям сразу и решил \"на родные берега\" якорь закинуть? Думал, что свои прикроют? Что свои своим всегда рады?\r\nТак вот знай - не братаны мы тебе больше, понял!!? Вымётывайся отсюда, гнида сраколицая, пока собственными сапогами тебя в мусорный шлюз не затолкал!!!",
          "DMsg.Num":  "1"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  520,
          "Pos.y":  110,
          "Parent":  -1,
          "#":  28,
          "Msg":  "Что?!! Проклятый пират, да кто тебе вообще позволил загнать корабль в наши доки!?\r\nА ну быстро развернул своё ведро и пулей отсюда, пока я не приказал отправить тебя под военный трибунал!!!",
          "DMsg.Num":  "2"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  570,
          "Pos.y":  110,
          "Parent":  -1,
          "#":  29,
          "Msg":  "Рейнджер <Player>, сеть наших центров крайне разочарована вашим поведением. Вы позорите не только себя, но само благородное имя рейнджера!\r\nДо тех пор, пока вы не измените своё поведение в лучшую сторону, мы решительно не намерены терпеть здесь ваше присутствие. Немедленно покиньте эту станцию. В противном случае мы будем вынуждены применить силу!",
          "DMsg.Num":  "3"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  620,
          "Pos.y":  110,
          "Parent":  -1,
          "#":  30,
          "Msg":  "Рейнджер <Player>, ваше поведение было признано неприемлемым, а ваше присутствие на нашей станции - нежелательным.\r\nПожалуйста, покиньте научную базу <ShipName(GetShipRuins(Player()))>, и воздержитесь от её дальнейшего посещения до тех пор, пока не восстановите репутацию благонадёжного гуманоида.",
          "DMsg.Num":  "4"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  36,
          "#":  31,
          "Msg":  "Извините, <Player>, но не в наших интересах в открытую вести дела с преступниками. Плохо влияет на репутацию, знаете ли.\r\nСамо собой, кредитный долг за вами всё ещё числится, а потому мы любезно позволим вам его погасить, однако сразу же после - настоятельно просим проследовать на выход.",
          "DMsg.Num":  "5"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  40,
          "Parent":  27,
          "#":  32,
          "Msg":  "Рейнджер <Player>, на нашей станции вы являетесь крайне нежелательным гостем. Вся ваша репутация буквально кричит о том, что вести с вами какие бы то ни было дела себе дороже.\r\nРуководствуясь данными соображениями, мы вынуждены просить вас покинуть наши скромные доки. Прямо сейчас!",
          "DMsg.Num":  "6"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  -30,
          "Pos.y":  20,
          "Parent":  35,
          "#":  34,
          "Msg":  "Извините, <Player>, но не в наших интересах в открытую вести дела с преступниками. Плохо влияет на репутацию, знаете ли.\r\nВозвращайтесь, когда станете законопослушным рейнджером, ну а пока - настоятельно просим вас покинуть наш бизнес-центр.",
          "DMsg.Num":  "7"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  550,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  43,
          "Msg":  "Что ж, в качестве залога за ваше будущее исправление, мы могли бы принять скромный взнос в размере <RuinBribe> cr.\r\nЭти средства будут пущены на поощрение деятельности других рейнджеров, что поможет хотя бы частично загладить вашу вину перед коллегами.",
          "DMsg.Num":  "8"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  570,
          "Pos.y":  250,
          "Parent":  -1,
          "#":  44,
          "Msg":  "Ну, в таком случае разговаривать нам больше не о чем. Покиньте эту станцию и найдите способ исправить вашу репутацию более показательным путём.",
          "DMsg.Num":  "9"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  550,
          "Pos.y":  250,
          "Parent":  -1,
          "#":  49,
          "Msg":  "Взнос принят, однако не питайте иллюзий, <Player>. Деньги - плата лишь символическая.\r\nНастоящее исправление ждёт вас впереди. Идите, и докажите Галактике, что мы не ошиблись, выдав вам этот рейнджерский значок.",
          "DMsg.Num":  "10"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  -40,
          "Parent":  53,
          "#":  54,
          "Msg":  "Отлично, <Player>! Вы, безусловно, рейнджер слова.\r\nК сожалению, о дальнейшем сотрудничестве в данный момент не может идти и речи, но мы искренне желаем вам удачи в вашем нелёгком... деле. Выход вон там.",
          "DMsg.Num":  "11"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  55,
          "#":  57,
          "Msg":  "Ну а сами вы как думаете, находясь в кабинете управляющего одного из галактических бизнес-центров?\r\nДаю подсказку - это число, и число это, так уж вышло, кратно цифре <RuinBribe>. ЕДИНО-кратно, если быть совсем точным. Я всё-таки бизнесмен, а не грабитель.",
          "DMsg.Num":  "12"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  62,
          "#":  61,
          "Msg":  "А вы не слишком-то хороши в деловых переговорах, не так ли? Ладно, принимаю ваше скромное благотворительное пожертвование на содержание наших, скажем... аквариумов с вымирающим видом рахишского квагляшмыга.\r\nНу вот, теперь на всю ближайшую неделю вы внесены в список наших добровольных спонсоров, а значит, имеете право приоритетного обслуживания вне зависимости от вашей текущей репутации.\r\nТак чем я могу помочь вам, уважаемый спонсор?",
          "DMsg.Num":  "13"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  20,
          "Pos.y":  0,
          "Parent":  63,
          "#":  64,
          "Msg":  "В таком случае я боюсь, что ничем не могу вам помочь.\r\nПопрошу проследовать на выход, и постарайтесь по пути не слишком сильно хлопать дверью из гаалдокского мраморного дерева. Дверь, между прочим, была куплена на добровольное пожертвование одного вашего предшественника, который прямо сейчас бороздит просторы вселенной на новёхоньком корабле, приобретённом на предоставленный НАМИ кредит.\r\nПросто подумайте об этом, рейнджер <Player>.",
          "DMsg.Num":  "14"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  66,
          "#":  67,
          "Msg":  "Ну, думаю, что за разумную цену мы могли бы временно закрыть глаза на вашу очевидную неблагонадёжность.\r\nСкажем, <RuinBribe> cr. По рукам?",
          "DMsg.Num":  "15"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  72,
          "#":  73,
          "Msg":  "Не сомневайтесь, <Player>! Отныне вы снова в белом списке и вольны вести любую не запрещённую законом деятельность.\r\nКстати, ваших денег нам как раз хватит на проведение планового техобслуживания станции, так что, от имени всех недовольных сломанными кондиционерами сотрудников, позвольте выразить вам особую, персональную благодарность.",
          "DMsg.Num":  "16"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  80,
          "Parent":  101,
          "#":  75,
          "Msg":  "Очень жаль, но вы сами втянули себя в эти неприятности. Если цена исправления репутации вам не подходит, то рекомендуем провести самостоятельную и честную \"работу над ошибками\", после которой мы будем рады возобновить наше плодотворное сотрудничество.\r\nДо тех же пор я вынужден требовать вас покинуть этот технологический центр.",
          "DMsg.Num":  "17"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  620,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  77,
          "Msg":  "Что ж, ваши прегрешения перед разумной и ответственной формой поведения бесспорны, и с этим мы поделать ничего не сможем. Однако, в качестве частичной компенсации причинённого вами вреда, мы могли бы взыскать с вас штраф в размере <RuinBribe> cr., который будет незамедлительно пущен на благие цели.\r\nУстроит вас такой компромисс?",
          "DMsg.Num":  "18"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  600,
          "Pos.y":  250,
          "Parent":  -1,
          "#":  83,
          "Msg":  "Я рад, что мы смогли найти общий язык, <Player>. Все ограничения вашей деятельности на нашей базе полностью сняты.\r\nОчень надеемся, что впредь вы будете воздерживаться от столь вопиющего нарушения общественных норм.",
          "DMsg.Num":  "19"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  620,
          "Pos.y":  250,
          "Parent":  -1,
          "#":  84,
          "Msg":  "Что ж, очень жаль, но никак иначе поспособствовать вашему исправлению мы не можем. Желаем вам удачи в поисках искупления где-нибудь в другом месте.\r\nА теперь, если вы не против, настоятельно просим вас проследовать в направлении выхода.",
          "DMsg.Num":  "20"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  490,
          "Pos.y":  170,
          "Parent":  -1,
          "#":  87,
          "Msg":  "Ага, значит, как по беспределу парней валить, так это ты первый, а как за поступки отвечать, так: \"Ну пожалуйста, ну по-братски, ня-ня-ня...\" - так что ли?!\r\nВот что я тебе скажу, <Player> - паршивый ты <TempRace>. Паршивый и жалкий. Блеванул бы тебе под ноги, да после вчерашнего пойла нечем больше. Однако даже таким личностям как ты братство в нужде не отказывает. Не забесплатно правда.\r\nКороче, сумму в <RuinBribe> cr. в общак гони - и на эту твою гниль мы пока что глаза прикроем.",
          "DMsg.Num":  "21"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  490,
          "Pos.y":  250,
          "Parent":  -1,
          "#":  94,
          "Msg":  "Ну ладно, так уж и быть - гуляй, рванина! Хоть пацаны за твой счёт попируют как следует.\r\nТак что ты там хотел на базе-то? Говори - теперь уж никто не укусит, хе-хе.",
          "DMsg.Num":  "22"        
        },
        {
          "Type":  "TDialogMsg",
          "Name":  "",
          "Pos.x":  520,
          "Pos.y":  250,
          "Parent":  -1,
          "#":  95,
          "Msg":  "Лучше смотри, как бы тебе собственный череп не стал великоват! А то мы с братанами, если чё, и подправить можем.",
          "DMsg.Num":  "23"        
        }      
      ],
      "Dialogs":      
      [
        {
          "Type":  "TDialog",
          "Name":  "PB",
          "Pos.x":  410,
          "Pos.y":  40,
          "Parent":  -1,
          "#":  12        
        },
        {
          "Type":  "TDialog",
          "Name":  "CB",
          "Pos.x":  460,
          "Pos.y":  40,
          "Parent":  -1,
          "#":  13        
        },
        {
          "Type":  "TDialog",
          "Name":  "WB",
          "Pos.x":  520,
          "Pos.y":  40,
          "Parent":  -1,
          "#":  18        
        },
        {
          "Type":  "TDialog",
          "Name":  "RC",
          "Pos.x":  570,
          "Pos.y":  40,
          "Parent":  -1,
          "#":  19        
        },
        {
          "Type":  "TDialog",
          "Name":  "SB",
          "Pos.x":  620,
          "Pos.y":  40,
          "Parent":  -1,
          "#":  20        
        },
        {
          "Type":  "TDialog",
          "Name":  "BK",
          "Pos.x":  700,
          "Pos.y":  40,
          "Parent":  -1,
          "#":  21        
        },
        {
          "Type":  "TDialog",
          "Name":  "TC",
          "Pos.x":  850,
          "Pos.y":  40,
          "Parent":  -1,
          "#":  22        
        }      
      ],
      "Groups":      
      [
        {
          "Type":  "TGroup",
          "Name":  "PlayerGroup",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  2,
          "#":  3,
          "Owner":  62,
          "Group.Type":  126,
          "CntShipMin":  1,
          "CntShipMax":  1,
          "SpeedMin":  100,
          "SpeedMax":  10000,
          "Weapon":  0,
          "CargoHook":  0,
          "EmptySpace":  0,
          "AddPlayer":  true,
          "StatusTraderMin":  0,
          "StatusTraderMax":  100,
          "StatusWarriorMin":  0,
          "StatusWarriorMax":  100,
          "StatusPirateMin":  0,
          "StatusPirateMax":  100,
          "DistSearch":  10000,
          "Dialog":  -1,
          "StrengthMin":  "0",
          "StrengthMax":  "0",
          "Ruins":  ""        
        },
        {
          "Type":  "TGroup",
          "Name":  "Traitors",
          "Pos.x":  -120,
          "Pos.y":  20,
          "Parent":  2,
          "#":  9,
          "Owner":  62,
          "Group.Type":  126,
          "CntShipMin":  0,
          "CntShipMax":  0,
          "SpeedMin":  100,
          "SpeedMax":  10000,
          "Weapon":  0,
          "CargoHook":  0,
          "EmptySpace":  0,
          "AddPlayer":  false,
          "StatusTraderMin":  0,
          "StatusTraderMax":  100,
          "StatusWarriorMin":  0,
          "StatusWarriorMax":  100,
          "StatusPirateMin":  0,
          "StatusPirateMax":  100,
          "DistSearch":  10000,
          "Dialog":  -1,
          "StrengthMin":  "0",
          "StrengthMax":  "0",
          "Ruins":  ""        
        }      
      ],
      "Operations":      
      [
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  30,
          "Pos.y":  0,
          "Parent":  0,
          "#":  5,
          "Total.Lines":  1,
          "Code.Type":  "Global",
          "Code":          
          [
              "GRun();"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  20,
          "Pos.y":  0,
          "Parent":  5,
          "#":  6,
          "Total.Lines":  270,
          "Code.Type":  "Init",
          "Code":          
          [
              "//Записываем номера Тортугаца и Нифигаца (для удобной читаемости в коде)",
              "TortugatzId = 70;",
              "NifigatzId = 71;",
              "",
              "MoneyGoes = -1;",
              "",
              "//Инфошка для ловли момента выхода игрока из тюрьмы, проверяется из диалогового кода",
              "ShipAddCustomShipInfo(Player(), 'ExpTraitors_RuinsRelationsControl', 'NoShow', -1);",
              "",
              "//Объявляем массив с лимитными значениями отношения различных станций к игроку,",
              "//а также массив, используемый для заполнения аргументов вызова функции ChangeRuinsRelationToPlayer",
              "DeclareExpTraitorsSpecialArrays();",
              "function DeclareExpTraitorsSpecialArrays()",
              "{",
              "    RuinsRelationLimits = newarray(1);",
              "    ArrayDelete(RuinsRelationLimits, 0);",
              "    unknown t_array = newarray(1);",
              "    ArrayDelete(t_array, 0);",
              "    ArrayAdd(t_array, 0, 'Min');",
              "    ArrayAdd(t_array, 0, 'Max');",
              "    ArrayAdd(RuinsRelationLimits, t_array, 'SB');",
              "    t_array = newarray(1);",
              "    ArrayDelete(t_array, 0);",
              "    ArrayAdd(t_array, 0, 'Min');",
              "    ArrayAdd(t_array, 0, 'Max');",
              "    ArrayAdd(RuinsRelationLimits, t_array, 'RC');",
              "    t_array = newarray(1);",
              "    ArrayDelete(t_array, 0);",
              "    ArrayAdd(t_array, 0, 'Min');",
              "    ArrayAdd(t_array, 0, 'Max');",
              "    ArrayAdd(RuinsRelationLimits, t_array, 'WB');",
              "    t_array = newarray(1);",
              "    ArrayDelete(t_array, 0);",
              "    ArrayAdd(t_array, 0, 'Min');",
              "    ArrayAdd(t_array, 0, 'Max');",
              "    ArrayAdd(RuinsRelationLimits, t_array, 'BK');",
              "    t_array = newarray(1);",
              "    ArrayDelete(t_array, 0);",
              "    ArrayAdd(t_array, 0, 'Min');",
              "    ArrayAdd(t_array, 0, 'Max');",
              "    ArrayAdd(RuinsRelationLimits, t_array, 'MC');",
              "    t_array = newarray(1);",
              "    ArrayDelete(t_array, 0);",
              "    ArrayAdd(t_array, 0, 'Min');",
              "    ArrayAdd(t_array, 0, 'Max');",
              "    ArrayAdd(RuinsRelationLimits, t_array, 'TC');",
              "    t_array = newarray(1);",
              "    ArrayDelete(t_array, 0);",
              "    ArrayAdd(t_array, 0, 'Min');",
              "    ArrayAdd(t_array, 0, 'Max');",
              "    ArrayAdd(RuinsRelationLimits, t_array, 'PB');",
              "    t_array = newarray(1);",
              "    ArrayDelete(t_array, 0);",
              "    ArrayAdd(t_array, 0, 'Min');",
              "    ArrayAdd(t_array, 0, 'Max');",
              "    ArrayAdd(RuinsRelationLimits, t_array, 'CB');",
              "    t_array = newarray(1); //Переобъявляем массив для \"открепления\" адреса переменной от прошлого объекта массива (иначе будет обнулён записанный выше элемент массива)",
              "",
              "    ChangeRuinsRelationFunFiller = newarray(1);",
              "    ArrayDelete(ChangeRuinsRelationFunFiller, 0);",
              "    ArrayAdd(ChangeRuinsRelationFunFiller,   0, 'ChangeRuinsRelationToPlayerCallMark'); //Выставить это на 1 для вызова функции смены отношения станций их другого скрипта",
              "    ArrayAdd(ChangeRuinsRelationFunFiller,   0, 'GlobalVariableRelation'); //Меняет отношение всех станций в Галактике на указанное значение, где плюсовое значение даст плюс к отношению коалиционных станций и одновременно минус к отношению пиратских станций, и наоборот",
              "    ArrayAdd(ChangeRuinsRelationFunFiller,   0, 'GlobalRelationForAll'); //Меняет отношение вообще всех станций в Галактике на указанное значение",
              "    ArrayAdd(ChangeRuinsRelationFunFiller,   0, 'LocalVariableRelation'); //Меняет отношение всех станций неподалёку от текущего местоположения игрока на указанное значение, где плюсовое значение даст плюс к отношению коалиционных станций и одновременно минус к отношению пиратских станций, и наоборот",
              "    ArrayAdd(ChangeRuinsRelationFunFiller,   0, 'LocalRelationForAll'); //Меняет отношение вообще всех станций неподалёку от текущего местоположения игрока на указанное значение, где плюсовое даст плюс к отношению коалиционных станций и одновременно минус к отношению пиратских станций, и наоборот",
              "    ArrayAdd(ChangeRuinsRelationFunFiller,   0, 'GlobalRelationForCoalition'); //Меняет отношение всех коалиционных станций в Галактике на указанное значение",
              "    ArrayAdd(ChangeRuinsRelationFunFiller,   0, 'GlobalRelationForPirateClan'); //Меняет отношение всех пиратских станций в Галактике на указанное значение",
              "    ArrayAdd(ChangeRuinsRelationFunFiller,  10, 'CoalitionMinLimitRelation');",
              "    ArrayAdd(ChangeRuinsRelationFunFiller, 100, 'CoalitionMaxLimitRelation');",
              "    ArrayAdd(ChangeRuinsRelationFunFiller,  10, 'PirateClanMinLimitRelation');",
              "    ArrayAdd(ChangeRuinsRelationFunFiller, 100, 'PirateClanMaxLimitRelation');",
              "}",
              "",
              "//Производим стартовое заполнение массива с лимитами отношений станций к игроку",
              "if(ShipOwner(Player()) != PirateClan)",
              "{",
              "    RuinsRelationLimits['SB', 'Min'] = 10; //Научная база",
              "    RuinsRelationLimits['SB', 'Max'] = 100;",
              "    RuinsRelationLimits['RC', 'Min'] = 10; //Центр рейнджеров",
              "    RuinsRelationLimits['RC', 'Max'] = 100;",
              "    RuinsRelationLimits['WB', 'Min'] = 10; //Военная база",
              "    if(ShipRank(Player()) < 5) RuinsRelationLimits['WB', 'Max'] = 79;",
              "    else RuinsRelationLimits['WB', 'Max'] = 100; //Военное звание не ниже аса",
              "    RuinsRelationLimits['BK', 'Min'] = 10; //Бизнес-центр",
              "    RuinsRelationLimits['BK', 'Max'] = 100;",
              "    RuinsRelationLimits['MC', 'Min'] = 50; //Медицинский центр",
              "    RuinsRelationLimits['MC', 'Max'] = 100;",
              "    RuinsRelationLimits['TC', 'Min'] = 10; //Технологический центр",
              "    RuinsRelationLimits['TC', 'Max'] = 100;",
              "",
              "    RuinsRelationLimits['PB', 'Min'] = 10; //Пиратская база",
              "    RuinsRelationLimits['PB', 'Max'] = 50;",
              "    RuinsRelationLimits['CB', 'Min'] = 10; //Доминион",
              "    RuinsRelationLimits['CB', 'Max'] = 50;",
              "}",
              "else",
              "{",
              "    RuinsRelationLimits['SB', 'Min'] = 10; //Научная база",
              "    RuinsRelationLimits['SB', 'Max'] = 50;",
              "    RuinsRelationLimits['RC', 'Min'] = 10; //Центр рейнджеров",
              "    RuinsRelationLimits['RC', 'Max'] = 50;",
              "    RuinsRelationLimits['WB', 'Min'] = 10; //Военная база",
              "    RuinsRelationLimits['WB', 'Max'] = 10;",
              "    RuinsRelationLimits['BK', 'Min'] = 10; //Бизнес-центр",
              "    RuinsRelationLimits['BK', 'Max'] = 100;",
              "    RuinsRelationLimits['MC', 'Min'] = 30; //Медицинский центр",
              "    RuinsRelationLimits['MC', 'Max'] = 79;",
              "    RuinsRelationLimits['TC', 'Min'] = 10; //Технологический центр",
              "    RuinsRelationLimits['TC', 'Max'] = 79;",
              "",
              "    RuinsRelationLimits['PB', 'Min'] = 10; //Пиратская база",
              "    RuinsRelationLimits['PB', 'Max'] = 100;",
              "    RuinsRelationLimits['CB', 'Min'] = 10; //Доминион",
              "    if(GetShipPirateRank(Player()) < 5) RuinsRelationLimits['CB', 'Max'] = 79;",
              "    else RuinsRelationLimits['CB', 'Max'] = 100; //Пиратское звание не ниже атамана",
              "}",
              "",
              "//Напоминалка, как вызывается эта функция для других скриптов:",
              "//ChangeRuinsRelationToPlayer(ChangeRuinsRelationFunFiller['GlobalVariableRelation'],      ChangeRuinsRelationFunFiller['GlobalRelationForAll'],",
              "//                              ChangeRuinsRelationFunFiller['LocalVariableRelation'],       ChangeRuinsRelationFunFiller['LocalRelationForAll'],",
              "//                              ChangeRuinsRelationFunFiller['GlobalRelationForCoalition'],  ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan'],",
              "//                              ChangeRuinsRelationFunFiller['CoalitionMinLimitRelation'],   ChangeRuinsRelationFunFiller['CoalitionMaxLimitRelation'],",
              "//                              ChangeRuinsRelationFunFiller['PirateClanMinLimitRelation'],  ChangeRuinsRelationFunFiller['PirateClanMaxLimitRelation']);",
              "",
              "//Со старта скрипта выставляем отношение всех станций на максимально возможный (для текущего состояния игрока) уровень",
              "ChangeRuinsRelationToPlayer(0, 100);",
              "function ChangeRuinsRelationToPlayer(int global_rel = 0,       int global_rel_for_all = 0,",
              "                                     int local_rel = 0,        int local_rel_for_all = 0,",
              "                                     int global_coal_rel = 0,  int global_pirate_rel = 0,",
              "                                     int coal_rel_min = 10,    int coal_rel_max = 100,",
              "                                     int pirate_rel_min = 10,  int pirate_rel_max = 100)",
              "{",
              "    unknown fun_arr = newarray(1);",
              "    int i = BuildListOfNewShips(fun_arr, 0, 64+128+256+512+1024+2048+4096+8192, 1+2+4+8+16+128, 1, '', ',TC');",
              "    if(i)",
              "    {",
              "        //Определяем систему и предельную дистанцию удалённости от неё только в случае, если необходимо менять репутацию с модификатором радиуса",
              "        int max_dist = 0;",
              "        if(local_rel || local_rel_for_all)",
              "        {",
              "            dword cur_star = ShipStar(Player());",
              "            max_dist = Dist2Star(cur_star, StarNearbyStars(cur_star, GalaxyStars() - 1));",
              "        }",
              "        int warrior_status = ShipStatus(Player(), 2);",
              "        int pirate_status = ShipStatus(Player(), 1);",
              "",
              "        for(i = 0; i < ArrayDim(fun_arr); i = i + 1)",
              "        {",
              "            cur_ruin = fun_arr[i];",
              "",
              "            //Если меняется глобальная репутация, то эффект будет действовать на станцию независимо от её удалённости от игрока",
              "            int rel_change = global_rel;",
              "            int rel_change_for_all = global_rel_for_all;",
              "",
              "            //Если меняется локальная репутация, то эффект будет тем слабее, чем дальше станция находится от игрока (в парсеках)",
              "            if(max_dist)",
              "            {",
              "                dword ruin_star = ShipStar(cur_ruin);",
              "                float rel_mod = PortionInDiapason(Dist2Star(cur_star, ruin_star), 0, max_dist, 1.0, 0.1); //В ваниле значения модификатора почему-то от 0.5 до 0.05",
              "",
              "                rel_change = rel_change + round(rel_mod * local_rel);",
              "                rel_change_for_all = rel_change_for_all + round(rel_mod * local_rel_for_all);",
              "            }",
              "",
              "            str cur_ruin_type = ShipType(cur_ruin);",
              "            //Если станция поддерживает клан, то отнимаем rel_change от отношения",
              "            if(cur_ruin_type == 'PB' ||",
              "               cur_ruin_type == 'CB')",
              "            {",
              "                //Если игрок сильно геройствует, даже состоя при этом в клане, то максимальное отношение к нему пиратских станций всё равно будет снижаться",
              "                int ruin_rel_max = min(PortionInDiapason(warrior_status, 50, 100, 100, 50), RuinsRelationLimits[cur_ruin_type, 'Max']);",
              "                RelationToRanger(cur_ruin, Player(), min(max(RelationToRanger(cur_ruin, Player()) - rel_change + rel_change_for_all + global_pirate_rel, RuinsRelationLimits[cur_ruin_type, 'Min'], pirate_rel_min), ruin_rel_max, pirate_rel_max));",
              "            }",
              "            //Если же станция поддерживает Коалицию, то прибавляем к отношению rel_change",
              "            //else if(cur_ruin_type == 'RC' ||",
              "            //        cur_ruin_type == 'WB' ||",
              "            //        cur_ruin_type == 'SB' ||",
              "            //        cur_ruin_type == 'BK' ||",
              "            //        cur_ruin_type == 'MC' ||",
              "            //        cur_ruin_type == 'TC')",
              "            else",
              "            {",
              "                //Если игрок сильно пиратит, даже не состоя при этом в клане, то максимальное отношение к нему коалиционных станций всё равно будет снижаться",
              "                ruin_rel_max = min(PortionInDiapason(pirate_status, 50, 100, 100, 50), RuinsRelationLimits[cur_ruin_type, 'Max']);",
              "                RelationToRanger(cur_ruin, Player(), min(max(RelationToRanger(cur_ruin, Player()) + rel_change + rel_change_for_all + global_coal_rel, RuinsRelationLimits[cur_ruin_type, 'Min'], coal_rel_min), ruin_rel_max, coal_rel_max));",
              "                //Пока игрок состоит в клане, никакие смены отношения не смогут разблокировать ему доступ на ВБ",
              "                if(ShipOwner(Player()) == PirateClan)",
              "                {",
              "                    if(cur_ruin_type == 'WB') RelationToRanger(cur_ruin, Player(), 10);",
              "                }",
              "            }",
              "        }",
              "    }",
              "}",
              "",
              "function PlayerActCode() //t_OnEnteringForm",
              "{",
              "    //Если игрок вступил/покинул пиратский клан (данные проверки дублируются в диалоге)",
              "    if(ShipOwner(Player()) != PirateClan)",
              "    {",
              "        //Игрок покинул клан",
              "        if(ShipType(Player()) == 'RangerPiratePlayer')",
              "        {",
              "            //Меняем имя типа игрока (меняет названия характеров и приставку к имени)",
              "            ShipType(Player(), 'Ranger');",
              "",
              "            //Возвращаем игрока в рейтинг рейнджеров",
              "            RangerExcludedFromRating(Player(), 0);",
              "",
              "            //Меняем лимиты отношения станций к игроку",
              "            RuinsRelationLimits['SB', 'Min'] = 10; //Научная база",
              "            RuinsRelationLimits['SB', 'Max'] = 100;",
              "            RuinsRelationLimits['RC', 'Min'] = 10; //Центр рейнджеров",
              "            RuinsRelationLimits['RC', 'Max'] = 100;",
              "            RuinsRelationLimits['WB', 'Min'] = 10; //Военная база",
              "            if(ShipRank(Player()) < 5) RuinsRelationLimits['WB', 'Max'] = 79;",
              "            else RuinsRelationLimits['WB', 'Max'] = 100; //Военное звание не ниже аса",
              "            RuinsRelationLimits['BK', 'Min'] = 10; //Бизнес-центр",
              "            RuinsRelationLimits['BK', 'Max'] = 100;",
              "            RuinsRelationLimits['MC', 'Min'] = 50; //Медицинский центр",
              "            RuinsRelationLimits['MC', 'Max'] = 100;",
              "            RuinsRelationLimits['TC', 'Min'] = 10; //Технологический центр",
              "            RuinsRelationLimits['TC', 'Max'] = 100;",
              "",
              "            RuinsRelationLimits['PB', 'Min'] = 10; //Пиратская база",
              "            RuinsRelationLimits['PB', 'Max'] = 50;",
              "            RuinsRelationLimits['CB', 'Min'] = 10; //Доминион",
              "            RuinsRelationLimits['CB', 'Max'] = 50;",
              "",
              "            //Также сразу меняем отношение к игроку для всех станций",
              "            ChangeRuinsRelationToPlayer(0, 0, 0, 0, 0, 0, 55, 100, 10, 35);",
              "            //RelationToRanger(cur_ruin, Player(), 30); //При этом отношение ПБ, на которой в данный момент сидит игрок, не должно опуститься до \"плохого\"",
              "        }",
              "    }",
              "    else",
              "    {",
              "        //Игрок вступил в клан",
              "        if(ShipType(Player()) != 'RangerPiratePlayer')",
              "        {",
              "            //Меняем имя типа игрока (меняет названия характеров и приставку к имени)",
              "            ShipType(Player(), 'RangerPiratePlayer');",
              "",
              "            //Если подключен мод EvoFreeInflation, то исключаем игрока из списка рейнджеров",
              "            if(CurrentMods('Evolution\\EvoFreeInflation')) RangerExcludedFromRating(Player(), 1);",
              "",
              "            //Меняем лимиты отношения станций к игроку",
              "            RuinsRelationLimits['SB', 'Min'] = 10; //Научная база",
              "            RuinsRelationLimits['SB', 'Max'] = 50;",
              "            RuinsRelationLimits['RC', 'Min'] = 10; //Центр рейнджеров",
              "            RuinsRelationLimits['RC', 'Max'] = 50;",
              "            RuinsRelationLimits['WB', 'Min'] = 10; //Военная база",
              "            RuinsRelationLimits['WB', 'Max'] = 10;",
              "            RuinsRelationLimits['BK', 'Min'] = 10; //Бизнес-центр",
              "            RuinsRelationLimits['BK', 'Max'] = 100;",
              "            RuinsRelationLimits['MC', 'Min'] = 30; //Медицинский центр",
              "            RuinsRelationLimits['MC', 'Max'] = 79;",
              "            RuinsRelationLimits['TC', 'Min'] = 10; //Технологический центр",
              "            RuinsRelationLimits['TC', 'Max'] = 79;",
              "",
              "            RuinsRelationLimits['PB', 'Min'] = 10; //Пиратская база",
              "            RuinsRelationLimits['PB', 'Max'] = 100;",
              "            RuinsRelationLimits['CB', 'Min'] = 10; //Доминион",
              "            if(GetShipPirateRank(Player()) < 5) RuinsRelationLimits['CB', 'Max'] = 79;",
              "            else RuinsRelationLimits['CB', 'Max'] = 100; //Пиратское звание не ниже атамана",
              "",
              "            //Также сразу меняем отношение к игроку для всех станций",
              "            ChangeRuinsRelationToPlayer(0, 0, 0, 0, 0, 0, 10, 35, 55, 100);",
              "        }",
              "    }",
              "}"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  410,
          "Pos.y":  70,
          "Parent":  -1,
          "#":  15,
          "Total.Lines":  8,
          "Code.Type":  "Turn",
          "Code":          
          [
              "SkipGreeting();",
              "if(!ShipPilotRace(Player())) TempRace = \"</color>малок\";",
              "else if(ShipPilotRace(Player()) == 1) TempRace = \"</color>пеленг\";",
              "else if(ShipPilotRace(Player()) == 2) TempRace = \"</color>человек\";",
              "else if(ShipPilotRace(Player()) == 3) TempRace = \"</color>фэянин\";",
              "else TempRace = \"</color>гаалец\";",
              "//Конечный модификатор взятки для пиратов - 0.80 (в т.ч. для пеленгов - 0.90)",
              "RuinBribe = round(0.80 * (0.01 * (5.0 - (0.04 * RelationToRanger(GetShipRuins(Player()), Player()))) * RangersCapital()));"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  460,
          "Pos.y":  70,
          "Parent":  -1,
          "#":  16,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "SkipGreeting();"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  520,
          "Pos.y":  70,
          "Parent":  -1,
          "#":  23,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "SkipGreeting();"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  570,
          "Pos.y":  70,
          "Parent":  -1,
          "#":  24,
          "Total.Lines":  4,
          "Code.Type":  "Turn",
          "Code":          
          [
              "SkipGreeting();",
              "//Конечный модификатор взятки для фэян - 1.15 и для гаальцев 1.30",
              "if(ShipPilotRace(GetShipRuins(Player())) == 3) RuinBribe = round(1.15 * (0.01 * (5.0 - (0.04 * RelationToRanger(GetShipRuins(Player()), Player()))) * RangersCapital()));",
              "else if(ShipPilotRace(GetShipRuins(Player())) == 4) RuinBribe = round(1.30 * (0.01 * (5.0 - (0.04 * RelationToRanger(GetShipRuins(Player()), Player()))) * RangersCapital()));"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  620,
          "Pos.y":  70,
          "Parent":  -1,
          "#":  25,
          "Total.Lines":  4,
          "Code.Type":  "Turn",
          "Code":          
          [
              "SkipGreeting();",
              "//Конечный модификатор взятки для фэян - 1.15 и для гаальцев 1.30",
              "if(ShipPilotRace(GetShipRuins(Player())) == 3) RuinBribe = round(1.15*(0.01*(5.0-(0.04*RelationToRanger(GetShipRuins(Player()),Player())))*RangersCapital()));",
              "else if(ShipPilotRace(GetShipRuins(Player())) == 4) RuinBribe = round(1.30*(0.01*(5.0-(0.04*RelationToRanger(GetShipRuins(Player()),Player())))*RangersCapital()));"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  30,
          "Parent":  21,
          "#":  26,
          "Total.Lines":  3,
          "Code.Type":  "Turn",
          "Code":          
          [
              "SkipGreeting();",
              "//Конечный модификатор взятки для людей - 1.00",
              "RuinBribe = round(1.00*(0.01*(5.0-(0.04*RelationToRanger(GetShipRuins(Player()),Player())))*RangersCapital()));"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  30,
          "Parent":  22,
          "#":  27,
          "Total.Lines":  3,
          "Code.Type":  "Turn",
          "Code":          
          [
              "SkipGreeting();",
              "//Конечный модификатор взятки для малоков - 0.70",
              "RuinBribe = round(0.70*(0.01*(5.0-(0.04*RelationToRanger(GetShipRuins(Player()),Player())))*RangersCapital()));"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  550,
          "Pos.y":  230,
          "Parent":  -1,
          "#":  48,
          "Total.Lines":  16,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player(),ShipMoney(Player())-RuinBribe);",
              "RelationToRanger(GetShipRuins(Player()),Player(),55);",
              "//Снимаем блокировку с кнопок в главном меню станции",
              "InterfaceState('RuinsTalk','PR_Shop',-1);",
              "InterfaceState('RuinsTalk','PR_ShopBlock',-1);",
              "InterfaceState('RuinsTalk','PR_Goods',-1);",
              "InterfaceState('RuinsTalk','PR_GoodsBlock',-1);",
              "InterfaceState('RuinsTalk','PR_Info',-1);",
              "InterfaceState('RuinsTalk','PR_InfoBlock',-1);",
              "InterfaceState('RuinsTalk','PM_EndTurn',-1);",
              "InterfaceState('RuinsTalk','RT_EndTurn_Block',-1);",
              "InterfaceState('RuinsTalk','AstAddRuins',-1);",
              "//Удаляем блокирующую форму Ship инфошку",
              "ShipDeleteCustomShipInfo(Player(),'ExpTraitors_RuinsBlock');",
              "Sound('Sound.Sell');",
              "RuinBribe=0;"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  -20,
          "Pos.y":  0,
          "Parent":  37,
          "#":  53,
          "Total.Lines":  3,
          "Code.Type":  "Turn",
          "Code":          
          [
              "PlayerDebt(0);",
              "ShipMoney(Player(), ShipMoney(Player()) - PlayerDebt());",
              "Sound('Sound.Sell');"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  58,
          "#":  62,
          "Total.Lines":  16,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player(), ShipMoney(Player()) - RuinBribe);",
              "RelationToRanger(GetShipRuins(Player()), Player(), 90);",
              "//Снимаем блокировку с кнопок в главном меню станции",
              "InterfaceState('RuinsTalk', 'PR_Shop', -1);",
              "InterfaceState('RuinsTalk', 'PR_ShopBlock', -1);",
              "InterfaceState('RuinsTalk', 'PR_Goods', -1);",
              "InterfaceState('RuinsTalk', 'PR_GoodsBlock', -1);",
              "InterfaceState('RuinsTalk', 'PR_Info', -1);",
              "InterfaceState('RuinsTalk', 'PR_InfoBlock', -1);",
              "InterfaceState('RuinsTalk', 'PM_EndTurn', -1);",
              "InterfaceState('RuinsTalk', 'RT_EndTurn_Block', -1);",
              "InterfaceState('RuinsTalk', 'AstAddRuins', -1);",
              "//Удаляем блокирующую форму Ship инфошку",
              "ShipDeleteCustomShipInfo(Player(), 'ExpTraitors_RuinsBlock');",
              "Sound('Sound.Sell');",
              "RuinBribe = 0;"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  70,
          "#":  72,
          "Total.Lines":  16,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player(),ShipMoney(Player())-RuinBribe);",
              "RelationToRanger(GetShipRuins(Player()),Player(),75);",
              "//Снимаем блокировку с кнопок в главном меню станции",
              "InterfaceState('RuinsTalk','PR_Shop',-1);",
              "InterfaceState('RuinsTalk','PR_ShopBlock',-1);",
              "InterfaceState('RuinsTalk','PR_Goods',-1);",
              "InterfaceState('RuinsTalk','PR_GoodsBlock',-1);",
              "InterfaceState('RuinsTalk','PR_Info',-1);",
              "InterfaceState('RuinsTalk','PR_InfoBlock',-1);",
              "InterfaceState('RuinsTalk','PM_EndTurn',-1);",
              "InterfaceState('RuinsTalk','RT_EndTurn_Block',-1);",
              "InterfaceState('RuinsTalk','AstAddRuins',-1);",
              "//Удаляем блокирующую форму Ship инфошку",
              "ShipDeleteCustomShipInfo(Player(),'ExpTraitors_RuinsBlock');",
              "Sound('Sound.Sell');",
              "RuinBribe=0;"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  600,
          "Pos.y":  230,
          "Parent":  -1,
          "#":  82,
          "Total.Lines":  16,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player(),ShipMoney(Player())-RuinBribe);",
              "RelationToRanger(GetShipRuins(Player()),Player(),75);",
              "//Снимаем блокировку с кнопок в главном меню станции",
              "InterfaceState('RuinsTalk','PR_Shop',-1);",
              "InterfaceState('RuinsTalk','PR_ShopBlock',-1);",
              "InterfaceState('RuinsTalk','PR_Goods',-1);",
              "InterfaceState('RuinsTalk','PR_GoodsBlock',-1);",
              "InterfaceState('RuinsTalk','PR_Info',-1);",
              "InterfaceState('RuinsTalk','PR_InfoBlock',-1);",
              "InterfaceState('RuinsTalk','PM_EndTurn',-1);",
              "InterfaceState('RuinsTalk','RT_EndTurn_Block',-1);",
              "InterfaceState('RuinsTalk','AstAddRuins',-1);",
              "//Удаляем блокирующую форму Ship инфошку",
              "ShipDeleteCustomShipInfo(Player(),'ExpTraitors_RuinsBlock');",
              "Sound('Sound.Sell');",
              "RuinBribe=0;"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  490,
          "Pos.y":  230,
          "Parent":  -1,
          "#":  93,
          "Total.Lines":  16,
          "Code.Type":  "Turn",
          "Code":          
          [
              "//Снимаем блокировку с кнопок в главном меню станции",
              "InterfaceState('RuinsTalk', 'PR_Shop', -1);",
              "InterfaceState('RuinsTalk', 'PR_ShopBlock', -1);",
              "InterfaceState('RuinsTalk', 'PR_Goods', -1);",
              "InterfaceState('RuinsTalk', 'PR_GoodsBlock', -1);",
              "InterfaceState('RuinsTalk', 'PR_Info', -1);",
              "InterfaceState('RuinsTalk', 'PR_InfoBlock', -1);",
              "InterfaceState('RuinsTalk', 'PM_EndTurn', -1);",
              "InterfaceState('RuinsTalk', 'RT_EndTurn_Block', -1);",
              "InterfaceState('RuinsTalk', 'AstAddRuins', -1);",
              "",
              "//Удаляем блокирующую форму Ship инфошку",
              "ShipDeleteCustomShipInfo(Player(), 'ExpTraitors_RuinsBlock');",
              "RelationToRanger(cur_ruin, Player(), 70);",
              "ShipMoney(Player(), ShipMoney(Player()) - RuinBribe);",
              "Sound('Sound.Buy');"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  410,
          "Pos.y":  150,
          "Parent":  -1,
          "#":  97,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "int0 = 0;"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  570,
          "Pos.y":  130,
          "Parent":  -1,
          "#":  98,
          "Total.Lines":  2,
          "Code.Type":  "Turn",
          "Code":          
          [
              "int0 = 0;",
              "DAnswer('hangar~' + \"Уже ухожу\");"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  620,
          "Pos.y":  130,
          "Parent":  -1,
          "#":  99,
          "Total.Lines":  2,
          "Code.Type":  "Turn",
          "Code":          
          [
              "int0 = 0;",
              "DAnswer('hangar~' + \"Уже ухожу\");"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  40,
          "Pos.y":  20,
          "Parent":  34,
          "#":  100,
          "Total.Lines":  2,
          "Code.Type":  "Turn",
          "Code":          
          [
              "int0 = 0;",
              "DAnswer('hangar~' + \"Ну и ладно, не очень-то и хотелось!\");"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  40,
          "Pos.y":  20,
          "Parent":  32,
          "#":  101,
          "Total.Lines":  2,
          "Code.Type":  "Turn",
          "Code":          
          [
              "int0 = 0;",
              "DAnswer('hangar~' + \"Уже ухожу\");"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  105,
          "#":  103,
          "Total.Lines":  382,
          "Code.Type":  "Turn",
          "Code":          
          [
              "if(LastProcessedTurn >= CurTurn()) exit; //Ограничиваем число возможных обработок тернкода за ход до одного",
              "",
              "if(ShipOwner(Player()) != PirateClan)",
              "{",
              "    //Игрок получил звание аса",
              "    if(RuinsRelationLimits['WB', 'Max'] < 100)",
              "    {",
              "        //Повышаем максимальное лимитное отношение всех военных баз к игроку до 100",
              "        if(ShipRank(Player()) >= 5) RuinsRelationLimits['WB', 'Max'] = 100;",
              "    }",
              "}",
              "else",
              "{",
              "    //Игрок получил звание атамана",
              "    if(RuinsRelationLimits['CB', 'Max'] < 100)",
              "    {",
              "        //Повышаем максимальное лимитное отношение всех доминионов к игроку до 100",
              "        if(GetShipPirateRank(Player()) >= 5) RuinsRelationLimits['CB', 'Max'] = 100;",
              "    }",
              "}",
              "",
              "//Спавним новых рейнджеров-изменников",
              "if(!CoalitionDefeated())",
              "{",
              "    if(CurTurn() >= NextTraitorSpawnTurn)",
              "    {",
              "        if(GroupCount(Traitors) < ControlledSystems(2)) //Ограничиваем максимальное число рейнджеров-изменников числом текущих пиратских систем",
              "        {",
              "            NextTraitorSpawnTurn = CurTurn() + RndObject(45, 90, PlanetPirateClan()); //Обновляем таймер до возможности спавна следующего рейнджера-изменника",
              "",
              "            for(i = 0; i < GalaxyStars(); i = i + 1)",
              "            {",
              "                cur_star = GalaxyStar(i);",
              "                if(StarOwner(cur_star) != 2) continue;",
              "                if(StarCustomFaction(cur_star) != '') continue;",
              "",
              "                for(j = 0; j < StarPlanets(cur_star); j = j + 1)",
              "                {",
              "                    cur_planet = StarPlanets(cur_star, j);",
              "                    if(PlanetOwner(cur_planet) == PirateClan) //Рейнджер-изменник появится на случайной пиратской планете",
              "                    {",
              "                        cur_ship = BuyRanger(cur_planet, 200);",
              "",
              "                        //Избавляемся от возможной серии \"Таухито\", которую вешает хардкод",
              "                        if(CurTurn() <= 666)",
              "                        {",
              "                            if(!(Id(cur_ship) % 6))",
              "                            {",
              "                                while(ShipPilotRace(cur_ship) == People) ShipPilotRace(cur_ship, RndObject(Maloc, Gaal, cur_ship));",
              "                            }",
              "                        }",
              "",
              "                        //Меняем корпус",
              "                        cur_item = ShipItems(cur_ship, 0);",
              "                        SpecialToEquipment(FindBonusByNameInCfg('ExpTraitors_TraitorHull'), cur_item);",
              "                        HullHP(cur_ship, 'To100');",
              "                        Chameleon(cur_ship);",
              "",
              "                        ShipRefit(cur_ship);",
              "                        ShipType(cur_ship, 'RangerPirate');",
              "                        ShipJoin(Traitors, cur_ship);",
              "                        ShipJoinsClan(cur_ship);",
              "                        NoTargetToShip(cur_ship, 5); //Запрещаем пиратам грабить рейнджера-изменника (а то будет выглядеть тупо)",
              "",
              "                        //Меняем начальный характер изменника на наиболее пиратский, чтобы со старта среди них появлялось меньше всяких \"воинов\" и \"героев\"",
              "                        if(RndObject(1, 10, cur_ship) <= 7)",
              "                        {",
              "                            tint1 = RndObject(1, 10, cur_ship);",
              "                            if(tint1 <= 4) //Пират",
              "                            {",
              "                                ShipSubType(cur_ship, 1);",
              "                                ShipStatus(cur_ship, 0, 0);",
              "                                ShipStatus(cur_ship, 1, 100);",
              "                                ShipStatus(cur_ship, 2, 0);",
              "                            }",
              "                            else if(tint1 <= 6) //Капер",
              "                            {",
              "                                ShipSubType(cur_ship, 1);",
              "                                ShipStatus(cur_ship, 0, 25);",
              "                                ShipStatus(cur_ship, 1, 75);",
              "                                ShipStatus(cur_ship, 2, 0);",
              "                            }",
              "                            else if(tint1 <= 8) //Сбытчик",
              "                            {",
              "                                ShipSubType(cur_ship, 0);",
              "                                ShipStatus(cur_ship, 0, 0);",
              "                                ShipStatus(cur_ship, 1, 75);",
              "                                ShipStatus(cur_ship, 2, 25);",
              "                            }",
              "                            else //if(tint1 <= 10) //Рейдер",
              "                            {",
              "                                ShipSubType(cur_ship, 1);",
              "                                ShipStatus(cur_ship, 0, 25);",
              "                                ShipStatus(cur_ship, 1, 50);",
              "                                ShipStatus(cur_ship, 2, 25);",
              "                            }",
              "                        }",
              "                    }",
              "                }",
              "            }",
              "        }",
              "    }",
              "}",
              "",
              "//Используется для обработки вызова функции смены отношения станций из других скриптов/кодов (переменные \"заполнителя\" также задаются внешним кодом)",
              "if(ChangeRuinsRelationFunFiller['ChangeRuinsRelationToPlayerCallMark'])",
              "{",
              "    ChangeRuinsRelationToPlayer(ChangeRuinsRelationFunFiller['GlobalVariableRelation'],      ChangeRuinsRelationFunFiller['GlobalRelationForAll'],",
              "                                ChangeRuinsRelationFunFiller['LocalVariableRelation'],       ChangeRuinsRelationFunFiller['LocalRelationForAll'],",
              "                                ChangeRuinsRelationFunFiller['GlobalRelationForCoalition'],  ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan'],",
              "                                ChangeRuinsRelationFunFiller['CoalitionMinLimitRelation'],   ChangeRuinsRelationFunFiller['CoalitionMaxLimitRelation'],",
              "                                ChangeRuinsRelationFunFiller['PirateClanMinLimitRelation'],  ChangeRuinsRelationFunFiller['PirateClanMaxLimitRelation']);",
              "    ChangeRuinsRelationFunFiller['ChangeRuinsRelationToPlayerCallMark'] = 0;",
              "}",
              "",
              "//Если в прошлом ходу игрок сбежал из тюрьмы, обнуляем этот маркер",
              "tint1 = ShipCustomShipInfoData(Player(), 'ExpTraitors_RuinsRelationsControl', 1);",
              "if(~tint1)",
              "{",
              "    ShipCustomShipInfoData(Player(), 'ExpTraitors_RuinsRelationsControl', 1, -1);",
              "    GotoGov(0);",
              "",
              "    //Также откатываем буст к отношению планет в текущем секторе, ибо тупо его давать игроку за побег",
              "    //Актуально только для коалиционных планет, т.к. у всех пиратских (Роджерии) отношение после побега в любом случае падает в 0",
              "    cur_star = ShipStar(Player());",
              "    if(!StarOwner(cur_star)) ChangeGlobalRelationsPlanets(Player(), StarToCon(cur_star), 4, 30 + (ShipSkill(Player(), 'CharmCur') * 6), 31);",
              "",
              "    //Выводим галановость о дерзком побеге игрока",
              "    cur_planet = IdToPlanet(ShipCustomShipInfoData(Player(), 'ExpTraitors_RuinsRelationsControl', 2));",
              "    AddPlanetNews(Format(CT('Script.Mod_ExpTraitors.Jailbreak' + RndObject(1, 3, cur_planet)), '<Star'+'>', Name(PlanetToStar(cur_planet)), '<Planet'+'>', Name(cur_planet), '<Ship'+'>', Name(Player())));",
              "}",
              "",
              "//Перебор галаэвентов и смена отношения со станциями (здесь же автоматически обнуляются все значения, которые выше могли выставить другие скрипты)",
              "ChangeRuinsRelationFunFiller['GlobalVariableRelation'] = 0;",
              "ChangeRuinsRelationFunFiller['GlobalRelationForAll'] = 0;",
              "ChangeRuinsRelationFunFiller['LocalVariableRelation'] = 0;",
              "ChangeRuinsRelationFunFiller['LocalRelationForAll'] = 0;",
              "ChangeRuinsRelationFunFiller['GlobalRelationForCoalition'] = 0;",
              "ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan'] = 0;",
              "ChangeRuinsRelationFunFiller['CoalitionMinLimitRelation'] = 10;",
              "ChangeRuinsRelationFunFiller['CoalitionMaxLimitRelation'] = 100;",
              "ChangeRuinsRelationFunFiller['PirateClanMinLimitRelation'] = 10;",
              "ChangeRuinsRelationFunFiller['PirateClanMaxLimitRelation'] = 100;",
              "for(i = GalaxyEvents() - 1; i >= 0; i = i - 1)",
              "{",
              "    //В теории проверка ограничителя из терна может вызывать проблемы, т.к. удаление событий с конца происходит как раз где-то во время расчёта хода",
              "    //Также в терне и диалоге обрабатываются разные типы событий, так что пересекаться эти обработчики в любом случае не должны",
              "    //if(i < LastCheckedEventInDialog) break; //На всякий случай исключаем уже обработанные диалогом эвенты (хотя пересекаться они вроде как не должны)",
              "    if(GalaxyEventDate(i) < CurTurn()) break;",
              "",
              "    tstr1 = GalaxyEventType(i);",
              "    //Отношение за уничтожение кораблей/станций",
              "    if(tstr1 == 'PlayerKillsShip' || tstr1 == 'PlayerAssistKillsShip')",
              "    {",
              "        tint1 = GalaxyEventData(i, 0); //Основной (номерной) тип",
              "        tint2 = GalaxyEventData(i, 5); //Подтип",
              "",
              "        //Используем здесь временные переменные (будут записаны в сейв, но видны только из тернкода),",
              "        //чтобы иметь возможность накладывать модификаторы на очки для каждого отдельного события (в частности для PlayerAssistKillsShip)",
              "        int global_var_rel = 0;",
              "        int global_rel_for_all = 0;",
              "        int local_var_rel = 0;",
              "        int local_rel_for_all = 0;",
              "",
              "        if(tint1 == t_Kling)",
              "        {",
              "            if(tint2 != 6)",
              "            {",
              "                if(tint2) local_rel_for_all = local_rel_for_all + 5; //Рядовые доминаторы",
              "                else global_rel_for_all = global_rel_for_all + 50; //Игроком был уничтожен какой-то босс",
              "            }",
              "            else local_rel_for_all = local_rel_for_all + 10; //Берторы и аналогичные им по силе корабли",
              "        }",
              "        else if(tint1 == t_Pirate)",
              "        {",
              "            tstr2 = GalaxyEventsTextData(i, 2); //Строковый тип (для всех ванильных всегда '')",
              "        ",
              "            if(tstr2 == '') local_var_rel = local_var_rel + 10; //Вольные или клановые пираты",
              "            else if(tstr2 == 'PirateCorvette') local_var_rel = local_var_rel + 15;",
              "            else if(tstr2 == 'PirateFrigate' || tstr2 == 'PirateGalleon') local_var_rel = local_var_rel + 20;",
              "            else local_var_rel = local_var_rel + 10; //Все прочие пиратские типы",
              "        }",
              "        else if(tint1 == t_Transport)",
              "        {",
              "            if(GalaxyEventsTextData(i, 2) == 'Smuggler') local_var_rel = local_var_rel + 5; //Клановые контрабандисты из мода ShuSmugglers",
              "            else local_var_rel = local_var_rel - 10;",
              "        }",
              "        else if(tint1 == t_Warrior)",
              "        {",
              "            if(tint2) local_var_rel = local_var_rel - 20; //Флагманы",
              "            else local_var_rel = local_var_rel - 10; //Простые военные (и прочие виды военных из модов)",
              "        }",
              "        else if(tint1 == t_Ranger)",
              "        {",
              "            tstr2 = GalaxyEventsTextData(i, 2); //Строковый тип (для всех ванильных всегда '')",
              "        ",
              "            if(tstr2 == 'RangerPirate' || tstr2 == 'RangerPirateExplorer') local_var_rel = local_var_rel + 10; //Рейнджеры-изменники из этого мода",
              "            else if(tstr2 == '' || tstr2 == 'Ranger' || tstr2 == 'FemRanger')",
              "            {",
              "                if(tstr2 == '')",
              "                {",
              "                    if(~findsubstr(CT('Script.PC_fem_rangers.SecretAgentNames.' + CT('Script.PC_fem_rangers.SecretAgentNames.' + GalaxyEventData(i, 3)) + '.NameSearchString'), '$' + GalaxyEventsTextData(i, 0) + '$')) local_var_rel = local_var_rel - 20; //Спецагентки (определяем по имени)",
              "                    else local_var_rel = local_var_rel - 10;",
              "                }",
              "                else if(tstr2 == 'FemRanger') local_var_rel = local_var_rel - 20; //Спецагентки (имеют постоянный ShipType() в EvoFemRangers)",
              "                else local_var_rel = local_var_rel - 10;",
              "            }",
              "            //Нейролинк из мода ShuKlissan (технически рейнджер)",
              "            else if(tstr2 == 'Neurolink') local_rel_for_all = local_rel_for_all + 15;",
              "            //else if(tstr2 == 'Merc' || tstr2 == 'PlayerMerc' || tstr2 == 'Freelancer') {} //Непосредственно наёмники не меняют отношения станций",
              "        }",
              "        else if(tint1 == t_UB) //Кастомные базы",
              "        {",
              "            tstr2 = GalaxyEventsTextData(i, 2); //Строковый тип (для всех ванильных всегда '')",
              "        ",
              "            //Центр наёмников (из мода ShuMercs)",
              "            if(tstr2 == 'MB' || tstr2 == 'Manaan') local_rel_for_all = local_rel_for_all - 15;",
              "            //Ингибитор (из мода ShuDomiks)",
              "            else if(tstr2 == 'Inhibitor') local_rel_for_all = local_rel_for_all - 25;",
              "        }",
              "        else if(tint1 == t_BK) local_rel_for_all = local_rel_for_all + 10; //Бизнес-центры (их не любит никто)",
              "        else if(tint1 == t_PB) local_var_rel = local_var_rel + 15; //Пиратские базы (в т.ч. чёрные рынки 'BM' из мода ExpBlackMarket)",
              "        else if(tint1 == t_WB) local_var_rel = local_var_rel - 15; //Военные базы",
              "        else if(tint1 == t_CB) local_var_rel = local_var_rel + 15; //Доминионы",
              "        else if(tint1 == t_RC) local_var_rel = local_var_rel - 15; //Центры рейнджеров",
              "        else if(tint1 == t_SB) local_var_rel = local_var_rel - 15; //Научные базы",
              "        else if(tint1 == t_MC) local_rel_for_all = local_rel_for_all - 25; //Медицинские центры",
              "",
              "        //Снижаем степень изменения отношения, если игрок всего лишь сделал ассист",
              "        if(tstr1 == 'PlayerAssistKillsShip')",
              "        {",
              "            ChangeRuinsRelationFunFiller['GlobalVariableRelation'] = global_var_rel + round(0.34 * global_var_rel);",
              "            ChangeRuinsRelationFunFiller['GlobalRelationForAll'] = global_rel_for_all + round(0.34 * global_rel_for_all);",
              "            ChangeRuinsRelationFunFiller['LocalVariableRelation'] = local_var_rel + round(0.5 * local_var_rel);",
              "            ChangeRuinsRelationFunFiller['LocalRelationForAll'] = local_rel_for_all + round(0.5 * local_rel_for_all);",
              "        }",
              "    }",
              "    //Отношение, снимаемое за рэкет",
              "    else if(tstr1 == 'PlayerExtortsMoney')",
              "    {",
              "        if(GalaxyEventData(i, 1) != t_Pirate)",
              "        {",
              "            tstr2 = GalaxyEventsTextData(i, 1); //Строковый тип (для всех ванильных всегда '')",
              "",
              "            if(tstr2 != 'Merc' && tstr2 != 'Freelancer') //На тряску наёмников всем одинаково побоку",
              "            {",
              "                if(GalaxyEventData(i, 4) != PirateClan) ChangeRuinsRelationFunFiller['LocalVariableRelation'] = ChangeRuinsRelationFunFiller['LocalVariableRelation'] - 8;",
              "                else ChangeRuinsRelationFunFiller['LocalVariableRelation'] = ChangeRuinsRelationFunFiller['LocalVariableRelation'] + 2;",
              "            }",
              "        }",
              "        else ChangeRuinsRelationFunFiller['LocalVariableRelation'] = ChangeRuinsRelationFunFiller['LocalVariableRelation'] + 4;",
              "    }",
              "    else if(tstr1 == 'PlayerExtortsGoods')",
              "    {",
              "        if(GalaxyEventData(i, 1) != t_Pirate)",
              "        {",
              "            tstr2 = GalaxyEventsTextData(i, 1); //Строковый тип (для всех ванильных всегда '')",
              "",
              "            if(tstr2 != 'Merc' && tstr2 != 'Freelancer') //На тряску наёмников всем одинаково побоку",
              "            {",
              "                if(GalaxyEventData(i, 4) != PirateClan) ChangeRuinsRelationFunFiller['LocalVariableRelation'] = ChangeRuinsRelationFunFiller['LocalVariableRelation'] - 8;",
              "                else ChangeRuinsRelationFunFiller['LocalVariableRelation'] = ChangeRuinsRelationFunFiller['LocalVariableRelation'] + 2;",
              "            }",
              "        }",
              "        else ChangeRuinsRelationFunFiller['LocalVariableRelation'] = ChangeRuinsRelationFunFiller['LocalVariableRelation'] + 4;",
              "    }",
              "    //Отношение за захваты систем (для планет за пределами освобождённой системы отношение не меняется, так что для станций тоже поставил мизер)",
              "    else if(tstr1 == 'PlayerLiberatesSystem')",
              "    {",
              "        //Вроде бы в ваниле влияние на отношение за захват систем не глобальное, но пофиг",
              "        if(GalaxyEventData(i, 1) == 2) ChangeRuinsRelationFunFiller['GlobalVariableRelation'] = ChangeRuinsRelationFunFiller['GlobalVariableRelation'] + 8; //Освободил для Коалиции",
              "        else ChangeRuinsRelationFunFiller['GlobalVariableRelation'] = ChangeRuinsRelationFunFiller['GlobalVariableRelation'] - 8; //Освободил для клана",
              "    }",
              "    //Отношение за глобальную смену репутации среди планет Коалиции",
              "    //else if(tstr1 == 'GlobalChangeToPlayerReputation')",
              "    //{",
              "        //tint1 = GalaxyEventData(i, 0); //Тип изменения репутации игрока",
              "        //tint2 = GalaxyEventData(i, 2); //Сет овнеров, для которых нужно изменить отношение (используется для проверки пиратского овнера)",
              "        //j = GalaxyEventData(i, 1); //Значение, на которое было изменено отношение",
              "",
              "        // if(!tint1) //Понизить репутацию до (не ниже) указанного значения",
              "        // {",
              "            // if((tint2 & 1+2+4+8+16)) ChangeRuinsRelationFunFiller['CoalitionMinLimitRelation'] = j;",
              "            // if((tint2 & 128)) ChangeRuinsRelationFunFiller['PirateClanMinLimitRelation'] = j;",
              "        // }",
              "        // else if(tint1 == 1) //Повысить репутацию до (не выше) указанного значения",
              "        // {",
              "            // if((tint2 & 1+2+4+8+16)) ChangeRuinsRelationFunFiller['CoalitionMaxLimitRelation'] = j;",
              "            // if((tint2 & 128)) ChangeRuinsRelationFunFiller['PirateClanMaxLimitRelation'] = j;",
              "        // }",
              "        // else if(tint1 == 2) //Прибавить указанное значение к уже имеющемуся",
              "        // {",
              "            // if((tint2 & 1+2+4+8+16)) ChangeRuinsRelationFunFiller['GlobalRelationForCoalition'] = ChangeRuinsRelationFunFiller['GlobalRelationForCoalition'] + j;",
              "            // if((tint2 & 128)) ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan'] = ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan'] + j;",
              "        // }",
              "        // else //if(tint1 == 3 || tint1 == 4) //Отнять указанное значение от уже имеющегося",
              "        // {",
              "            // if((tint2 & 1+2+4+8+16)) ChangeRuinsRelationFunFiller['GlobalRelationForCoalition'] = ChangeRuinsRelationFunFiller['GlobalRelationForCoalition'] - j;",
              "            // if((tint2 & 128)) ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan'] = ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan'] - j;",
              "        // }",
              "    //}",
              "}",
              "",
              "//Если нашли соответствующие эвенты, то меняем отношение всех станций к игроку",
              "if(ChangeRuinsRelationFunFiller['GlobalVariableRelation']           || ChangeRuinsRelationFunFiller['GlobalRelationForAll']              ||",
              "   ChangeRuinsRelationFunFiller['LocalVariableRelation']            || ChangeRuinsRelationFunFiller['LocalRelationForAll']               ||",
              "   ChangeRuinsRelationFunFiller['GlobalRelationForCoalition']       || ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan']       ||",
              "   ChangeRuinsRelationFunFiller['CoalitionMinLimitRelation']  != 10 || ChangeRuinsRelationFunFiller['CoalitionMaxLimitRelation']  != 100 ||",
              "   ChangeRuinsRelationFunFiller['PirateClanMinLimitRelation'] != 10 || ChangeRuinsRelationFunFiller['PirateClanMaxLimitRelation'] != 100",
              "  )",
              "{",
              "    ChangeRuinsRelationToPlayer(ChangeRuinsRelationFunFiller['GlobalVariableRelation'],      ChangeRuinsRelationFunFiller['GlobalRelationForAll'],",
              "                                ChangeRuinsRelationFunFiller['LocalVariableRelation'],       ChangeRuinsRelationFunFiller['LocalRelationForAll'],",
              "                                ChangeRuinsRelationFunFiller['GlobalRelationForCoalition'],  ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan'],",
              "                                ChangeRuinsRelationFunFiller['CoalitionMinLimitRelation'],   ChangeRuinsRelationFunFiller['CoalitionMaxLimitRelation'],",
              "                                ChangeRuinsRelationFunFiller['PirateClanMinLimitRelation'],  ChangeRuinsRelationFunFiller['PirateClanMaxLimitRelation']);",
              "}",
              "//Обнуляем проверочный \"ограничитель\" для перебора событий из диалога, чтобы не происходило его переполнения",
              "LastCheckedEventInDialog = 0;",
              "",
              "tint1 = PirateWin();",
              "//Если пиратский клан проиграл войну",
              "if(tint1 == 3 || tint1 == 4)",
              "{",
              "    //Если на момент поражения клана игрока находился на его стороне",
              "    if(ShipOwner(Player()) == PirateClan)",
              "    {",
              "        ShipOwner(Player(), ShipPilotRace(Player()));",
              "        ShipType(Player(), 'Ranger');",
              "",
              "        RuinsRelationLimits['SB', 'Min'] = 10; //Научная база",
              "        RuinsRelationLimits['SB', 'Max'] = 100;",
              "        RuinsRelationLimits['RC', 'Min'] = 10; //Центр рейнджеров",
              "        RuinsRelationLimits['RC', 'Max'] = 100;",
              "        RuinsRelationLimits['WB', 'Min'] = 10; //Военная база",
              "        if(ShipRank(Player()) < 5) RuinsRelationLimits['WB', 'Max'] = 79;",
              "        else RuinsRelationLimits['WB', 'Max'] = 100; //Военное звание не ниже аса",
              "        RuinsRelationLimits['BK', 'Min'] = 10; //Бизнес-центр",
              "        RuinsRelationLimits['BK', 'Max'] = 100;",
              "        RuinsRelationLimits['MC', 'Min'] = 50; //Медицинский центр",
              "        RuinsRelationLimits['MC', 'Max'] = 100;",
              "        RuinsRelationLimits['TC', 'Min'] = 10; //Технологический центр",
              "        RuinsRelationLimits['TC', 'Max'] = 100;",
              "",
              "        RuinsRelationLimits['PB', 'Min'] = 10; //Пиратская база",
              "        RuinsRelationLimits['PB', 'Max'] = 50;",
              "        RuinsRelationLimits['CB', 'Min'] = 10; //Доминион",
              "        RuinsRelationLimits['CB', 'Max'] = 50;",
              "",
              "        //Повышаем отношение всех коалиционных станций к игроку",
              "        ChangeRuinsRelationToPlayer(25); //Для всех пиратских станций плюс в первом аргументе - это минус",
              "    }",
              "}",
              "",
              "//Если пиратский клан победил в войне",
              "//Удалённо переводим пиратские налоги на счёт игрока через каждые 100 дней",
              "else if(tint1 == 1 || tint1 == 2 || tint1 == 5)",
              "{",
              "    if(ShipOwner(Player()) == PirateClan)",
              "    {",
              "        if(GetShipPirateRank(Player()) >= 7)",
              "        {",
              "            cur_star = GalaxyStar(NifigatzId);",
              "            if(StarOwner(cur_star) == 2 && StarCustomFaction(cur_star) != 'Klissan')",
              "            {",
              "                if(MoneyGoes == -1) MoneyGoes = CurTurn() + 100;",
              "                if(CurTurn() >= MoneyGoes)",
              "                {",
              "                    if(CurTurn() - last_turn_taxes >= 100)",
              "                    {",
              "                        NewsAdd(\"Гип-гип ура! Да здравствует наш великий лидер!<br>Смиренно сообщаем, что налоги с системы <color=255,240,100>Нифигац</color> в размере <1000 * min(100, (CurTurn() - last_turn_taxes))> cr., были только что переведены на твой личный счёт.\");",
              "                        ShipMoney(Player(), ShipMoney(Player()) + 1000 * min(100, (CurTurn() - last_turn_taxes)));",
              "                        last_turn_taxes = CurTurn();",
              "                        Sound('Sound.Buy');",
              "                    }",
              "                }",
              "            }",
              "        }",
              "    }",
              "}",
              "",
              "LastProcessedTurn = CurTurn();"          
          ]        
        },
        {
          "Type":  "Top",
          "Name":  "",
          "Pos.x":  40,
          "Pos.y":  0,
          "Parent":  5,
          "#":  107,
          "Total.Lines":  289,
          "Code.Type":  "DialogBegin",
          "Code":          
          [
              "//Удалить это спустя время",
              "if(!GetVariableType(RuinsRelationLimits) || !GetVariableType(ChangeRuinsRelationFunFiller))",
              "{",
              "    DeclareExpTraitorsSpecialArrays();",
              "    ShipAddCustomShipInfo(Player(), 'ExpTraitors_RuinsRelationsControl', 'NoShow', -1);",
              "}",
              "",
              "cur_planet = GetShipPlanet(Player());",
              "if(cur_planet)",
              "{",
              "    //Если в прошлом ходу игрок вышел из тюрьмы (не сбежал), обнуляем маркер и обновляем отношение станций к игроку",
              "    tint1 = ShipCustomShipInfoData(Player(), 'ExpTraitors_RuinsRelationsControl', 1);",
              "    if(~tint1)",
              "    {",
              "        if(tint1 != PirateClan) ChangeRuinsRelationToPlayer(0, 0, 0, 0, 0, 0, 35, 100, 10, 100); //Для коалиционных станций доводим отношение как минимум до \"нормального\"",
              "        else ChangeRuinsRelationToPlayer(0, 0, 0, 0, 0, 0, 10, 100, 75, 100); //Для пиратских станций доводим отношение как минимум до \"нормального\"",
              "",
              "        ShipCustomShipInfoData(Player(), 'ExpTraitors_RuinsRelationsControl', 1, -1);",
              "        GotoGov(0);",
              "    }",
              "}",
              "",
              "cur_ruin = GetShipRuins(Player());",
              "if(cur_ruin)",
              "{",
              "    cur_ruin_type = Format(ShipType(cur_ruin), '_licensed', '', '');",
              "    if(cur_ruin_type == 'PlayerBridge') exit;",
              "",
              "    if(cur_ruin_type == 'WB')",
              "    {",
              "        //Игрок заявился на ВБ будучи состоя в пиратском клане (отношение падает до минимального)",
              "        if(ShipOwner(Player()) == PirateClan) RelationToRanger(cur_ruin, Player(), 10);",
              "    }",
              "    else if(cur_ruin_type == 'PB')",
              "    {",
              "        //Данные проверки дублируются в акткоде",
              "        if(ShipOwner(Player()) != PirateClan)",
              "        {",
              "            //Игрок покинул клан",
              "            if(ShipType(Player()) == 'RangerPiratePlayer')",
              "            {",
              "                //Меняем имя типа игрока (меняет названия характеров и приставку к имени)",
              "                ShipType(Player(), 'Ranger');",
              "",
              "                //Возвращаем игрока в рейтинг рейнджеров",
              "                RangerExcludedFromRating(Player(), 0);",
              "",
              "                //Меняем лимиты отношения станций к игроку",
              "                RuinsRelationLimits['SB', 'Min'] = 10; //Научная база",
              "                RuinsRelationLimits['SB', 'Max'] = 100;",
              "                RuinsRelationLimits['RC', 'Min'] = 10; //Центр рейнджеров",
              "                RuinsRelationLimits['RC', 'Max'] = 100;",
              "                RuinsRelationLimits['WB', 'Min'] = 10; //Военная база",
              "                if(ShipRank(Player()) < 5) RuinsRelationLimits['WB', 'Max'] = 79;",
              "                else RuinsRelationLimits['WB', 'Max'] = 100; //Военное звание не ниже аса",
              "                RuinsRelationLimits['BK', 'Min'] = 10; //Бизнес-центр",
              "                RuinsRelationLimits['BK', 'Max'] = 100;",
              "                RuinsRelationLimits['MC', 'Min'] = 50; //Медицинский центр",
              "                RuinsRelationLimits['MC', 'Max'] = 100;",
              "                RuinsRelationLimits['TC', 'Min'] = 10; //Технологический центр",
              "                RuinsRelationLimits['TC', 'Max'] = 100;",
              "",
              "                RuinsRelationLimits['PB', 'Min'] = 10; //Пиратская база",
              "                RuinsRelationLimits['PB', 'Max'] = 50;",
              "                RuinsRelationLimits['CB', 'Min'] = 10; //Доминион",
              "                RuinsRelationLimits['CB', 'Max'] = 50;",
              "",
              "                //Также сразу меняем отношение к игроку для всех станций",
              "                ChangeRuinsRelationToPlayer(0, 0, 0, 0, 0, 0, 55, 100, 10, 35);",
              "                //RelationToRanger(cur_ruin, Player(), 30); //При этом отношение ПБ, на которой в данный момент сидит игрок, не должно опуститься до \"плохого\"",
              "                exit; //Прерываем код, чтобы обработчик ниже не залочил текущую станцию (вероятно, обновление отношения происходит не моментально)",
              "            }",
              "        }",
              "        else",
              "        {",
              "            //Игрок вступил в клан",
              "            if(ShipType(Player()) != 'RangerPiratePlayer')",
              "            {",
              "                //Меняем имя типа игрока (меняет названия характеров и приставку к имени)",
              "                ShipType(Player(), 'RangerPiratePlayer');",
              "",
              "                //Если подключен мод EvoFreeInflation, то исключаем игрока из списка рейнджеров",
              "                if(CurrentMods('Evolution\\EvoFreeInflation')) RangerExcludedFromRating(Player(), 1);",
              "",
              "                //Меняем лимиты отношения станций к игроку",
              "                RuinsRelationLimits['SB', 'Min'] = 10; //Научная база",
              "                RuinsRelationLimits['SB', 'Max'] = 50;",
              "                RuinsRelationLimits['RC', 'Min'] = 10; //Центр рейнджеров",
              "                RuinsRelationLimits['RC', 'Max'] = 50;",
              "                RuinsRelationLimits['WB', 'Min'] = 10; //Военная база",
              "                RuinsRelationLimits['WB', 'Max'] = 10;",
              "                RuinsRelationLimits['BK', 'Min'] = 10; //Бизнес-центр",
              "                RuinsRelationLimits['BK', 'Max'] = 100;",
              "                RuinsRelationLimits['MC', 'Min'] = 30; //Медицинский центр",
              "                RuinsRelationLimits['MC', 'Max'] = 79;",
              "                RuinsRelationLimits['TC', 'Min'] = 10; //Технологический центр",
              "                RuinsRelationLimits['TC', 'Max'] = 79;",
              "",
              "                RuinsRelationLimits['PB', 'Min'] = 10; //Пиратская база",
              "                RuinsRelationLimits['PB', 'Max'] = 100;",
              "                RuinsRelationLimits['CB', 'Min'] = 10; //Доминион",
              "                if(GetShipPirateRank(Player()) < 5) RuinsRelationLimits['CB', 'Max'] = 79;",
              "                else RuinsRelationLimits['CB', 'Max'] = 100; //Пиратское звание не ниже атамана",
              "",
              "                //Также сразу меняем отношение к игроку для всех станций",
              "                ChangeRuinsRelationToPlayer(0, 0, 0, 0, 0, 0, 10, 35, 55, 100);",
              "                exit; //Прерываем код, чтобы обработчик ниже не залочил текущую станцию (вероятно, обновление отношения происходит не моментально)",
              "            }",
              "        }",
              "    }",
              "",
              "    //Ловим глобальную смену отношения планет Коалиции только из диалогов ПБ и БЦ",
              "    if(cur_ruin_type == 'PB' || cur_ruin_type == 'BK')",
              "    {",
              "        //Перебираем галаэвенты и ищем события глобальной смены отношения планет Коалиции (если перебирать его из тёрна, то может пропуститься)",
              "        ChangeRuinsRelationFunFiller['GlobalRelationForCoalition'] = 0;",
              "        ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan'] = 0;",
              "        ChangeRuinsRelationFunFiller['CoalitionMinLimitRelation'] = 10;",
              "        ChangeRuinsRelationFunFiller['CoalitionMaxLimitRelation'] = 100;",
              "        ChangeRuinsRelationFunFiller['PirateClanMinLimitRelation'] = 10;",
              "        ChangeRuinsRelationFunFiller['PirateClanMaxLimitRelation'] = 100;",
              "        for(i = GalaxyEvents() - 1; i >= 0; i = i - 1)",
              "        {",
              "            if(i <= LastCheckedEventInDialog) break; //Чтобы не обрабатывались уже проверенные эвенты",
              "            if(GalaxyEventDate(i) < CurTurn()) break;",
              "",
              "            tstr1 = GalaxyEventType(i);",
              "            //Отношение за всякие пожертвования в БЦ и прочую муть",
              "            if(tstr1 == 'GlobalChangeToPlayerReputation')",
              "            {",
              "                tint1 = GalaxyEventData(i, 0); //Тип изменения репутации игрока",
              "                tint2 = GalaxyEventData(i, 2); //Сет овнеров, для которых нужно изменить отношение (используется для проверки пиратского овнера)",
              "                j = GalaxyEventData(i, 1); //Значение, на которое было изменено отношение",
              "",
              "                //Игрок на ПБ (контроль вступлений и выходов из клана происходит не здесь, но выше по коду)",
              "                if(cur_ruin_type == 'PB')",
              "                {",
              "                    if(tint1 == 1) //Повысить отношение до указанного значения (но не выше)",
              "                    {",
              "                        if(tint2 == 31) //Все расы Коалиции",
              "                        {",
              "                            if(j == 70) //Смена подданства",
              "                            {",
              "                                ChangeRuinsRelationFunFiller['CoalitionMinLimitRelation'] = 70;",
              "                                ChangeRuinsRelationFunFiller['PirateClanMinLimitRelation'] = 45;",
              "                            }",
              "                            //else if(j == 45) //Выход из клана, переход на сторону Коалиции",
              "                            //{",
              "                            //    ChangeRuinsRelationFunFiller['CoalitionMinLimitRelation'] = 45;",
              "                            //    ChangeRuinsRelationFunFiller['PirateClanMaxLimitRelation'] = 20;",
              "                            //}",
              "                        }",
              "                    }",
              "                    //else if(!tint1) //Понизить отношение до указанного значения (но не ниже)",
              "                    //{",
              "                    //    if(tint2 == 31) //Все расы Коалиции",
              "                    //    {",
              "                    //        if(j == 20) //Вступление в клан (только повторное, для первого вступления событие не вызывается)",
              "                    //        {",
              "                    //            ChangeRuinsRelationFunFiller['CoalitionMaxLimitRelation'] = 20;",
              "                    //            ChangeRuinsRelationFunFiller['PirateClanMinLimitRelation'] = 45;",
              "                    //        }",
              "                    //    }",
              "                    //}",
              "                }",
              "                //Игрок на БЦ",
              "                else",
              "                {",
              "                    if(tint1 == 2) //Прибавить указанное значение к уже имеющемуся, но не выше 100",
              "                    {",
              "                        if(tint2 == 31) //Все расы Коалиции",
              "                        {",
              "                            if(j == 10) //Игрок спонсировал постройку нового ЦР",
              "                            {",
              "                                ChangeRuinsRelationFunFiller['GlobalRelationForCoalition'] = 20;",
              "                                ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan'] = -20;",
              "                            }",
              "                            else if(j == 20) //Игрок спонсировал постройку военного флота для коалиционной планеты",
              "                            {",
              "                                ChangeRuinsRelationFunFiller['GlobalRelationForCoalition'] = 20;",
              "                                ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan'] = -30;",
              "                            }",
              "                            else if(j == 30) //Игрок спонсировал постройку новой ВБ, либо выплатил пособие пострадавшим семьям",
              "                            {",
              "                                ChangeRuinsRelationFunFiller['GlobalRelationForCoalition'] = 30;",
              "                                ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan'] = -20; //За пособие семьям отнимать отношение пиратов как-то глупо, но как разграничить эти два события я хз",
              "                            }",
              "                        }",
              "                        else if(tint2 == 2) //Пеленги",
              "                        {",
              "                            if(j == 20) //Первая часть из трёх последовательных вызовов GlobalChangeToPlayerReputation за спонсирование строительства ПБ",
              "                            {",
              "                                //Меняем отношение по выводу одной части, а все прочие вызовы из этой серии игнорим",
              "                                ChangeRuinsRelationFunFiller['GlobalRelationForCoalition'] = -20;",
              "                                ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan'] = 30;",
              "                            }",
              "                        }",
              "                    }",
              "                }",
              "            }",
              "        }",
              "",
              "        LastCheckedEventInDialog = GalaxyEvents() - 1;",
              "        //Если нашли соответствующие эвенты, то меняем отношение всех станций к игроку",
              "        if(ChangeRuinsRelationFunFiller['GlobalRelationForCoalition']  || ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan']      ||",
              "           ChangeRuinsRelationFunFiller['CoalitionMinLimitRelation'] != 10   || ChangeRuinsRelationFunFiller['CoalitionMaxLimitRelation'] != 100 ||",
              "           ChangeRuinsRelationFunFiller['PirateClanMinLimitRelation'] != 10  || ChangeRuinsRelationFunFiller['PirateClanMaxLimitRelation'] != 100)",
              "        {",
              "            ChangeRuinsRelationToPlayer(0,                                                      0,",
              "                                        0,                                                      0,",
              "                                        ChangeRuinsRelationFunFiller['GlobalRelationForCoalition'],  ChangeRuinsRelationFunFiller['GlobalRelationForPirateClan'],",
              "                                        ChangeRuinsRelationFunFiller['CoalitionMinLimitRelation'],   ChangeRuinsRelationFunFiller['CoalitionMaxLimitRelation'],",
              "                                        ChangeRuinsRelationFunFiller['PirateClanMinLimitRelation'],  ChangeRuinsRelationFunFiller['PirateClanMaxLimitRelation']);",
              "            exit; //Прерываем код, чтобы обработчик ниже не залочил текущую станцию (вероятно, обновление отношения происходит не моментально)",
              "        }",
              "    }",
              "",
              "    //Если отношение данной станции к игроку \"плохое\" или \"враждебное\"",
              "    if(RelationToRanger(cur_ruin, Player()) < 30)",
              "    {",
              "        //На случай, если игрок должен повысить звание, отключаем ввод оверрайда,",
              "        //т.к. звание ему хардкод всё равно всучит, а вот различные скрипты модов от такого могут поломаться",
              "        if(!ShipOnSidePirateClan(Player()))",
              "        {",
              "            if(cur_ruin_type == 'WB')",
              "            {",
              "                if(ShipRankPoints(Player()) >= ShipNextRankPoints(Player()))",
              "                {",
              "                    if(ShipRank(Player()) < 7)",
              "                    {",
              "                        RelationToRanger(cur_ruin, Player(), 35);",
              "                        exit;",
              "                    }",
              "                }",
              "            }",
              "        }",
              "        //А на ПБ всё равно выводится отдельный диалог перед выдачей звания, так что отмена оверрайда не требуется",
              "        /*",
              "        else",
              "        {",
              "            if(cur_ruin_type == 'PB')",
              "            {",
              "                if(ShipPirateRankPoints(Player()) >= ShipNextPirateRankPoints(Player()))",
              "                {",
              "                    if(GetShipPirateRank(Player()) < 7)",
              "                    {",
              "                        RelationToRanger(cur_ruin, Player(), 35);",
              "                        exit;",
              "                    }",
              "                }",
              "            }",
              "        }",
              "        */",
              "        ",
              "",
              "        //Блокируем стандартные кнопки магазинов и инфоцентра, заменяем их на свои",
              "        InterfaceState('RuinsTalk', 'PR_Shop', 0);",
              "        InterfaceState('RuinsTalk', 'PR_ShopBlock', 1);",
              "        InterfaceState('RuinsTalk', 'PR_Goods', 0);",
              "        InterfaceState('RuinsTalk', 'PR_GoodsBlock', 1);",
              "        InterfaceState('RuinsTalk', 'PR_Info', 0);",
              "        InterfaceState('RuinsTalk', 'PR_InfoBlock', 1);",
              "        InterfaceState('RuinsTalk', 'PM_EndTurn', 0);",
              "        InterfaceState('RuinsTalk', 'RT_EndTurn_Block', 1);",
              "        //Выключаем панель Ассистента",
              "        InterfaceState('RuinsTalk', 'AstAddRuins', 0);",
              "",
              "        //Добавляем игроку инфошку \"подробной блокировки\" формы Ship",
              "        if(ShipFindCustomShipInfoByType(Player(), 'ExpTraitors_RuinsBlock') == -1) ShipAddCustomShipInfo(Player(), 'ExpTraitors_RuinsBlock', 'NoShow');",
              "",
              "        //Вешаем оверрайд блокировки станции:",
              "        //Научная база",
              "        //if(cur_ruin_type == 'SB') AddDialogOverride('SB', 100000);",
              "        //Центр рейнджеров",
              "        //else if(cur_ruin_type == 'RC') AddDialogOverride('RC', 100000);",
              "        //Военная база",
              "        //else if(cur_ruin_type == 'WB') AddDialogOverride('WB', 100000);",
              "        //Бизнес-центр",
              "        //else if(cur_ruin_type == 'BK') AddDialogOverride('BK', 100000);",
              "        //Технологический центр (мод ExpTC)",
              "        //else if(cur_ruin_type == 'TC') AddDialogOverride('TC', 100000);",
              "        //Пиратская база",
              "        //else if(cur_ruin_type == 'PB') AddDialogOverride('PB', 100000);",
              "        //Доминион",
              "        //else if(cur_ruin_type == 'CB') AddDialogOverride('CB', 100000);",
              "",
              "        AddDialogOverride(cur_ruin_type, 100000);",
              "    }",
              "}"          
          ]        
        }      
      ],
      "Planets":      
      [
        {
          "Type":  "TPlanet",
          "Name":  "PlanetPla",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  1,
          "#":  2,
          "Race":  62,
          "Owner":  62,
          "Economy":  14,
          "Goverment":  62,
          "RangeMin":  0,
          "RangeMax":  100,
          "Dialog":  -1        
        }      
      ],
      "Ships":      
      [
        {
          "Type":  "TStarShip",
          "Name":  "",
          "Pos.x":  60,
          "Pos.y":  80,
          "Parent":  -1,
          "#":  0,
          "Count":  1,
          "Owner":  62,
          "Ship.Type":  126,
          "Player":  true,
          "SpeedMin":  0,
          "SpeedMax":  10000,
          "Weapon":  0,
          "CargoHook":  0,
          "EmptySpace":  0,
          "StatusTraderMin":  0,
          "StatusTraderMax":  100,
          "StatusWarriorMin":  0,
          "StatusWarriorMax":  100,
          "StatusPirateMin":  0,
          "StatusPirateMax":  100,
          "StrengthMin":  "0",
          "StrengthMax":  "0",
          "Ruins":  ""        
        }      
      ],
      "Stars":      
      [
        {
          "Type":  "TStar",
          "Name":  "StarPla",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  0,
          "#":  1,
          "Constellation":  0,
          "Priority":  0,
          "NoKling":  false,
          "NoComeKling":  false        
        }      
      ],
      "Statements":      
      [
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  26,
          "#":  35,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "!PlayerDebt()"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  50,
          "Pos.y":  20,
          "Parent":  26,
          "#":  36,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "PlayerDebt()"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  56,
          "#":  39,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) >= PlayerDebt()"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  20,
          "Pos.y":  60,
          "Parent":  31,
          "#":  40,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) < PlayerDebt()"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  40,
          "Pos.y":  60,
          "Parent":  31,
          "#":  42,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  550,
          "Pos.y":  190,
          "Parent":  -1,
          "#":  51,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player())>=RuinBribe"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  570,
          "Pos.y":  190,
          "Parent":  -1,
          "#":  52,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  40,
          "Parent":  31,
          "#":  56,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  57,
          "#":  59,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) >= RuinBribe"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  20,
          "Pos.y":  20,
          "Parent":  57,
          "#":  60,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  67,
          "#":  68,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) >= RuinBribe"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  20,
          "Pos.y":  20,
          "Parent":  67,
          "#":  69,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  620,
          "Pos.y":  190,
          "Parent":  -1,
          "#":  78,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  600,
          "Pos.y":  190,
          "Parent":  -1,
          "#":  79,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player())>=RuinBribe"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  490,
          "Pos.y":  190,
          "Parent":  -1,
          "#":  89,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "ShipMoney(Player()) >= RuinBribe"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  520,
          "Pos.y":  190,
          "Parent":  -1,
          "#":  90,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  60,
          "Pos.y":  -20,
          "Parent":  5,
          "#":  105,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "!ShipIsTakeoff(Player())"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  410,
          "Pos.y":  250,
          "Parent":  -1,
          "#":  106,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  600,
          "Pos.y":  130,
          "Parent":  -1,
          "#":  123,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  550,
          "Pos.y":  130,
          "Parent":  -1,
          "#":  124,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  34,
          "#":  125,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        },
        {
          "Type":  "Tif",
          "Name":  "",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  32,
          "#":  126,
          "Total.Lines":  1,
          "Code.Type":  "Turn",
          "Code":          
          [
              "1"          
          ]        
        }      
      ],
      "States":      
      [
        {
          "Type":  "TState",
          "Name":  "PlayerState",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  3,
          "#":  4,
          "Move":  0,
          "MoveObj":  -1,
          "Attack.Count":  0,
          "TakeItem":  -1,
          "TakeAllItem":  false,
          "OnTalk":  "",
          "OnActCode":  "[t_OnEnteringForm|]\r\nPlayerActCode();",
          "EType":  1,
          "EUnique":  "",
          "EMsg":  ""        
        },
        {
          "Type":  "TState",
          "Name":  "TraitorsFreeState",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  9,
          "#":  10,
          "Move":  5,
          "MoveObj":  -1,
          "Attack.Count":  0,
          "TakeItem":  -1,
          "TakeAllItem":  false,
          "OnTalk":  "",
          "OnActCode":  "",
          "EType":  1,
          "EUnique":  "",
          "EMsg":  ""        
        }      
      ],
      "Variables":      
      [
        {
          "Type":  "TVar",
          "Name":  "i",
          "Pos.x":  60,
          "Pos.y":  230,
          "Parent":  -1,
          "#":  7,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "int0",
          "Pos.x":  510,
          "Pos.y":  10,
          "Parent":  -1,
          "#":  8,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "j",
          "Pos.x":  30,
          "Pos.y":  0,
          "Parent":  7,
          "#":  11,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "RuinBribe",
          "Pos.x":  420,
          "Pos.y":  -10,
          "Parent":  -1,
          "#":  46,
          "Var.Type":  "Int",
          "Init":  "0",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "TempRace",
          "Pos.x":  420,
          "Pos.y":  10,
          "Parent":  -1,
          "#":  96,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "MoneyGoes",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  115,
          "#":  104,
          "Var.Type":  "Int",
          "Init":  "-1",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "cur_ruin",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  119,
          "#":  108,
          "Var.Type":  "Dword",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "tstr1",
          "Pos.x":  170,
          "Pos.y":  230,
          "Parent":  -1,
          "#":  109,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "cur_ruin_type",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  117,
          "#":  110,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "TortugatzId",
          "Pos.x":  -40,
          "Pos.y":  80,
          "Parent":  -1,
          "#":  111,
          "Var.Type":  "Dword",
          "Init":  "70",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "NifigatzId",
          "Pos.x":  -40,
          "Pos.y":  100,
          "Parent":  -1,
          "#":  112,
          "Var.Type":  "Dword",
          "Init":  "71",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "cur_star",
          "Pos.x":  60,
          "Pos.y":  320,
          "Parent":  -1,
          "#":  113,
          "Var.Type":  "Dword",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "tint1",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  7,
          "#":  114,
          "Var.Type":  "Int",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "tint2",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  114,
          "#":  115,
          "Var.Type":  "Int",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "tstr2",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  109,
          "#":  116,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "tstr3",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  116,
          "#":  117,
          "Var.Type":  "Str",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "RuinsRelationLimits",
          "Pos.x":  150,
          "Pos.y":  120,
          "Parent":  -1,
          "#":  118,
          "Var.Type":  "Unknown",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "cur_planet",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  113,
          "#":  119,
          "Var.Type":  "Dword",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "cur_ship",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  108,
          "#":  120,
          "Var.Type":  "Dword",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "NextTraitorSpawnTurn",
          "Pos.x":  150,
          "Pos.y":  140,
          "Parent":  -1,
          "#":  121,
          "Var.Type":  "Int",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "cur_item",
          "Pos.x":  0,
          "Pos.y":  20,
          "Parent":  120,
          "#":  122,
          "Var.Type":  "Dword",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "ChangeRuinsRelationFunFiller",
          "Pos.x":  150,
          "Pos.y":  100,
          "Parent":  -1,
          "#":  127,
          "Var.Type":  "Unknown",
          "Init":  "",
          "Global":  true        
        },
        {
          "Type":  "TVar",
          "Name":  "LastCheckedEventInDialog",
          "Pos.x":  150,
          "Pos.y":  180,
          "Parent":  -1,
          "#":  129,
          "Var.Type":  "Int",
          "Init":  "",
          "Global":  false        
        },
        {
          "Type":  "TVar",
          "Name":  "LastProcessedTurn",
          "Pos.x":  150,
          "Pos.y":  160,
          "Parent":  -1,
          "#":  130,
          "Var.Type":  "Int",
          "Init":  "",
          "Global":  false        
        }      
      ]    
    }  
  ],
  "Visual.Links":  
  [
    {
      "Type":  "TGraphLink",
      "Begin":  3,
      "End":  4,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  3,
      "End":  2,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  2,
      "End":  1,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  0,
      "End":  1,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  9,
      "End":  2,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  9,
      "End":  10,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  12,
      "End":  15,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  15,
      "End":  14,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  13,
      "End":  16,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  16,
      "End":  17,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  18,
      "End":  23,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  23,
      "End":  28,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  19,
      "End":  24,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  24,
      "End":  29,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  20,
      "End":  25,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  25,
      "End":  30,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  21,
      "End":  26,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  22,
      "End":  27,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  27,
      "End":  32,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  26,
      "End":  35,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  26,
      "End":  36,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  35,
      "End":  34,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  36,
      "End":  31,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  31,
      "End":  39,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  31,
      "End":  40,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  40,
      "End":  38,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  39,
      "End":  37,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  31,
      "End":  42,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  42,
      "End":  41,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  33,
      "End":  43,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  47,
      "End":  44,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  49,
      "End":  50,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  45,
      "End":  48,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  48,
      "End":  49,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  43,
      "End":  51,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  51,
      "End":  45,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  43,
      "End":  52,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  52,
      "End":  47,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  37,
      "End":  53,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  53,
      "End":  54,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  31,
      "End":  56,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  56,
      "End":  55,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  55,
      "End":  57,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  57,
      "End":  59,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  59,
      "End":  58,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  63,
      "End":  64,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  60,
      "End":  63,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  57,
      "End":  60,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  58,
      "End":  62,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  62,
      "End":  61,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  61,
      "End":  65,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  66,
      "End":  67,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  67,
      "End":  68,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  67,
      "End":  69,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  68,
      "End":  70,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  69,
      "End":  71,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  70,
      "End":  72,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  72,
      "End":  73,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  71,
      "End":  75,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  73,
      "End":  74,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  76,
      "End":  77,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  77,
      "End":  79,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  77,
      "End":  78,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  79,
      "End":  81,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  81,
      "End":  82,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  82,
      "End":  83,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  83,
      "End":  85,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  78,
      "End":  80,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  80,
      "End":  84,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  86,
      "End":  87,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  87,
      "End":  89,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  87,
      "End":  90,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  89,
      "End":  91,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  90,
      "End":  92,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  92,
      "End":  95,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  91,
      "End":  93,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  93,
      "End":  94,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  14,
      "End":  97,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  97,
      "End":  86,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  29,
      "End":  98,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  44,
      "End":  98,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  30,
      "End":  99,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  84,
      "End":  99,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  32,
      "End":  101,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  75,
      "End":  101,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  34,
      "End":  100,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  64,
      "End":  100,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  97,
      "End":  102,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  54,
      "End":  100,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  17,
      "End":  102,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  105,
      "End":  103,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  95,
      "End":  106,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  106,
      "End":  97,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  123,
      "End":  76,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  124,
      "End":  33,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  125,
      "End":  55,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  126,
      "End":  66,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  94,
      "End":  128,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  28,
      "End":  88,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  32,
      "End":  126,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  30,
      "End":  123,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  29,
      "End":  124,
      "Nom":  0,
      "Arrow":  true    
    },
    {
      "Type":  "TGraphLink",
      "Begin":  34,
      "End":  125,
      "Nom":  0,
      "Arrow":  true    
    }  
  ],
  "BlockPar.EC.Total.Strings":  43,
  "BlockPar.EC":  
  [
    {
      "#":  "100",
      "String":  "Очень жаль, но вы сами втянули себя в эти неприятности. Если цена исправления репутации вам не подходит, то рекомендуем провести самостоятельную и честную \"работу над ошибками\", после которой мы будем рады возобновить наше плодотворное сотрудничество.<br>До тех же пор я вынужден требовать вас покинуть этот технологический центр."    
    },
    {
      "#":  "102",
      "String":  "Гип-гип ура! Да здравствует наш великий лидер!<br>Смиренно сообщаем, что налоги с системы <color=255,240,100>Нифигац</color> в размере <0> cr., были только что переведены на твой личный счёт."    
    },
    {
      "#":  "103",
      "String":  "Ну, в таком случае разговаривать нам больше не о чем. Покиньте эту станцию и найдите способ исправить вашу репутацию более показательным путём."    
    },
    {
      "#":  "16",
      "String":  "Вернуть кредит <0> cr."    
    },
    {
      "#":  "18",
      "String":  "Отлично, <Player>! Вы, безусловно, рейнджер слова.<br>К сожалению, о дальнейшем сотрудничестве в данный момент не может идти и речи, но мы искренне желаем вам удачи в вашем нелёгком... деле. Выход вон там."    
    },
    {
      "#":  "24",
      "String":  "</color>гаалец"    
    },
    {
      "#":  "25",
      "String":  "</color>фэянин"    
    },
    {
      "#":  "26",
      "String":  "</color>человек"    
    },
    {
      "#":  "27",
      "String":  "</color>пеленг"    
    },
    {
      "#":  "28",
      "String":  "</color>малок"    
    },
    {
      "#":  "29",
      "String":  "<Player>, а ты ничего не попутал часом? Топал бы лучше отседа, пока братки не прочухали! У нас тут несчастные случаи, знаешь, случаются с теми, кто авторитет клана признавать отказывается."    
    },
    {
      "#":  "3",
      "String":  "Уже ухожу"    
    },
    {
      "#":  "31",
      "String":  "Что?!! Проклятый пират, да кто тебе вообще позволил загнать корабль в наши доки!?<br>А ну быстро развернул своё ведро и пулей отсюда, пока я не приказал отправить тебя под военный трибунал!!!"    
    },
    {
      "#":  "33",
      "String":  "Рейнджер <Player>, ваше поведение было признано неприемлемым, а ваше присутствие на нашей станции - нежелательным.<br>Пожалуйста, покиньте научную базу <0>, и воздержитесь от её дальнейшего посещения до тех пор, пока не восстановите репутацию благонадёжного гуманоида."    
    },
    {
      "#":  "34",
      "String":  "Извините, <Player>, но не в наших интересах в открытую вести дела с преступниками. Плохо влияет на репутацию, знаете ли.<br>Само собой, кредитный долг за вами всё ещё числится, а потому мы любезно позволим вам его погасить, однако сразу же после - настоятельно просим проследовать на выход."    
    },
    {
      "#":  "36",
      "String":  "Извините, <Player>, но не в наших интересах в открытую вести дела с преступниками. Плохо влияет на репутацию, знаете ли.<br>Возвращайтесь, когда станете законопослушным рейнджером, ну а пока - настоятельно просим вас покинуть наш бизнес-центр."    
    },
    {
      "#":  "44",
      "String":  "Не сомневайтесь, <Player>! Отныне вы снова в белом списке и вольны вести любую не запрещённую законом деятельность.<br>Кстати, ваших денег нам как раз хватит на проведение планового техобслуживания станции, так что, от имени всех недовольных сломанными кондиционерами сотрудников, позвольте выразить вам особую, персональную благодарность."    
    },
    {
      "#":  "47",
      "String":  "Я рад, что мы смогли найти общий язык, <Player>. Все ограничения вашей деятельности на нашей базе полностью сняты.<br>Очень надеемся, что впредь вы будете воздерживаться от столь вопиющего нарушения общественных норм."    
    },
    {
      "#":  "52",
      "String":  "Пора растопить лёд в наших отношениях. Скажите прямо, чего вы хотите!"    
    },
    {
      "#":  "53",
      "String":  "Покинуть бизнес-центр"    
    },
    {
      "#":  "54",
      "String":  "Хорошо, в таком случае я надеюсь, что эти <0> cr. послужат процветанию рейнджерского движения!"    
    },
    {
      "#":  "57",
      "String":  "Хорошо, в таком случае я надеюсь, что эти <0> cr. поспособствуют скорейшему возобновлению наших дружеских отношений!"    
    },
    {
      "#":  "58",
      "String":  "Да, вполне устроит. Перевожу <0> cr. на ваш счёт прямо сейчас."    
    },
    {
      "#":  "62",
      "String":  "Рейнджер <Player>, сеть наших центров крайне разочарована вашим поведением. Вы позорите не только себя, но само благородное имя рейнджера!<br>До тех пор, пока вы не измените своё поведение в лучшую сторону, мы решительно не намерены терпеть здесь ваше присутствие. Немедленно покиньте эту станцию. В противном случае мы будем вынуждены применить силу!"    
    },
    {
      "#":  "63",
      "String":  "Что ж, в качестве залога за ваше будущее исправление, мы могли бы принять скромный взнос в размере <0> cr.<br>Эти средства будут пущены на поощрение деятельности других рейнджеров, что поможет хотя бы частично загладить вашу вину перед коллегами."    
    },
    {
      "#":  "66",
      "String":  "Взнос принят, однако не питайте иллюзий, <Player>. Деньги - плата лишь символическая.<br>Настоящее исправление ждёт вас впереди. Идите, и докажите Галактике, что мы не ошиблись, выдав вам этот рейнджерский значок."    
    },
    {
      "#":  "68",
      "String":  "Боюсь, что такой взнос для меня великоват"    
    },
    {
      "#":  "71",
      "String":  "Лучше смотри, как бы тебе собственный череп не стал великоват! А то мы с братанами, если чё, и подправить можем."    
    },
    {
      "#":  "74",
      "String":  "Что ж, очень жаль, но никак иначе поспособствовать вашему исправлению мы не можем. Желаем вам удачи в поисках искупления где-нибудь в другом месте.<br>А теперь, если вы не против, настоятельно просим вас проследовать в направлении выхода."    
    },
    {
      "#":  "75",
      "String":  "Что ж, ваши прегрешения перед разумной и ответственной формой поведения бесспорны, и с этим мы поделать ничего не сможем. Однако, в качестве частичной компенсации причинённого вами вреда, мы могли бы взыскать с вас штраф в размере <0> cr., который будет незамедлительно пущен на благие цели.<br>Устроит вас такой компромисс?"    
    },
    {
      "#":  "77",
      "String":  "Слушай, ну может уж как-нибудь договоримся по-братски, а?"    
    },
    {
      "#":  "78",
      "String":  "Ага, значит, как по беспределу парней валить, так это ты первый, а как за поступки отвечать, так: \"Ну пожалуйста, ну по-братски, ня-ня-ня...\" - так что ли?!<br>Вот что я тебе скажу, <Player> - паршивый ты <0>. Паршивый и жалкий. Блеванул бы тебе под ноги, да после вчерашнего пойла нечем больше. Однако даже таким личностям как ты братство в нужде не отказывает. Не забесплатно правда.<br>Короче, сумму в <1> cr. в общак гони - и на эту твою гниль мы пока что глаза прикроем."    
    },
    {
      "#":  "79",
      "String":  "Каюсь - тварь я дрожащая! Вот ваши <0> cr., а братанов больше обижать не буду"    
    },
    {
      "#":  "80",
      "String":  "Ладно, уже свалил"    
    },
    {
      "#":  "81",
      "String":  "Ну ладно, так уж и быть - гуляй, рванина! Хоть пацаны за твой счёт попируют как следует.<br>Так что ты там хотел на базе-то? Говори - теперь уж никто не укусит, хе-хе."    
    },
    {
      "#":  "83",
      "String":  "Хорошо, в таком случае я надеюсь, что эти <0> cr. достойно послужат делу мира и процветания твоей продажной задницы! Счетовод ты грёбаный!"    
    },
    {
      "#":  "84",
      "String":  "В таком случае я боюсь, что ничем не могу вам помочь.<br>Попрошу проследовать на выход, и постарайтесь по пути не слишком сильно хлопать дверью из гаалдокского мраморного дерева. Дверь, между прочим, была куплена на добровольное пожертвование одного вашего предшественника, который прямо сейчас бороздит просторы вселенной на новёхоньком корабле, приобретённом на предоставленный НАМИ кредит.<br>Просто подумайте об этом, рейнджер <Player>."    
    },
    {
      "#":  "86",
      "String":  "Ну а сами вы как думаете, находясь в кабинете управляющего одного из галактических бизнес-центров?<br>Даю подсказку - это число, и число это, так уж вышло, кратно цифре <0>. ЕДИНО-кратно, если быть совсем точным. Я всё-таки бизнесмен, а не грабитель."    
    },
    {
      "#":  "89",
      "String":  "А вы не слишком-то хороши в деловых переговорах, не так ли? Ладно, принимаю ваше скромное благотворительное пожертвование на содержание наших, скажем... аквариумов с вымирающим видом рахишского квагляшмыга.<br>Ну вот, теперь на всю ближайшую неделю вы внесены в список наших добровольных спонсоров, а значит, имеете право приоритетного обслуживания вне зависимости от вашей текущей репутации.<br>Так чем я могу помочь вам, уважаемый спонсор?"    
    },
    {
      "#":  "91",
      "String":  "Ну и ладно, не очень-то и хотелось!"    
    },
    {
      "#":  "93",
      "String":  "Вах, да вы только поглядите! Это какого же интересного рейнджера к нам тут звёздным ветром занесло!<br>Что, <Player>, попал ты в чёрный список? Да вижу, что попал - не отнекивайся. Ну и что, так прям сразу и решил \"на родные берега\" якорь закинуть? Думал, что свои прикроют? Что свои своим всегда рады?<br>Так вот знай - не братаны мы тебе больше, понял!!? Вымётывайся отсюда, гнида сраколицая, пока собственными сапогами тебя в мусорный шлюз не затолкал!!!"    
    },
    {
      "#":  "94",
      "String":  "Рейнджер <Player>, на нашей станции вы являетесь крайне нежелательным гостем. Вся ваша репутация буквально кричит о том, что вести с вами какие бы то ни было дела себе дороже.<br>Руководствуясь данными соображениями, мы вынуждены просить вас покинуть наши скромные доки. Прямо сейчас!"    
    },
    {
      "#":  "97",
      "String":  "Ну, думаю, что за разумную цену мы могли бы временно закрыть глаза на вашу очевидную неблагонадёжность.<br>Скажем, <0> cr. По рукам?"    
    }  
  ]
}