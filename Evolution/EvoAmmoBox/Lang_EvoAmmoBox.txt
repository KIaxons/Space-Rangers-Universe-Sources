Script ^{
    Mod_EvoAmmoBox ~{
        48=Рейнджер <Player>, вас явно интересует автономное пополнение снарядов для ракетного вооружения. У нас есть, что вам предложить!
        51=Мы можем предложить вам контейнеры для пополнения запасов различного вида ракетного вооружения. Но мы не продаём свои разработки кому попало, ваш военный ранг и сведения о ваших поступках лучшая характеристика для нас.<br>И благодаря нашим умам из научного цеха в контейнеры интегрированы преобразователи любых снарядов в ракеты, что позволяет с лёгкостью пополнять ракетный контейнер любым другим.<br>---------------------------------------------------------<br>Контейнер с боеголовками для Лирекрона для вас доступен в количестве: <0> ед. по цене: <1> cr.<br><br>Контейнер с ракетами для Ракетницы для Вас доступен в количестве: <2> ед. по цене: <3> cr.<br><br>Контейнер со сферами для Мабокита для Вас доступен в количестве: <4> ед. по цене: <5> cr.<br><br>Контейнер с торпедами для Торпедного аппарата для Вас доступен в количестве: <6> ед. по цене: <7> cr.<br>---------------------------------------------------------<br>Раз в год мы очищаем базу данных о клиентах и у Вас есть шанс использовать эту возможность, главное не проморгать момент.
        41=Отличный выбор! Контейнеры доставлены в трюм вашего корабля.
        50=Недостаточно средств для совершения покупки.
        42=Купить контейнер с боеголовками
        35=Мне не нужны никакие ящики!
        4=Спасибо
        43=Купить контейнер с ракетами
        44=Купить контейнер со сферами
        45=Купить контейнер с торпедами
        39=Ну и ладно, обойдусь!
    }
}
UselessItems ^{
    Container_lirekron ^{
        Cost=Average
        Name=Контейнер с боеголовками
        OnActCode ^{
            01=if (ScriptItemActionType()==t_OnAnotherItem)
            02 ^{
                01=if (ItemType(ScriptItemActObject1())==t_Weapon18)
                02 ^{
                    01=if (MissilesToRearm(ScriptItemActObject1())>0 && UselessItemData(CurItem(),2)>0)
                    02 ^{
                        01=if (MessageBoxYesNo('Пополнить боезапас?'))
                        02 ^{
                            00=UselessItemData(CurItem(),3,UselessItemData(CurItem(),3)-1);
                            01=if (MissilesToRearm(ScriptItemActObject1())>=UselessItemData(CurItem(),2))
                            02 ^{
                                01=MissilesToRearm(ScriptItemActObject1(),UselessItemData(CurItem(),2));
                                02=UselessItemData(CurItem(),2,0);
                                03=ScriptItemActParam(2);
                            }
                            03=else
                            04 ^{
                                01=UselessItemData(CurItem(),2,(UselessItemData(CurItem(),2)-MissilesToRearm(ScriptItemActObject1())));
                                02=MissilesToRearm(ScriptItemActObject1(),MissilesToRearm(ScriptItemActObject1()));
                                03=ScriptItemActParam(2);
                            }
                            05=if(UselessItemData(CurItem(),3)==0)
                            05 ^{
                                00=MessageBox('Контейнер не выдержал такого обращения и развалился');
                                01=ScriptItemActParam(1);
                                02=exit;
                            }
                            06=exit;
                        }
                        03=else exit;
                    }
                    03=else exit;
                }
                04=if (ItemType(ScriptItemActObject1())==t_UselessItem && findsubstr(EquipmentImageName(ScriptItemActObject1()),'Container_lirekron')==0)
                05 ^{
                    01=if (UselessItemData(ScriptItemActObject1(),1)-UselessItemData(ScriptItemActObject1(),2)>0 && UselessItemData(CurItem(),2)>0)
                    02 ^{
                        01=if (MessageBoxYesNo('Переместить боевые снаряды?'))
                        02 ^{
                            00=UselessItemData(CurItem(),3,UselessItemData(CurItem(),3)-1);
                            01=if (UselessItemData(ScriptItemActObject1(),1)-UselessItemData(ScriptItemActObject1(),2)>=UselessItemData(CurItem(),2))
                            02 ^{
                                01=UselessItemData(ScriptItemActObject1(),2,UselessItemData(ScriptItemActObject1(),2)+UselessItemData(CurItem(),2));
                                02=UselessItemData(CurItem(),2,0);
                                03=ScriptItemActParam(2);
                            }
                            03=else
                            04 ^{
                                01=UselessItemData(CurItem(),2,UselessItemData(CurItem(),2)+UselessItemData(ScriptItemActObject1(),2)-UselessItemData(ScriptItemActObject1(),1));
                                02=UselessItemData(ScriptItemActObject1(),2,UselessItemData(ScriptItemActObject1(),1));
                                03=ScriptItemActParam(2);
                            }
                            05=if(UselessItemData(CurItem(),3)==0)
                            05 ^{
                                00=MessageBox('Контейнер не выдержал такого обращения и развалился');
                                01=ScriptItemActParam(1);
                                02=exit;
                            }
                            06=exit;
                        }
                        03=else exit;
                    }
                    03=else exit;
                }
            }
            03=if (ScriptItemActionType()==t_OnAnotherItem2)
            04 ^{
                01=if (EqModule(ScriptItemActObject1())==FindBonusByCustomTag('empty_mm')) exit;
                02=if (ItemType(ScriptItemActObject1())==t_Weapon18)
                03 ^{
                    01=if (UselessItemData(CurItem(),1)-UselessItemData(CurItem(),2)>0)
                    02 ^{
                        01=if ((25+5*ItemLevel(ScriptItemActObject1())-MissilesToRearm(ScriptItemActObject1()))>0)
                        02 ^{
                            01=if (MessageBoxYesNo('Переместить боевые снаряды?'))
                            02 ^{
                                00=UselessItemData(CurItem(),3,UselessItemData(CurItem(),3)-1);
                                01=dword missile_container;
                                02=dword missile_weapon;
                                03=missile_container=UselessItemData(CurItem(),1)-UselessItemData(CurItem(),2);
                                04=missile_weapon=25+5*ItemLevel(ScriptItemActObject1())-MissilesToRearm(ScriptItemActObject1());
                                05=if (missile_weapon>missile_container)
                                06 ^{
                                    01=MissilesToRearm(ScriptItemActObject1(),(0-missile_container));
                                    02=UselessItemData(CurItem(),2,UselessItemData(CurItem(),2)+missile_container);
                                    03=ScriptItemActParam(2);
                                }
                                07=else
                                08 ^{
                                    01=UselessItemData(CurItem(),2,UselessItemData(CurItem(),2)+missile_weapon);
                                    02=MissilesToRearm(ScriptItemActObject1(),(0-missile_weapon));
                                    03=ScriptItemActParam(2);
                                }
                                09=if(UselessItemData(CurItem(),3)==0)
                                09 ^{
                                    00=MessageBox('Контейнер не выдержал такого обращения и развалился');
                                    01=ScriptItemActParam(1);
                                    02=exit;
                                }
                                10=exit;
                            }
                            03=else exit;
                        }
                        03=else exit;
                    }
                    03=else exit;
                }
                04=else exit;
            }
            05=if (ScriptItemActionType()==t_OnItemHit)
            06 ^{
            }
        }
        Owner=None
        Size=20
        Text=Ёмкость для хранения миниатюрных боеголовок.
        Text=Кол-во: <Data2>/<Data1>, выдержит использований: <Data3>
    }
    Container_missile ^{
        Cost=Average
        Name=Контейнер с ракетами
        OnActCode ^{
            01=if (ScriptItemActionType()==t_OnAnotherItem)
            02 ^{
                01=if (ItemType(ScriptItemActObject1())==t_Weapon4)
                02 ^{
                    01=if (MissilesToRearm(ScriptItemActObject1())>0 && UselessItemData(CurItem(),2)>0)
                    02 ^{
                        01=if (MessageBoxYesNo('Пополнить боезапас?'))
                        02 ^{
                            00=UselessItemData(CurItem(),3,UselessItemData(CurItem(),3)-1);
                            01=if (MissilesToRearm(ScriptItemActObject1())>=UselessItemData(CurItem(),2))
                            02 ^{
                                01=MissilesToRearm(ScriptItemActObject1(),UselessItemData(CurItem(),2));
                                02=UselessItemData(CurItem(),2,0);
                                03=ScriptItemActParam(2);
                            }
                            03=else
                            04 ^{
                                01=UselessItemData(CurItem(),2,(UselessItemData(CurItem(),2)-MissilesToRearm(ScriptItemActObject1())));
                                02=MissilesToRearm(ScriptItemActObject1(),MissilesToRearm(ScriptItemActObject1()));
                                03=ScriptItemActParam(2);
                            }
                            05=if(UselessItemData(CurItem(),3)==0)
                            05 ^{
                                00=MessageBox('Контейнер не выдержал такого обращения и развалился');
                                01=ScriptItemActParam(1);
                                02=exit;
                            }
                            06=exit;
                        }
                        03=else exit;
                    }
                    03=else exit;
                }
                04=if (ItemType(ScriptItemActObject1())==t_UselessItem && findsubstr(EquipmentImageName(ScriptItemActObject1()),'Container_missile')==0)
                05 ^{
                    01=if (UselessItemData(ScriptItemActObject1(),1)-UselessItemData(ScriptItemActObject1(),2)>0 && UselessItemData(CurItem(),2)>0)
                    02 ^{
                        01=if (MessageBoxYesNo('Переместить боевые снаряды?'))
                        02 ^{
                            00=UselessItemData(CurItem(),3,UselessItemData(CurItem(),3)-1);
                            01=if (UselessItemData(ScriptItemActObject1(),1)-UselessItemData(ScriptItemActObject1(),2)>=UselessItemData(CurItem(),2))
                            02 ^{
                                01=UselessItemData(ScriptItemActObject1(),2,UselessItemData(ScriptItemActObject1(),2)+UselessItemData(CurItem(),2));
                                02=UselessItemData(CurItem(),2,0);
                                03=ScriptItemActParam(2);
                            }
                            03=else
                            04 ^{
                                01=UselessItemData(CurItem(),2,UselessItemData(CurItem(),2)+UselessItemData(ScriptItemActObject1(),2)-UselessItemData(ScriptItemActObject1(),1));
                                02=UselessItemData(ScriptItemActObject1(),2,UselessItemData(ScriptItemActObject1(),1));
                                03=ScriptItemActParam(2);
                            }
                            05=if(UselessItemData(CurItem(),3)==0)
                            05 ^{
                                00=MessageBox('Контейнер не выдержал такого обращения и развалился');
                                01=ScriptItemActParam(1);
                                02=exit;
                            }
                            06=exit;
                        }
                        03=else exit;
                    }
                    03=else exit;
                }
            }
            03=if (ScriptItemActionType()==t_OnAnotherItem2)
            04 ^{
                01=if (EqModule(ScriptItemActObject1())==FindBonusByCustomTag('empty_mm')) exit;
                02=if (ItemType(ScriptItemActObject1())==t_Weapon4)
                03 ^{
                    01=if (UselessItemData(CurItem(),1)-UselessItemData(CurItem(),2)>0)
                    02 ^{
                        01=if ((25+5*ItemLevel(ScriptItemActObject1())-MissilesToRearm(ScriptItemActObject1()))>0)
                        02 ^{
                            01=if (MessageBoxYesNo('Переместить боевые снаряды?'))
                            02 ^{
                                00=UselessItemData(CurItem(),3,UselessItemData(CurItem(),3)-1);
                                01=dword missile_container;
                                02=dword missile_weapon;
                                03=missile_container=UselessItemData(CurItem(),1)-UselessItemData(CurItem(),2);
                                04=missile_weapon=25+5*ItemLevel(ScriptItemActObject1())-MissilesToRearm(ScriptItemActObject1());
                                05=if (missile_weapon>missile_container)
                                06 ^{
                                    01=MissilesToRearm(ScriptItemActObject1(),(0-missile_container));
                                    02=UselessItemData(CurItem(),2,UselessItemData(CurItem(),2)+missile_container);
                                    03=ScriptItemActParam(2);
                                }
                                07=else
                                08 ^{
                                    01=UselessItemData(CurItem(),2,UselessItemData(CurItem(),2)+missile_weapon);
                                    02=MissilesToRearm(ScriptItemActObject1(),(0-missile_weapon));
                                    03=ScriptItemActParam(2);
                                }
                                09=if(UselessItemData(CurItem(),3)==0)
                                09 ^{
                                    00=MessageBox('Контейнер не выдержал такого обращения и развалился');
                                    01=ScriptItemActParam(1);
                                    02=exit;
                                }
                                10=exit;
                            }
                            03=else exit;
                        }
                        03=else exit;
                    }
                    03=else exit;
                }
                04=else exit;
            }
            05=if (ScriptItemActionType()==t_OnItemHit)
            06 ^{
            }
        }
        Owner=None
        Size=20
        Text=Ёмкость для хранения ракетных снарядов.
        Text=Кол-во: <Data2>/<Data1>, выдержит использований: <Data3>
    }
    Container_sphere ^{
        Cost=Average
        Name=Контейнер со сферами
        OnActCode ^{
            01=if (ScriptItemActionType()==t_OnAnotherItem)
            02 ^{
                01=if (ItemType(ScriptItemActObject1())==t_CustomWeapon)
                02 ^{
                    01=if (MissilesToRearm(ScriptItemActObject1())>0 && UselessItemData(CurItem(),2)>0)
                    02 ^{
                        01=if (MessageBoxYesNo('Пополнить боезапас?'))
                        02 ^{
                            00=UselessItemData(CurItem(),3,UselessItemData(CurItem(),3)-1);
                            01=if (MissilesToRearm(ScriptItemActObject1())>=UselessItemData(CurItem(),2))
                            02 ^{
                                01=MissilesToRearm(ScriptItemActObject1(),UselessItemData(CurItem(),2));
                                02=UselessItemData(CurItem(),2,0);
                                03=ScriptItemActParam(2);
                            }
                            03=else
                            04 ^{
                                01=UselessItemData(CurItem(),2,(UselessItemData(CurItem(),2)-MissilesToRearm(ScriptItemActObject1())));
                                02=MissilesToRearm(ScriptItemActObject1(),MissilesToRearm(ScriptItemActObject1()));
                                03=ScriptItemActParam(2);
                            }
                            05=if(UselessItemData(CurItem(),3)==0)
                            05 ^{
                                00=MessageBox('Контейнер не выдержал такого обращения и развалился');
                                01=ScriptItemActParam(1);
                                02=exit;
                            }
                            06=exit;
                        }
                        03=else exit;
                    }
                    03=else exit;
                }
                04=if (ItemType(ScriptItemActObject1())==t_UselessItem && findsubstr(EquipmentImageName(ScriptItemActObject1()),'Container_sphere')==0)
                05 ^{
                    01=if (UselessItemData(ScriptItemActObject1(),1)-UselessItemData(ScriptItemActObject1(),2)>0 && UselessItemData(CurItem(),2)>0)
                    02 ^{
                        01=if (MessageBoxYesNo('Переместить боевые снаряды?'))
                        02 ^{
                            00=UselessItemData(CurItem(),3,UselessItemData(CurItem(),3)-1);
                            01=if (UselessItemData(ScriptItemActObject1(),1)-UselessItemData(ScriptItemActObject1(),2)>=UselessItemData(CurItem(),2))
                            02 ^{
                                01=UselessItemData(ScriptItemActObject1(),2,UselessItemData(ScriptItemActObject1(),2)+UselessItemData(CurItem(),2));
                                02=UselessItemData(CurItem(),2,0);
                                03=ScriptItemActParam(2);
                            }
                            03=else
                            04 ^{
                                01=UselessItemData(CurItem(),2,UselessItemData(CurItem(),2)+UselessItemData(ScriptItemActObject1(),2)-UselessItemData(ScriptItemActObject1(),1));
                                02=UselessItemData(ScriptItemActObject1(),2,UselessItemData(ScriptItemActObject1(),1));
                                03=ScriptItemActParam(2);
                            }
                            05=if(UselessItemData(CurItem(),3)==0)
                            05 ^{
                                00=MessageBox('Контейнер не выдержал такого обращения и развалился');
                                01=ScriptItemActParam(1);
                                02=exit;
                            }
                            06=exit;
                        }
                        03=else exit;
                    }
                    03=else exit;
                }
            }
            03=if (ScriptItemActionType()==t_OnAnotherItem2)
            04 ^{
                01=if (EqModule(ScriptItemActObject1())==FindBonusByCustomTag('empty_mm')) exit;
                02=if (ItemType(ScriptItemActObject1())==t_Weapon4 || ItemType(ScriptItemActObject1())==t_Weapon15 || ItemType(ScriptItemActObject1())==t_Weapon18)
                03 ^{
                    01=if (UselessItemData(CurItem(),1)-UselessItemData(CurItem(),2)>0)
                    02 ^{
                        01=if ((25+5*ItemLevel(ScriptItemActObject1())-MissilesToRearm(ScriptItemActObject1()))>0)
                        02 ^{
                            01=if (MessageBoxYesNo('Переместить боевые снаряды?'))
                            02 ^{
                                00=UselessItemData(CurItem(),3,UselessItemData(CurItem(),3)-1);
                                01=dword missile_container;
                                02=dword missile_weapon;
                                03=missile_container=UselessItemData(CurItem(),1)-UselessItemData(CurItem(),2);
                                04=missile_weapon=25+5*ItemLevel(ScriptItemActObject1())-MissilesToRearm(ScriptItemActObject1());
                                05=if (missile_weapon>missile_container)
                                06 ^{
                                    01=MissilesToRearm(ScriptItemActObject1(),(0-missile_container));
                                    02=UselessItemData(CurItem(),2,UselessItemData(CurItem(),2)+missile_container);
                                    03=ScriptItemActParam(2);
                                }
                                07=else
                                08 ^{
                                    01=UselessItemData(CurItem(),2,UselessItemData(CurItem(),2)+missile_weapon);
                                    02=MissilesToRearm(ScriptItemActObject1(),(0-missile_weapon));
                                    03=ScriptItemActParam(2);
                                }
                                09=if(UselessItemData(CurItem(),3)==0)
                                09 ^{
                                    00=MessageBox('Контейнер не выдержал такого обращения и развалился');
                                    01=ScriptItemActParam(1);
                                    02=exit;
                                }
                                10=exit;
                            }
                            03=else exit;
                        }
                        03=else exit;
                    }
                    03=else exit;
                }
                04=else exit;
            }
            05=if (ScriptItemActionType()==t_OnItemHit)
            06 ^{
            }
        }
        Owner=None
        Size=20
        Text=Ёмкость для хранения шаровых снарядов.
        Text=Кол-во: <Data2>/<Data1>, выдержит использований: <Data3>
    }
    Container_torpedo ^{
        Cost=Average
        Name=Контейнер с торпедами
        OnActCode ^{
            01=if (ScriptItemActionType()==t_OnAnotherItem)
            02 ^{
                01=if (ItemType(ScriptItemActObject1())==t_Weapon15)
                02 ^{
                    01=if (MissilesToRearm(ScriptItemActObject1())>0 && UselessItemData(CurItem(),2)>0)
                    02 ^{
                        01=if (MessageBoxYesNo('Пополнить боезапас?'))
                        02 ^{
                            00=UselessItemData(CurItem(),3,UselessItemData(CurItem(),3)-1);
                            01=if (MissilesToRearm(ScriptItemActObject1())>=UselessItemData(CurItem(),2))
                            02 ^{
                                01=MissilesToRearm(ScriptItemActObject1(),UselessItemData(CurItem(),2));
                                02=UselessItemData(CurItem(),2,0);
                                03=ScriptItemActParam(2);
                            }
                            03=else
                            04 ^{
                                01=UselessItemData(CurItem(),2,(UselessItemData(CurItem(),2)-MissilesToRearm(ScriptItemActObject1())));
                                02=MissilesToRearm(ScriptItemActObject1(),MissilesToRearm(ScriptItemActObject1()));
                                03=ScriptItemActParam(2);
                            }
                            05=if(UselessItemData(CurItem(),3)==0)
                            05 ^{
                                00=MessageBox('Контейнер не выдержал такого обращения и развалился');
                                01=ScriptItemActParam(1);
                                02=exit;
                            }
                            06=exit;
                        }
                        03=else exit;
                    }
                    03=else exit;
                }
                04=if (ItemType(ScriptItemActObject1())==t_UselessItem && findsubstr(EquipmentImageName(ScriptItemActObject1()),'Container_torpedo')==0)
                05 ^{
                    01=if (UselessItemData(ScriptItemActObject1(),1)-UselessItemData(ScriptItemActObject1(),2)>0 && UselessItemData(CurItem(),2)>0)
                    02 ^{
                        01=if (MessageBoxYesNo('Переместить боевые снаряды?'))
                        02 ^{
                            00=UselessItemData(CurItem(),3,UselessItemData(CurItem(),3)-1);
                            01=if (UselessItemData(ScriptItemActObject1(),1)-UselessItemData(ScriptItemActObject1(),2)>=UselessItemData(CurItem(),2))
                            02 ^{
                                01=UselessItemData(ScriptItemActObject1(),2,UselessItemData(ScriptItemActObject1(),2)+UselessItemData(CurItem(),2));
                                02=UselessItemData(CurItem(),2,0);
                                03=ScriptItemActParam(2);
                            }
                            03=else
                            04 ^{
                                01=UselessItemData(CurItem(),2,UselessItemData(CurItem(),2)+UselessItemData(ScriptItemActObject1(),2)-UselessItemData(ScriptItemActObject1(),1));
                                02=UselessItemData(ScriptItemActObject1(),2,UselessItemData(ScriptItemActObject1(),1));
                                03=ScriptItemActParam(2);
                            }
                            05=if(UselessItemData(CurItem(),3)==0)
                            05 ^{
                                00=MessageBox('Контейнер не выдержал такого обращения и развалился');
                                01=ScriptItemActParam(1);
                                02=exit;
                            }
                            06=exit;
                        }
                        03=else exit;
                    }
                    03=else exit;
                }
            }
            03=if (ScriptItemActionType()==t_OnAnotherItem2)
            04 ^{
                01=if (EqModule(ScriptItemActObject1())==FindBonusByCustomTag('empty_mm')) exit;
                02=if (ItemType(ScriptItemActObject1())==t_Weapon15)
                03 ^{
                    01=if (UselessItemData(CurItem(),1)-UselessItemData(CurItem(),2)>0)
                    02 ^{
                        01=if ((25+5*ItemLevel(ScriptItemActObject1())-MissilesToRearm(ScriptItemActObject1()))>0)
                        02 ^{
                            01=if (MessageBoxYesNo('Переместить боевые снаряды?'))
                            02 ^{
                                00=UselessItemData(CurItem(),3,UselessItemData(CurItem(),3)-1);
                                01=dword missile_container;
                                02=dword missile_weapon;
                                03=missile_container=UselessItemData(CurItem(),1)-UselessItemData(CurItem(),2);
                                04=missile_weapon=25+5*ItemLevel(ScriptItemActObject1())-MissilesToRearm(ScriptItemActObject1());
                                05=if (missile_weapon>missile_container)
                                06 ^{
                                    01=MissilesToRearm(ScriptItemActObject1(),(0-missile_container));
                                    02=UselessItemData(CurItem(),2,UselessItemData(CurItem(),2)+missile_container);
                                    03=ScriptItemActParam(2);
                                }
                                07=else
                                08 ^{
                                    01=UselessItemData(CurItem(),2,UselessItemData(CurItem(),2)+missile_weapon);
                                    02=MissilesToRearm(ScriptItemActObject1(),(0-missile_weapon));
                                    03=ScriptItemActParam(2);
                                }
                                09=if(UselessItemData(CurItem(),3)==0)
                                09 ^{
                                    00=MessageBox('Контейнер не выдержал такого обращения и развалился');
                                    01=ScriptItemActParam(1);
                                    02=exit;
                                }
                                10=exit;
                            }
                            03=else exit;
                        }
                        03=else exit;
                    }
                    03=else exit;
                }
                04=else exit;
            }
            05=if (ScriptItemActionType()==t_OnItemHit)
            06 ^{
            }
        }
        Owner=None
        Size=20
        Text=Ёмкость для хранения торпед.
        Text=Кол-во: <Data2>/<Data1>, выдержит использований: <Data3>
    }
}